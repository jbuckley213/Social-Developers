(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{154:function(t,e,s){},155:function(t,e,s){"use strict";s.r(e);var n=s(0),o=s(1),i=s.n(o),a=s(47),c=s.n(a),r=s(7),l=s(3),u=s(4),h=s(6),d=s(5),p=(s(99),s(10)),j=s(33),m=s(13),f=s.n(m),b=s(14),g=s.n(b),v=g()("https://social-developer-platform.herokuapp.com"),O=new(function(){function t(){Object(l.a)(this,t),this.auth=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})}return Object(u.a)(t,[{key:"signup",value:function(t,e,s,n,o){return console.log(t,e,s,n,o),this.auth.post("/auth/signup",{firstName:t,lastName:e,image:s,email:n,password:o}).then((function(t){return t.data}))}},{key:"login",value:function(t,e){return this.auth.post("/auth/login",{email:t,password:e}).then((function(t){return t.data}))}},{key:"logout",value:function(){return v.emit("logout"),this.auth.get("/auth/logout").then((function(t){return t.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(t){return t.data}))}}]),t}()),x=new function t(){var e=this;Object(l.a)(this,t),this.getAll=function(){return e.api.get("/api/users")},this.getOne=function(t){return e.api.get("/api/users/".concat(t))},this.follow=function(t){return e.api.put("/api/users/".concat(t,"/follow"))},this.unfollow=function(t){return e.api.put("/api/users/".concat(t,"/unfollow"))},this.deleteNotification=function(t){return e.api.put("/api/users/notifications/".concat(t))},this.seenNotification=function(){return e.api.get("/api/users/notifications/seen")},this.editPhoto=function(t){return console.log(t),e.api.post("/api/users/edit",{image:t})},this.darkView=function(t){return e.api.post("/api/users/dark-mode",{darkMode:t})},this.api=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})},w=i.a.createContext(),k=w.Consumer,N=w.Provider,y=function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isLoggedIn:!1,isLoading:!0,user:null,isDark:!1},t.signup=function(e,s,n,o,i){O.signup(e,s,n,o,i).then((function(e){return t.setState({isLoggedIn:!0,user:e})})).catch((function(e){t.setState({isLoggedIn:!1,user:null})}))},t.login=function(e,s){return O.login(e,s).then((function(e){console.log("error"),t.setState({isLoggedIn:!0,user:e})})).catch((function(e){console.log("error"),t.setState({isLoggedIn:!1,user:null})})),"Username or password not correct"},t.logout=function(){O.logout().then((function(){return t.setState({isLoggedIn:!1,user:null})})).catch((function(t){return console.log(t)}))},t.me=function(){console.log("me called"),O.me().then((function(e){t.setState({user:e})})).catch((function(t){console.log(t)}))},t.toggleTheme=function(){var e="";e=t.state.isDark?"light":"dark",x.darkView(e).then((function(e){console.log(e),t.setState({isDark:!t.state.isDark})})).catch((function(t){console.log(t)}))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this;O.me().then((function(e){return t.setState({isLoggedIn:!0,user:e,isLoading:!1,isDark:e.darkMode})})).catch((function(e){return t.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var t=this.state,e=t.isDark,s=t.isLoggedIn,o=t.isLoading,i=t.user,a=this.toggleTheme,c=this.signup,r=this.login,l=this.logout,u=this.me;return o?Object(n.jsx)("p",{children:"Loading"}):Object(n.jsx)(N,{value:{isDark:e,isLoggedIn:s,isLoading:o,user:i,signup:c,login:r,logout:l,me:u,toggleTheme:a},children:this.props.children})}}]),s}(i.a.Component),S=function(t){return function(e){Object(h.a)(o,e);var s=Object(d.a)(o);function o(){return Object(l.a)(this,o),s.apply(this,arguments)}return Object(u.a)(o,[{key:"render",value:function(){var e=this;return Object(n.jsx)(k,{children:function(s){var o=s.isLoggedIn,i=s.isDark,a=s.isLoading,c=s.user,r=s.signup,l=s.login,u=s.logout,h=s.me,d=s.toggleTheme;return Object(n.jsx)(t,Object(j.a)(Object(j.a)({},e.props),{},{isDark:i,isLoggedIn:o,isLoading:a,user:c,signup:r,login:l,logout:u,me:h,toggleTheme:d}))}})}}]),o}(i.a.Component)},C=s(85),L=s.n(C),P=s(84),D=s.n(P),I=s(83),_=s.n(I),F=s(82),A=s.n(F),M=s(170),U=(s(32),g()("https://social-developer-platform.herokuapp.com")),B=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={newMessages:0,newNotification:0},t.startSocket=function(){t.props.user.conversations.forEach((function(e){U.emit("join",{room:e._id,user:t.props.user._id},(function(t){t&&console.log(t)})),U.on("message",(function(t){}))})),U.on("notification",(function(e){var s=e.userId.userId,n=e.userId.userLiked;if(console.log(n),s===t.props.user._id&&n!==t.props.user._id){var o=t.state.newNotification;o++,t.setState({newNotification:o})}}))},t.getMessageNotification=function(){var e=t.props.user.conversations;if(0===e.length)return 0;var s=t.state.newMessages/e.length;return console.log(s),s},t.getMessageUnread=function(){x.getOne(t.props.user._id).then((function(e){var s=e.data.user.conversations.reduce((function(t,e){return t+e.notifications.length}),0);t.setState({newMessages:s})}))},t.setMessagesZero=function(){t.setState({newMessages:0})},t.setNotificationsZero=function(){t.setState({newNotification:0})},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.user&&(this.startSocket(),this.getMessageUnread())}},{key:"render",value:function(){return Object(n.jsx)("nav",{className:"navbar",children:this.props.isLoggedIn?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(r.c,{className:"btn ",activeClassName:"nav-link",to:"/private",children:Object(n.jsx)(A.a,{})}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/search",children:Object(n.jsx)(_.a,{})}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/profile/".concat(this.props.user._id),onClick:this.setNotificationsZero,children:Object(n.jsx)(M.a,{badgeContent:this.state.newNotification,color:"primary",max:10,children:Object(n.jsx)(D.a,{})})}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/conversations",onClick:this.setMessagesZero,children:Object(n.jsx)(M.a,{color:"primary",max:10,children:Object(n.jsx)(L.a,{})})})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/",children:"Home"}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/login",children:"Login"}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/signup",children:"Sign Up"})]})})}}]),s}(o.Component));var z=function(){return Object(n.jsxs)("div",{id:"home",children:[Object(n.jsx)("img",{src:"/logo.png",alt:"logo"}),Object(n.jsx)("section",{children:Object(n.jsx)("p",{children:"Love Code? Share your thoughts, explore new ideas and find others like you!"})})]})},E=s(12),T=s(8),R=s(9);function W(){var t=Object(T.a)(["\n    width:100%;\n  background-color: #f2f2f2;\n  height: auto;\n  padding-bottom:200px;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:10px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px auto;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  div{\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n  }\n  input {\n    margin: 5px auto;\n    width:70%;\n"]);return W=function(){return t},t}function q(){var t=Object(T.a)(["\n  ","\n"]);return q=function(){return t},t}function Z(){var t=Object(T.a)(["\n    width:100%;\n  background-color: #f2f2f2;\n  height: 100%;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:20px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px 0;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  input {\n    margin: 20px auto;\n    width:70%;\n"]);return Z=function(){return t},t}function J(){var t=Object(T.a)(["\n  ","\n"]);return J=function(){return t},t}var V=R.b.div(J(),(function(){return Object(R.a)(Z())})),H=R.b.div(q(),(function(){return Object(R.a)(W())})),Y=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={firstName:"",lastName:"",image:"",email:"",password:""},t.handleFormSubmit=function(e){e.preventDefault();var s=t.state,n=s.firstName,o=s.lastName,i=s.image,a=s.email,c=s.password;t.props.signup(n,o,i,a,c)},t.handleChange=function(e){var s=e.target,n=s.name,o=s.value;t.setState(Object(E.a)({},n,o))},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var s=e.target.files[0],n=new FormData;n.append("image",s),f.a.post("".concat("https://social-developer-platform.herokuapp.com","/auth/upload"),n,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({image:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t}return Object(u.a)(s,[{key:"render",value:function(){var t=this.state,e=t.firstName,s=t.lastName,o=t.image,i=t.email,a=t.password;return Object(n.jsxs)(H,{children:[Object(n.jsx)("h1",{children:"Sign Up"}),Object(n.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(n.jsx)("label",{children:"Profile Pic"}),Object(n.jsx)("input",{className:"input is-primary",name:"image",type:"file",onChange:this.handleFileUpload}),Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:o&&o,alt:""})}),Object(n.jsx)("label",{children:"First Name:"}),Object(n.jsx)("input",{className:"input is-primary",type:"text",name:"firstName",value:e,onChange:this.handleChange,required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{children:"Last Name:"}),Object(n.jsx)("input",{className:"input is-primary",type:"text",name:"lastName",value:s,onChange:this.handleChange,required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{children:"Email:"}),Object(n.jsx)("input",{className:"input is-primary",type:"text",name:"email",value:i,onChange:this.handleChange,required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{className:"input is-primary",type:"password",name:"password",value:a,onChange:this.handleChange,required:!0}),Object(n.jsxs)("button",{className:"button is-primary is-white",type:"submit",children:[" ","Signup"," "]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Already have account?"}),Object(n.jsx)("button",{className:"signup-btn button is-link is-light",children:Object(n.jsx)(r.b,{to:"/login",children:" Login"})})]})]})}}]),s}(o.Component)),G=(s(53),S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={email:"",password:"",errorMessage:!1},t.handleFormSubmit=function(e){e.preventDefault();var s=t.state,n=s.email,o=s.password;t.props.login(n,o);t.setState({errorMessage:!0})},t.handleChange=function(e){var s=e.target,n=s.name,o=s.value;t.setState(Object(E.a)({},n,o))},t}return Object(u.a)(s,[{key:"render",value:function(){var t=this.state,e=t.email,s=t.password;return console.log(),Object(n.jsxs)(V,{children:[Object(n.jsx)("h1",{children:"Login"}),Object(n.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(n.jsx)("label",{children:"Email:"}),Object(n.jsx)("input",{class:"input is-primary",type:"text",name:"email",value:e,onChange:this.handleChange,required:!0}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{class:"input is-primary",type:"password",name:"password",value:s,onChange:this.handleChange,required:!0}),Object(n.jsx)("button",{className:"button is-primary is-white",type:"submit",children:"Login"})]}),this.state.errorMessage?Object(n.jsx)("div",{className:"login-error animated fadeIn",children:"Email or password is incorrect"}):null]})}}]),s}(o.Component))),K=s(35),Q=new function t(){var e=this;Object(l.a)(this,t),this.getAllPostsByFollowedUsers=function(){return e.api.get("/api/posts")},this.getById=function(t){return e.api.get("/api/posts/".concat(t))},this.createPost=function(t,s,n){return console.log(t,s,n),e.api.post("/api/posts",{postedBy:t,postContent:s,postPhoto:n})},this.likePost=function(t){return e.api.put("/api/posts/".concat(t,"/likes"))},this.unlikePost=function(t){return e.api.put("/api/posts/".concat(t,"/unlikes"))},this.comment=function(t,s){return e.api.post("/api/posts/".concat(t,"/comment"),{commentContent:s})},this.delete=function(t){return e.api.delete("/api/posts/".concat(t,"/delete"))},this.deleteComment=function(t,s){return e.api.delete("/api/posts/".concat(t,"/comment/").concat(s))},this.api=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})};function X(){var t=Object(T.a)(["\n    width:100%;\n    background-color:rgb(29, 41, 53);\n  height:auto;\n  \n  h1 {\n    color: palevioletred;\n  }\n  .post-main{\n    background-color:rgb(80, 80, 80);\n    color: white;\n  } \n  .admin-message p{\n    color:white;\n  }\n  p {\n    color: palevioletred;\n"]);return X=function(){return t},t}function $(){var t=Object(T.a)(["\n  ","\n"]);return $=function(){return t},t}function tt(){var t=Object(T.a)(["\n    width:100%;\n  background-color: rgb(0, 0, 0) ;\n  ","\n  height:100%;\n  \n  h1 {\n    color: palevioletred;\n  }\n  div.post-main{\n    background-color:rgb(29, 41, 53);\n    color: white;\n  }\n  div.message-preview{\n    background-color:rgb(29, 41, 53);\n\n  }\n  div.notifications-menu{\n    background-color:rgb(29, 41, 53);\n\n  }\n  div#nav-space{\n    background-color: rgb(0, 0, 0) ;\n\n  }\n  nav.navbar{\n    background-color: rgb(0, 0, 0) ;\n\n  }\n  button.button{\n    background-color:rgb(29, 41, 53);\n    color:white;\n\n  }\n\n  input {\n    background-color: rgb(0, 0, 0) ;\n    color:white;\n  }\n\n  textarea{\n    background-color: rgb(0, 0, 0) ;\n    color:white;\n  }\n  div{\n    color:white;\n  }\n  p {\n    color: white;\n"]);return tt=function(){return t},t}function et(){var t=Object(T.a)(["\n  ","\n"]);return et=function(){return t},t}var st=R.b.div(et(),(function(t){return t.dark&&Object(R.a)(tt(),"")})),nt=R.b.div($(),(function(t){return t.dark&&Object(R.a)(X())})),ot=s(31),it=s.n(ot),at=s(38),ct=s.n(at),rt=(s(154),g()("https://social-developer-platform.herokuapp.com")),lt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isliked:!1,numberOfLikes:0,numberOfComments:0,showPhoto:!1},t.countNumberOfLikes=function(){var e=t.props.post.likes.length;t.setState({numberOfLikes:e})},t.countNumberOfComments=function(){var e=t.props.post.comments.length;t.setState({numberOfComments:e})},t.socketLike=function(){console.log("sockey run"),rt.emit("notification",{userId:t.props.post.postedBy._id,userLiked:t.props.user._id},(function(){console.log("socket called")}))},t.handleLike=function(){t.state.isLiked||Q.likePost(t.props.post._id).then((function(e){console.log(e);var s=t.state.numberOfLikes;s++,t.setState({numberOfLikes:s}),t.socketLike()})).catch((function(t){console.log(t)})),t.state.isLiked&&Q.unlikePost(t.props.post._id).then((function(e){var s=t.state.numberOfLikes;s--,console.log(s),t.setState({numberOfLikes:s})})).catch((function(t){console.log(t)})),t.setState({isLiked:!t.state.isLiked})},t.outputDate=function(t){var e=new Date(t),s=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},t.toggleShowPicture=function(){t.setState({showPhoto:!t.state.showPhoto})},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this,e=!1;this.props.post&&this.props.post.likes.forEach((function(s){s===t.props.user._id&&(e=!0)})),this.setState({isLiked:e}),this.countNumberOfLikes(),this.countNumberOfComments()}},{key:"render",value:function(){var t=this.props.post;return Object(n.jsx)("div",{children:Object(n.jsx)(st,{dark:this.props.isDark,children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:t.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)("div",{className:"post-user",children:[" ",t.postedBy&&t.postedBy.firstName," ",t.postedBy&&t.postedBy.lastName,"   "]}),Object(n.jsx)("div",{className:"date",children:this.outputDate(t.date)})]}),t.postPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"post-image",style:{width:"100px"},src:t.postPhoto&&t.postPhoto,alt:""}):null,Object(n.jsxs)(r.b,{to:"/postdetails/".concat(t._id),children:[" ",Object(n.jsx)("div",{className:"post-content",children:t.postContent})]}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(n.jsx)(it.a,{fontSize:"small",color:"primary"}):Object(n.jsx)(it.a,{fontSize:"small"})," ",Object(n.jsx)("div",{children:this.state.numberOfLikes})]}),Object(n.jsxs)("div",{className:"comment-icon",children:[Object(n.jsx)(ct.a,{}),Object(n.jsx)("div",{children:this.state.numberOfComments})]})]}),this.state.showPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"large-img animated zoomIn",src:t.postPhoto&&t.postPhoto,alt:""}):null]})]})})})}}]),s}(o.Component));function ut(){var t=Object(T.a)(["\n  background: transparent;\n  border-radius: 3px;\n  color: palevioletred;\n  margin: 0 1em;\n\n  animation: "," 1s linear;\n"]);return ut=function(){return t},t}function ht(){var t=Object(T.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return ht=function(){return t},t}var dt=Object(R.c)(ht()),pt=R.b.div(ut(),dt),jt=g()("https://social-developer-platform.herokuapp.com"),mt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={users:[],posts:[],post:"",postPhoto:"",newPosts:[]},t.handlePostsFollowedApi=function(){Q.getAllPostsByFollowedUsers().then((function(e){t.setState({users:e.data}),t.orderPosts()})).catch((function(e){return t.setState({users:[]})}))},t.orderPosts=function(){var e=[].concat(Object(K.a)(t.state.newPosts),Object(K.a)(t.props.user.posts));t.state.users.forEach((function(t){e.push.apply(e,Object(K.a)(t.posts))})),e.sort((function(t,e){return t.date>e.date?-1:t.date>e.date?1:0})),t.setState({posts:e})},t.handleInput=function(e){var s=e.target,n=s.name,o=s.value;t.setState(Object(E.a)({},n,o))},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var s=e.target.files[0],n=new FormData;n.append("image",s),f.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),n,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({postPhoto:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t.postWithSocket=function(){jt.emit("post",{},(function(){}))},t.handleSubmit=function(e){e.preventDefault(),t.postWithSocket(),Q.createPost(t.props.user._id,t.state.post,t.state.postPhoto).then((function(e){console.log(e);var s=Object(K.a)(t.state.newPosts);s.push(e.data),t.setState({postPhoto:"",post:"",newPosts:s}),t.handlePostsFollowedApi()})).catch((function(t){console.log(t)}))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.handlePostsFollowedApi(),jt.emit("join-main",{user:this.props.user._id},(function(t){t&&console.log(t)})),jt.on("postIncoming",(function(){console.log("new post"),t.handlePostsFollowedApi()}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"dashboard",children:Object(n.jsxs)(st,{dark:this.props.isDark,children:[Object(n.jsxs)("div",{className:"dashboard-header",children:[Object(n.jsx)("img",{src:this.props.user.image,alt:"user profile"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h2",{children:["Welcome ",this.props.user&&this.props.user.firstName]}),Object(n.jsx)("p",{children:"See New Posts Here!"})]})]}),Object(n.jsxs)("form",{className:"post-form",onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:this.props.user.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsx)("div",{className:"post-user-info",children:Object(n.jsxs)("div",{className:"post-user",children:[" ",this.props.user&&this.props.user.firstName," ",this.props.user&&this.props.user.lastName,"   "]})}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(n.jsx)("textarea",{className:"post",name:"post",value:this.state.post,onChange:this.handleInput,placeholder:"Share your code...",required:!0}),Object(n.jsxs)("div",{className:"post-actions",children:[Object(n.jsx)("input",{name:"postPhoto",type:"file",onChange:this.handleFileUpload}),Object(n.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Post"})," "]})]})]}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})})]}),Object(n.jsx)(pt,{children:this.state.posts.map((function(t){return Object(n.jsx)(lt,{post:t},t._id)}))})]})})}}]),s}(o.Component)),ft=new function t(){var e=this;Object(l.a)(this,t),this.createConversation=function(t){return e.api.post("/api/conversations/".concat(t))},this.getConversations=function(){return e.api.get("/api/conversations")},this.getConversationOne=function(t){return e.api.get("/api/conversations/".concat(t))},this.sendMessage=function(t,s,n){return e.api.post("/api/conversations/".concat(t,"/message"),{messageContent:s,userSentToId:n})},this.messageSeen=function(t){return e.api.get("/api/conversations/".concat(t,"/message-seen"))},this.deleteMessage=function(t,s){return e.api.delete("/api/conversations/".concat(t,"/message/").concat(s))},this.api=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})},bt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isFollowing:!1,hasConversation:!1,conversationId:"",user:{}},t.checkFollow=function(){var e=t.props.user.following;console.log(e);var s=t.props.userSearch._id,n=!1;e.forEach((function(t){t===s&&(n=!0)})),t.setState({isFollowing:n})},t.checkConversation=function(){var e=t.props.user.conversations;console.log(e);var s=t.props.userSearch._id,n=!1;0!==e.length?(e.forEach((function(e){e.users.includes(s)&&(n=!0,t.setState({conversationId:e._id}))})),t.setState({hasConversation:n})):t.setState({hasConversation:n})},t.handleFollow=function(){x.follow(t.props.userSearch._id).then((function(e){console.log(e),t.setState({isFollowing:!0})}))},t.handleUnfollow=function(){x.unfollow(t.props.userSearch._id).then((function(e){console.log(e),t.setState({isFollowing:!1})}))},t.createConversation=function(){var e=t.props.userSearch._id;ft.createConversation(e).then((function(e){console.log(e);var s=e.data;t.setState({hasConversation:!0,conversationId:s})}))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.checkFollow(),this.checkConversation()}},{key:"render",value:function(){var t=this.props.userSearch;return Object(n.jsxs)("tr",{className:"profile-link",children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:t.image,alt:"user profile"})}),Object(n.jsx)("td",{children:Object(n.jsxs)(r.b,{to:"/profile/".concat(t._id),children:[Object(n.jsxs)("p",{children:[t&&t.firstName," "]}),Object(n.jsx)("p",{children:t&&t.lastName})]})}),Object(n.jsx)("td",{children:this.state.isFollowing?Object(n.jsx)("button",{className:"button is-white is-light is-size-7",onClick:this.handleUnfollow,children:"Unfollow"}):Object(n.jsx)("button",{className:"button is-success is-light is-size-7",onClick:this.handleFollow,children:"Follow"})}),Object(n.jsx)("td",{children:this.state.hasConversation?Object(n.jsx)(r.b,{className:"button is-success is-light is-size-7",to:"/conversation-details/".concat(this.state.conversationId),children:"Go to chat"}):Object(n.jsx)("button",{className:"button is-white is-light is-size-7",onClick:this.createConversation,children:"Start Chat"})})]})}}]),s}(o.Component)),gt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={users:[],searchResults:[],searchInput:""},t.handleSearchResults=function(e){var s=t.state.users.filter((function(t){var s=t.firstName.toLowerCase(),n=t.lastName.toLowerCase(),o=e.toLowerCase();return!(!s.startsWith(o)&&!n.startsWith(o))}));t.setState({searchResults:s})},t.handleInput=function(e){var s=e.target,n=s.name,o=s.value;t.handleSearchResults(o),t.setState(Object(E.a)({},n,o))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),x.getAll().then((function(e){t.setState({users:e.data,searchResults:e.data})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return Object(n.jsx)(st,{dark:this.props.isDark,children:Object(n.jsxs)("div",{className:"search",children:[Object(n.jsx)("h1",{children:"Search For A Fellow Developer"}),Object(n.jsx)("input",{className:"input is-primary",name:"searchInput",value:this.state.searchInput,onChange:this.handleInput,autoComplete:"off"}),""===this.state.searchInput?null:Object(n.jsx)("div",{className:"animated slideInLeft",children:Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{children:0===this.state.searchResults.length?"Not results found":this.state.searchResults.map((function(t){return Object(n.jsx)(bt,{userSearch:t},t._id)}))})})})]})})}}]),s}(o.Component)),vt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={notifications:[]},t.filterNotifications=function(e){var s=t.state.notifications.filter((function(t){return e!==t._id}));t.setState({notifications:s})},t.deleteNotification=function(e){x.deleteNotification(e).then((function(s){t.filterNotifications(e),t.props.reduceNotifications()})).catch((function(t){return console.log(t)}))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setState({notifications:Object(K.a)(this.props.notifications).reverse().slice(0,10)})}},{key:"render",value:function(){var t=this,e=this.state.notifications;return Object(n.jsx)("div",{className:"notifications-menu animated zoomIn",children:e.map((function(e){return"follow"!==e.notificationInfo?Object(n.jsxs)("div",{className:"notification-item",children:[Object(n.jsx)("img",{src:"".concat(e.userActivity.image),alt:"user profile"}),Object(n.jsx)(r.b,{to:"/postdetails/".concat(e.post),children:Object(n.jsxs)("p",{children:[e.userActivity.firstName," ",e.userActivity.lastName," ",e.notificationInfo," your post"]})}),Object(n.jsx)("button",{className:"delete notification-delete",onClick:function(){return t.deleteNotification(e._id)}})]},e._id):Object(n.jsxs)("div",{className:"notification-item",children:[Object(n.jsx)("img",{src:"".concat(e.userActivity.image),alt:"user profile"}),Object(n.jsxs)(r.b,{onClick:t.props.toggleNotifications,to:"/profile/".concat(e.userActivity._id),children:[" ",Object(n.jsxs)("p",{children:[e.userActivity.firstName," ",e.userActivity.lastName," started following you"]})]}),Object(n.jsx)("button",{className:"delete",onClick:function(){return t.deleteNotification(e._id)},children:"Delete"})]},e._id)}))})}}]),s}(o.Component)),Ot=function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={image:""},t.handleSubmit=function(e){e.preventDefault(),x.editPhoto(t.state.image).then((function(e){console.log(e),t.setState({image:""})})).catch((function(t){console.log(t)}))},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var s=e.target.files[0],n=new FormData;n.append("image",s),f.a.post("http://localhost:5000/api/users/upload",n,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({image:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t}return Object(u.a)(s,[{key:"render",value:function(){return console.log(this.state),Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsx)("input",{name:"image",type:"file",onChange:this.handleFileUpload}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(n.jsx)("button",{type:"submit",children:"Save Changes"})]})})}}]),s}(o.Component),xt=s(89),wt=s.n(xt),kt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={showEdit:!1,isFollowed:!1,showSettings:!1},t.toggleEdit=function(){t.setState({showEdit:!t.state.showEdit})},t.handleFollow=function(){t.state.isFollowed?t.state.isFollowed&&x.unfollow(t.props.user._id).then((function(e){console.log(e.data.following),t.setState({isFollowed:!1})})).catch((function(t){return console.log(t)})):x.follow(t.props.user._id).then((function(e){t.setState({isFollowed:!0})}))},t.checkFollow=function(){t.props.user.followers.forEach((function(e){t.props.user._id===e&&t.setState({isFollowed:!0})}))},t.toggleSettings=function(){t.setState({showSettings:!t.state.showSettings})},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.checkFollow()}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"settings",children:[Object(n.jsx)("div",{onClick:this.toggleSettings,children:Object(n.jsx)(wt.a,{})}),this.state.showSettings?Object(n.jsxs)("div",{className:"settings-menu",children:[Object(n.jsx)("button",{className:"is-size-7\t button is-white",onClick:this.toggleEdit,children:"Edit Photo"}),this.state.showEdit?Object(n.jsx)(Ot,{}):null,Object(n.jsx)("button",{className:"is-size-7\t button is-white",onClick:this.props.logout,children:"Logout"}),Object(n.jsxs)("button",{className:"is-size-7\t button is-white",onClick:this.props.toggleTheme,children:["Toggle dark mode"," "]})]}):null]})}}]),s}(o.Component)),Nt=s(90),yt=s.n(Nt);function St(){var t=Object(T.a)(["\n      border: 0.1rem solid #3b945e;\n      border-radius: 5px;\n    "]);return St=function(){return t},t}function Ct(){var t=Object(T.a)(["\n  ","\n"]);return Ct=function(){return t},t}var Lt=R.b.div(Ct(),(function(t){return t.highlight&&Object(R.a)(St())})),Pt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isliked:!1,showDelete:!1,numberOfLikes:0,numberOfComments:0},t.countNumberOfLikes=function(){var e=t.props.post.likes.length;t.setState({numberOfLikes:e})},t.countNumberOfComments=function(){var e=t.props.post.comments.length;t.setState({numberOfComments:e})},t.handleLike=function(){t.state.isLiked||Q.likePost(t.props.post._id).then((function(e){var s=t.state.numberOfLikes;s++,console.log(s),t.setState({numberOfLikes:s})})).catch((function(t){console.log(t)})),t.state.isLiked&&Q.unlikePost(t.props.post._id).then((function(e){var s=t.state.numberOfLikes;s--,console.log(s),t.setState({numberOfLikes:s})})).catch((function(t){console.log(t)})),t.setState({isLiked:!t.state.isLiked})},t.toggleDelete=function(){t.setState({showDelete:!t.state.showDelete})},t.outputDate=function(t){var e=new Date(t),s=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this,e=!1;this.props.post&&this.props.post.likes.forEach((function(s){s===t.props.user._id&&(e=!0)})),this.setState({isLiked:e}),this.countNumberOfLikes(),this.countNumberOfComments()}},{key:"render",value:function(){var t=this,e=this.props.post;return Object(n.jsx)(st,{dark:this.props.isDark,children:Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:e.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)("div",{className:"post-user",children:[" ",e.postedBy&&e.postedBy.firstName," ",e.postedBy&&e.postedBy.lastName,"   "]}),Object(n.jsx)("div",{className:"date",children:this.outputDate(e.date)}),Object(n.jsx)("p",{onClick:this.toggleDelete,href:"#",className:"delete-icon delete is-size-7"}),this.state.showDelete?Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"button is-warning is-light is-size-7",onClick:function(){return t.props.deletePost(e._id)},children:"Confirm Delete"}),Object(n.jsx)("button",{className:"button is-info is-light is-size-7",onClick:this.toggleDelete,children:"Cancel"})]}):null," "]}),e.postPhoto?Object(n.jsx)("img",{className:"post-image",style:{width:"100px"},src:e.postPhoto&&e.postPhoto,alt:""}):null,Object(n.jsxs)(r.b,{to:"/postdetails/".concat(e._id),children:[" ",Object(n.jsx)("div",{className:"post-content",children:e.postContent})]}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(n.jsx)(it.a,{fontSize:"small",color:"primary"}):Object(n.jsx)(it.a,{fontSize:"small"})," ",Object(n.jsx)("div",{children:this.state.numberOfLikes})]}),Object(n.jsxs)("div",{className:"comment-icon",children:[Object(n.jsx)(ct.a,{}),Object(n.jsx)("div",{children:this.state.numberOfComments})]})]})]})]})})})}}]),s}(o.Component)),Dt=g()("https://social-developer-platform.herokuapp.com"),It=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={user:{},posts:[],isAdmin:!1,isFollowed:!1,showDelete:!1,userId:"",showPosts:!0,showLikes:!1,showFollowing:!1,postInput:"",postPhoto:"",showNotifications:!1,numberOfNotifications:0,newNotification:!1,showSettings:!1,following:[]},t.handlePostApi=function(e){var s=t.props.match.params.id;x.getOne(s).then((function(n){t.setState({user:n.data.user,isAdmin:n.data.isAdmin,userId:s,newNotification:n.data.user.newNotification}),e&&t.displayPosts(),t.checkFollow(),t.orderPosts(),t.setFollowing()})).catch((function(t){console.log(t)}))},t.orderPosts=function(){var e=[];t.state.user.posts.forEach((function(t){e.push(t)})),e.sort((function(t,e){return t.date>e.date?-1:t.date>e.date?1:0})),t.setState({posts:e,numberOfNotifications:t.state.user.notifications.length})},t.componentDidUpdate=function(){t.state.userId!==t.props.match.params.id&&t.handlePostApi()},t.checkFollow=function(){t.state.user.followers.forEach((function(e){t.props.user._id===e&&t.setState({isFollowed:!0})}))},t.socketFollow=function(){console.log("sockey run"),Dt.emit("notification",{userId:t.state.user._id,userLiked:t.props.user._id},(function(){console.log("socket called")}))},t.handleFollow=function(){t.state.isFollowed?t.state.isFollowed&&x.unfollow(t.state.user._id).then((function(e){console.log(e.data.following),t.setState({isFollowed:!1})})).catch((function(t){return console.log(t)})):x.follow(t.state.user._id).then((function(e){t.setState({isFollowed:!0}),t.socketFollow()}))},t.deletePost=function(e){Q.delete(e).then((function(e){t.handlePostApi()})).catch((function(t){return console.log(t)}))},t.displayPosts=function(){t.handlePostApi(!1),t.setState({showPosts:!0,showLikes:!1,showFollowing:!1})},t.displayLikes=function(){t.handlePostApi(!1),t.setState({showPosts:!1,showLikes:!0,showFollowing:!1})},t.displayFollowing=function(){t.handlePostApi(!1),t.setState({showPosts:!1,showLikes:!1,showFollowing:!0})},t.handleInput=function(e){var s=e.target,n=s.name,o=s.value;t.setState(Object(E.a)({},n,o))},t.handleSubmit=function(e){e.preventDefault(),Q.createPost(t.props.user._id,t.state.postInput,t.state.postPhoto).then((function(e){t.handlePostApi(),t.setState({postPhoto:"",postInput:""})})).catch((function(t){console.log(t)}))},t.toggleNotifications=function(){t.state.newNotification&&x.seenNotification().then((function(e){t.setState({newNotification:!1})})).catch((function(t){return console.log(t)})),t.setState({showNotifications:!t.state.showNotifications})},t.reduceNotifications=function(){var e=t.state.numberOfNotifications;e--,t.setState({numberOfNotifications:e})},t.toggleSettings=function(){t.setState({showSettings:!t.state.showSettings})},t.setFollowing=function(){var e=t.state.user.following,s=t.state.user,n=e.filter((function(t){return t._id!==s._id}));t.setState({following:n})},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var s=e.target.files[0],n=new FormData;n.append("image",s),f.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),n,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({postPhoto:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t.getNumberOfFollowers=function(){return t.state.isAdmin&&t.state.isFollowed?t.state.user.following.length-1:t.state.user.following.length},t.outputDate=function(t){return new Date(t).toDateString().split(" ").slice(1,4).join(" ")},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.handlePostApi(!0),Dt.on("notification",(function(e){var s=e.userId.userId,n=e.userId.userLiked;console.log(n),s===t.props.user._id&&n!==t.props.user._id&&t.handlePostApi()}))}},{key:"render",value:function(){var t=this;return Object(n.jsx)("div",{className:"profile",children:Object(n.jsxs)(st,{dark:this.props.isDark,children:[Object(n.jsxs)("div",{className:"profile-header",children:[Object(n.jsx)("img",{src:this.state.user.image,alt:"user profile"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:[this.state.user.firstName," ",this.state.user.lastName]}),Object(n.jsxs)("p",{className:"join-date",children:["Joined on ",this.outputDate(this.state.user.created_at)]})]}),this.state.isAdmin?Object(n.jsx)(kt,{userProfile:this.state.user}):Object(n.jsx)("button",{className:"button is-white is-size-7",onClick:this.handleFollow,children:this.state.isFollowed?"Unfollow":"Follow"}),Object(n.jsxs)("div",{className:"notifications",children:[this.state.isAdmin?Object(n.jsxs)("div",{children:[this.state.newNotification?Object(n.jsx)("div",{onClick:this.toggleNotifications,id:"new-notification",className:"notification is-primary animated bounce",children:"You have a new notification"}):null,Object(n.jsx)("div",{onClick:this.toggleNotifications,children:Object(n.jsx)(M.a,{badgeContent:this.state.numberOfNotifications,color:"primary",max:10,children:Object(n.jsx)(yt.a,{})})})]}):null,this.state.showNotifications?Object(n.jsx)(vt,{toggleNotifications:this.toggleNotifications,notifications:this.state.user.notifications,reduceNotifications:this.reduceNotifications}):null]})]}),Object(n.jsxs)("div",{className:"button-group",children:[Object(n.jsx)(Lt,{highlight:this.state.showPosts,children:Object(n.jsxs)("div",{className:"button is-white",onClick:this.displayPosts,children:[" ","Posts ",this.state.posts&&this.state.posts.length]})}),Object(n.jsx)(Lt,{highlight:this.state.showLikes,children:Object(n.jsxs)("div",{className:"button is-white",onClick:this.displayLikes,children:[" ","Likes ",this.state.user.likes&&this.state.user.likes.length]})}),Object(n.jsx)(Lt,{highlight:this.state.showFollowing,children:Object(n.jsxs)("div",{className:"button is-white",onClick:this.displayFollowing,children:["Following"," ",this.state.user.following&&this.state.following.length]})})]}),this.state.showPosts?Object(n.jsxs)("div",{className:"animated fadeInUp",children:[this.state.isAdmin?Object(n.jsx)("div",{children:Object(n.jsxs)("form",{className:"profile-post-form post-form",onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:this.props.user.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsx)("div",{className:"post-user-info",children:Object(n.jsxs)("div",{className:"post-user",children:[" ",this.props.user&&this.props.user.firstName," ",this.props.user&&this.props.user.lastName,"   "]})}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(n.jsx)("textarea",{className:"post",name:"postInput",value:this.state.postInput,onChange:this.handleInput,placeholder:"Share you code...",required:!0}),Object(n.jsxs)("div",{className:"post-actions",children:[Object(n.jsx)("input",{name:"postPhoto",type:"file",onChange:this.handleFileUpload}),Object(n.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Post"})," "]})]})]}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})})]})}):null,this.state.posts&&this.state.posts.map((function(e){return Object(n.jsx)("div",{children:t.state.isAdmin?Object(n.jsx)(Pt,{post:e,deletePost:t.deletePost}):Object(n.jsx)(lt,{post:e})},e._id)}))," "]}):null,this.state.showLikes?Object(n.jsx)("div",{className:"animated fadeInUp",children:0===this.state.user.likes.length?Object(n.jsx)("h3",{className:"no-info",children:"No likes yet"}):this.state.user.likes.map((function(t){return Object(n.jsx)(lt,{post:t},t._id)}))}):null,this.state.showFollowing?Object(n.jsx)("div",{className:"animated fadeInUp",children:0===this.state.following.length?Object(n.jsx)("h3",{className:"no-info",children:"Not following anyone"}):Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{children:this.state.following.map((function(t){return Object(n.jsxs)("tr",{className:"following-link",children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:t.image,alt:"user profile"})}),Object(n.jsx)("td",{children:Object(n.jsx)("p",{children:Object(n.jsxs)(r.b,{to:"/profile/".concat(t._id),children:[t.firstName," ",t.lastName]})})})]},t._id)}))})})}):null]})})}}]),s}(o.Component)),_t=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isAdmin:!1},t.handleIsAdmin=function(){var e=t.props.comment.createdBy._id,s=t.props.user._id;console.log(e,s),e===s?(console.log(!0),t.setState({isAdmin:!0})):t.setState({isAdmin:!1})},t.deleteComment=function(){var e=t.props.comment.post,s=t.props.comment._id;Q.deleteComment(e,s).then((function(e){console.log("clicked"),console.log(e),t.props.getPostDetails()})).catch((function(t){console.log(t)}))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.handleIsAdmin()}},{key:"render",value:function(){var t=this.props.comment;return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:"".concat(t.createdBy.image),alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)(r.b,{to:"/profile/".concat(t.createdBy._id),children:[" ",Object(n.jsxs)("div",{className:"post-user",children:[" ",t.createdBy.firstName," ",t.createdBy.lastName,"   "]})," "]}),Object(n.jsx)("div",{className:"date",children:this.props.outputDate(t.created_at)}),this.state.isAdmin?Object(n.jsx)("p",{onClick:this.deleteComment,href:"#",className:"delete-icon delete"}):null]})," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",t.commentContent]})]})]})})}}]),s}(o.Component));function Ft(){var t=Object(T.a)(["\nbackground-color: white;\ntop:0;\ndisplay:flex;\njusifty-content:space-between;\nalign-items:center; \nwidth:100%;\nmargin:0 auto;\n\nimg{\n  width:25px;\n  height:25px;\n  border-radius:50%;\n  margin:5px 10px;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n"]);return Ft=function(){return t},t}function At(){var t=Object(T.a)(["\n  ","\n"]);return At=function(){return t},t}var Mt=R.b.div(At(),(function(){return Object(R.a)(Ft())})),Ut=g()("https://social-developer-platform.herokuapp.com"),Bt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={post:{},isLiked:!1,commentInput:"",numberOfLikes:0,numberOfComments:0,showLikes:!1,showPhoto:!1},t.countNumberOfLikes=function(){var e=t.state.post.likes.length;t.setState({numberOfLikes:e})},t.countNumberOfComments=function(){var e=t.state.post.comments.length;t.setState({numberOfComments:e})},t.setLike=function(){var e=!1;t.state.post.likes.forEach((function(s){s._id===t.props.user._id&&(e=!0)})),t.setState({isLiked:e})},t.toggleLikes=function(){t.setState({showLikes:!t.state.showLikes})},t.handlePostById=function(){var e=t.props.match.params.postId;Q.getById(e).then((function(e){t.setState({post:e.data}),t.setLike(),t.countNumberOfLikes(),t.countNumberOfComments()})).catch((function(t){return console.log(t)}))},t.handleLike=function(){t.state.isLiked||Q.likePost(t.state.post._id).then((function(e){var s=t.state.numberOfLikes;s++,t.setState({numberOfLikes:s})})).catch((function(t){console.log(t)})),t.state.isLiked&&Q.unlikePost(t.state.post._id).then((function(e){var s=t.state.numberOfLikes;s--,t.setState({numberOfLikes:s})})).catch((function(t){console.log(t)})),t.setState({isLiked:!t.state.isLiked})},t.socketComment=function(){console.log("sockey run"),Ut.emit("notification",{userId:t.state.post.postedBy._id,userLiked:t.props.user._id},(function(){console.log("socket called")}))},t.handleInput=function(e){var s=e.target,n=s.name,o=s.value;t.setState(Object(E.a)({},n,o))},t.handleSubmit=function(e){e.preventDefault(),Q.comment(t.state.post._id,t.state.commentInput).then((function(e){console.log(e.data),t.handlePostById(),t.setState({commentInput:""}),t.socketComment()}))},t.showCommentInput=function(){return Object(n.jsxs)("form",{onSubmit:t.handleSubmit,className:"post-comment",children:[Object(n.jsx)("input",{name:"commentInput",value:t.state.commentInput,onChange:t.handleInput,autoComplete:"off",placeholder:"Write your comment here...",required:!0}),Object(n.jsx)("button",{id:"comment-btn",className:"button is-white s-size-7",type:"submit",children:"Comment"})]})},t.handlePostLinks=function(){var e=t.state.post.postContent.split(" ");console.log(e);var s=e.map((function(t){return t.startsWith("http")||t.startsWith("https")?Object(n.jsx)("a",{href:"".concat(t),children:t}):t}));console.log(s);var o=s.join(" ");return console.log(o),Object(n.jsx)("p",{children:s})},t.outputDate=function(t){var e=new Date(t),s=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},t.toggleShowPicture=function(){t.setState({showPhoto:!t.state.showPhoto})},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.handlePostById()}},{key:"componentWillUnmount",value:function(){console.log("unmount")}},{key:"render",value:function(){var t=this,e=this.state.post;return Object(n.jsx)("div",{children:Object(n.jsx)(st,{dark:this.props.isDark,children:Object(n.jsxs)("div",{id:"post-details",children:[Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:e.postedBy&&e.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsx)(r.b,{to:"/profile/".concat(e.postedBy&&e.postedBy._id),children:Object(n.jsxs)("div",{className:"post-user",children:[" ",e.postedBy&&e.postedBy.firstName," ",e.postedBy&&e.postedBy.lastName,"   "]})}),Object(n.jsx)("div",{className:"date",children:this.outputDate(e.date)})]}),e.postPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"post-image",style:{width:"100px"},src:e.postPhoto&&e.postPhoto,alt:""}):null," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",e.postContent]}),Object(n.jsx)("p",{className:"like-btn",onClick:this.toggleLikes,children:"Likes"}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(n.jsx)(it.a,{fontSize:"small",color:"primary"}):Object(n.jsx)(it.a,{fontSize:"small",color:"disabled"})," ",Object(n.jsx)("div",{children:this.state.numberOfLikes})]}),Object(n.jsxs)("div",{className:"comment-icon",children:[Object(n.jsx)(ct.a,{}),Object(n.jsx)("div",{children:this.state.numberOfComments})]})]}),this.state.showPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"large-img animated zoomIn",src:e.postPhoto&&e.postPhoto,alt:""}):null]})]}),Object(n.jsxs)("section",{className:"comments",children:[e.comments&&e.comments.map((function(e){return Object(n.jsx)(_t,{outputDate:t.outputDate,getPostDetails:t.handlePostById,comment:e},e._id)})),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:"".concat(this.props.user.image),alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[" ",Object(n.jsxs)("div",{className:"post-user",children:[" ",this.props.user.firstName," ",this.props.user.lastName,"   "]})," "]})," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",this.showCommentInput()]})]})]})})]}),this.state.showLikes?Object(n.jsx)("div",{className:"likes animated zoomIn",children:e.likes&&e.likes.map((function(t){return Object(n.jsx)(r.b,{to:"/profile/".concat(t._id),children:Object(n.jsxs)(Mt,{children:[Object(n.jsx)("img",{src:"".concat(t.image),alt:"profile"}),Object(n.jsxs)("p",{className:"like-item",children:[t.firstName," ",t.lastName]},t._id)," "]})})}))}):null]})})})}}]),s}(o.Component));function zt(){var t=Object(T.a)(["\n  background-color: #f2f2f2;\nimg{\n    width:30px;\n    height:30px;\n    border-radius:50%;\n    margin:5px 10px;\n}\n  h3{\n    \n    font-size:1.2rem;\n  }\n \n  p {\n    margin-bottom:5px;\n    font-size:0.8rem;\n"]);return zt=function(){return t},t}function Et(){var t=Object(T.a)(["\n  ","\n"]);return Et=function(){return t},t}var Tt=R.b.div(Et(),(function(){return Object(R.a)(zt())})),Rt=s(91),Wt=s.n(Rt),qt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={unreadMessages:0,isOnline:!1},t.outputDate=function(t){var e=new Date(t),s=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},t.checkOnline=function(){var e=t.props.online,s=!1,n=t.props.receiverUser._id;return e.forEach((function(t){t===n&&(s=!0)})),s},t.checkNotifications=function(){var e=t.props.user._id,s=t.props.conversation;s.notifications[0]===e&&(console.log("notications",s.notifications.length,s._id),t.setState({unreadMessages:s.notifications.length}))},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.checkNotifications()}},{key:"render",value:function(){var t=this.props,e=t.conversation,s=t.messageArrLength,o=t.receiverUser;return Object(n.jsxs)("div",{className:"message-preview",children:[Object(n.jsx)("img",{src:"".concat(o&&o.image),alt:"profile"}),Object(n.jsxs)("div",{className:"message-name",children:[Object(n.jsxs)("h3",{children:[o&&o.firstName," ",o&&o.lastName," ",this.checkOnline()?Object(n.jsx)(Wt.a,{className:"online animated bounce"}):null]}),Object(n.jsxs)("div",{className:"message-info",children:[Object(n.jsxs)("div",{children:[0===this.state.unreadMessages?null:Object(n.jsx)("div",{className:"unread",children:Object(n.jsx)("p",{children:this.state.unreadMessages})}),e.messages[s]&&e.messages[s].userSent.firstName,":"," ",e.messages[s]&&e.messages[s].messageContent]}),Object(n.jsx)("p",{className:"message-date",children:this.outputDate(e.messages[s]&&e.messages[s].updated_at)})]})]})]})}}]),s}(o.Component)),Zt=g()("https://social-developer-platform.herokuapp.com"),Jt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={conversations:[],online:[]},t.getConversations=function(){ft.getConversations().then((function(e){t.setState({conversations:e.data})})).catch((function(t){console.log(t)}))},t.filterCurrentUser=function(e){return e.filter((function(e){return e._id!==t.props.user._id}))[0]},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.getConversations(),Zt.emit("join-main",{user:this.props.user._id},(function(t){t&&console.log(t)})),Zt.on("online",(function(e){var s=Object.values(e.users);t.setState({online:s})}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var t=this,e=this.state.conversations;return Object(n.jsx)(st,{dark:this.props.isDark,children:Object(n.jsxs)("div",{className:"conversation-list",children:[Object(n.jsx)("h1",{className:"subtitle is-4",children:"Conversations"}),e&&0===e.length?Object(n.jsx)("p",{className:"zero-conversation animated fadeIn",children:"You have no conversations. Search for developers to chat with!"}):e.map((function(e){var s=t.filterCurrentUser(e.users),o=e.messages.length-1;return Object(n.jsx)("div",{children:Object(n.jsx)(r.b,{to:"/conversation-details/".concat(e._id),children:Object(n.jsx)("div",{className:"conversations",children:Object(n.jsx)(Tt,{children:Object(n.jsx)(qt,{online:t.state.online,conversation:e,messageArrLength:o,receiverUser:s})})})})},e._id)}))]})})}}]),s}(o.Component));function Vt(){var t=Object(T.a)(["\nbackground-color: #f2f2f2;\nposition:sticky;\ntop:0;\ndisplay:flex;\n jusifty-content:space-evenly;\nalign-items:center; \nwidth:100%;\nz-index:6;\n\nimg{\n  width:50px;\n  height:50px;\n  border-radius:50%;\n  margin:5px 10px;\n}\nh3{\n  margin: 0 10px;\n  font-size:1.3rem;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n"]);return Vt=function(){return t},t}function Ht(){var t=Object(T.a)(["\n  ","\n"]);return Ht=function(){return t},t}var Yt=R.b.div(Ht(),(function(){return Object(R.a)(Vt())})),Gt=g()("https://social-developer-platform.herokuapp.com"),Kt=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){var t;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={conversation:{},messages:[],sendMessage:"",intervalId:"",userContact:{},newMessages:[],showDelete:!1},t.startSocket=function(){Gt.emit("join",{room:t.state.conversation._id,user:t.props.user._id},(function(t){t&&console.log(t)})),Gt.on("message",(function(e){console.log("socket called"),t.getConversation()})),Gt.on("online",(function(t){console.log("online")})),t.sendDelete()},t.seenMessage=function(){var e=t.props.match.params.conversationId;ft.messageSeen(e).then((function(t){})).catch((function(t){return console.log(t)}))},t.getConversation=function(){var e=t.props.match.params.conversationId;ft.getConversationOne(e).then((function(e){t.setState({conversation:e.data}),t.getMessages(),t.filterCurrentUser()}))},t.getConversationMount=function(){var e=t.props.match.params.conversationId;ft.getConversationOne(e).then((function(e){t.setState({conversation:e.data}),t.getMessages(),t.filterCurrentUser(),t.startSocket()}))},t.sendMessage=function(){var e=t.state.sendMessage,s=t.state.conversation._id;console.log(e);var n={conversationId:s,message:e};e&&Gt.emit("sendMessage",n,(function(){console.log("MessageSent"),t.setState({sendMessage:""})}))},t.sendDelete=function(){var e={conversationId:t.state.conversation._id,message:""};Gt.emit("sendMessage",e,(function(){t.setState({sendMessage:""})}))},t.getMessages=function(){var e=t.state.conversation.messages;e.length!==t.state.messages.length&&(t.setState({messages:e}),t.scrollToBottom())},t.handleInput=function(e){var s=e.target,n=s.name,o=s.value;t.setState(Object(E.a)({},n,o))},t.handleSubmit=function(e){e.preventDefault();var s=t.props.match.params.conversationId,n=t.state.sendMessage,o=t.state.userContact._id;console.log(o),ft.sendMessage(s,n,o).then((function(e){t.getConversation(),t.sendMessage()})).catch((function(t){return console.log(t)}))},t.filterCurrentUser=function(){var e=t.state.conversation.users.filter((function(e){return e._id!==t.props.user._id}));return t.setState({userContact:e[0]}),e[0]},t.isAdmin=function(e){return e===t.props.user._id},t.setTimerFromApiCall=function(){var e=setInterval((function(){t.getConversation()}),5e3);t.setState({intervalId:e})},t.outputDate=function(t){var e=new Date(t),s=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},t.checkSeen=function(){var e=t.state.conversation.notifications,s=t.state.conversation.messages,n=t.state.conversation.messages.length-1;return 0===e.length&&0!==s.length&&s[n].userSent._id===t.props.user._id?"Seen":null},t.deleteMessage=function(e){var s=t.props.match.params.conversationId;ft.deleteMessage(s,e).then((function(e){t.getConversation(),t.sendDelete()})).catch((function(t){console.log(t)}))},t.toggleDelete=function(){t.setState({showDelete:!t.state.showDelete})},t}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.getConversationMount(),this.seenMessage(),this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),this.seenMessage()}},{key:"render",value:function(){var t=this,e="";return this.state.showDelete&&(e="slide-message"),Object(n.jsx)("div",{className:"conversation-details",children:Object(n.jsxs)(nt,{dark:this.props.isDark,className:"isMessages",children:[Object(n.jsxs)(Yt,{children:[Object(n.jsx)("img",{src:this.state.userContact.image}),Object(n.jsxs)("h3",{children:[this.state.userContact.firstName," ",this.state.userContact.lastName]})]}),this.state.messages.map((function(s){return Object(n.jsx)("div",{children:t.isAdmin(s.userSent._id)?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{onClick:t.toggleDelete,className:"admin-message ".concat(e),children:[Object(n.jsx)("div",{children:t.outputDate(s.created_at)}),Object(n.jsxs)("p",{children:[s.userSent.firstName,": ",s.messageContent," "]})]}),t.state.showDelete?Object(n.jsx)("button",{className:"delete delete-message",onClick:function(){return t.deleteMessage(s._id)}}):null]}):Object(n.jsxs)("div",{className:"user-message",children:[Object(n.jsx)("div",{children:t.outputDate(s.created_at)}),Object(n.jsxs)("p",{children:[s.userSent.firstName,": ",s.messageContent]})]})},s._id)})),Object(n.jsx)("div",{className:"seen",children:this.state.conversation.notifications&&this.checkSeen()}),Object(n.jsx)("div",{ref:function(e){t.el=e}}),Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"send-message",children:[Object(n.jsx)("input",{className:"input is-info",value:this.state.sendMessage,name:"sendMessage",onChange:this.handleInput,required:!0}),Object(n.jsx)("button",{className:"button",type:"submit",children:"Send"})]})]})})}}]),s}(o.Component));var Qt=S((function(t){var e=t.isLoggedIn,s=t.isLoading,o=t.component,i=t.exact,a=t.path;return s?"Loading":Object(n.jsx)(p.b,{exact:i,path:a,render:function(t){return e?Object(n.jsx)(p.a,{to:"/private"}):e?void 0:Object(n.jsx)(o,Object(j.a)({},t))}})}));var Xt=S((function(t){var e=t.isLoggedIn,s=t.isLoading,o=t.component,i=t.exact,a=t.path;return s?"Loading":Object(n.jsx)(p.b,{exact:i,path:a,render:function(t){return e?e?Object(n.jsx)(o,Object(j.a)({},t)):void 0:Object(n.jsx)(p.a,{to:"/login"})}})})),$t=S(function(t){Object(h.a)(s,t);var e=Object(d.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return console.log(window.innerWidth<1023),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(st,{dark:this.props.isDark,children:[Object(n.jsxs)("div",{className:"container-side-nav",children:[Object(n.jsx)(B,{}),Object(n.jsx)("div",{className:"side-nav-pages",children:Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{exact:!0,path:"/",component:z}),Object(n.jsx)(Qt,{exact:!0,path:"/signup",component:Y}),Object(n.jsx)(Qt,{exact:!0,path:"/login",component:G}),Object(n.jsx)(Xt,{exact:!0,path:"/private",component:mt}),Object(n.jsx)(Xt,{exact:!0,path:"/search",component:gt}),Object(n.jsx)(Xt,{exact:!0,path:"/profile/:id",component:It}),Object(n.jsx)(Xt,{exact:!0,path:"/postdetails/:postId",component:Bt}),Object(n.jsx)(Xt,{exact:!0,path:"/conversations",component:Jt}),Object(n.jsx)(Xt,{exact:!0,path:"/conversation-details/:conversationId",component:Kt})]})})]}),Object(n.jsx)("div",{id:"nav-space"})]})})}}]),s}(o.Component));c.a.render(Object(n.jsx)(r.a,{children:Object(n.jsx)(y,{children:Object(n.jsx)($t,{})})}),document.getElementById("root"))},99:function(t,e,s){}},[[155,1,2]]]);
//# sourceMappingURL=main.95181928.chunk.js.map