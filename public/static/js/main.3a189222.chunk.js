(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{118:function(e,t,s){},143:function(e,t,s){},198:function(e,t,s){},199:function(e,t,s){},200:function(e,t,s){},218:function(e,t,s){},219:function(e,t,s){},220:function(e,t,s){"use strict";s.r(t);var n=s(0),o=s(1),i=s.n(o),a=s(23),c=s.n(a),r=s(9),l=s(4),u=s(6),d=s(8),h=s(7),p=(s(143),s(19)),j=s(32),m=s(24),b=s.n(m),f=s(16),g=s.n(f),O=g()("https://social-developer-platform.herokuapp.com"),v=new(function(){function e(){Object(l.a)(this,e),this.auth=b.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})}return Object(u.a)(e,[{key:"signup",value:function(e,t,s,n,o){return console.log(e,t,s,n,o),this.auth.post("/auth/signup",{firstName:e,lastName:t,image:s,email:n,password:o}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.auth.post("/auth/login",{email:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return O.emit("logout"),this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),x=new function e(){var t=this;Object(l.a)(this,e),this.getAll=function(){return t.api.get("/api/users")},this.getOne=function(e){return t.api.get("/api/users/".concat(e))},this.follow=function(e){return t.api.put("/api/users/".concat(e,"/follow"))},this.unfollow=function(e){return t.api.put("/api/users/".concat(e,"/unfollow"))},this.deleteNotification=function(e){return t.api.put("/api/users/notifications/".concat(e))},this.seenNotification=function(){return t.api.get("/api/users/notifications/seen")},this.editPhoto=function(e){return console.log(e),t.api.post("/api/users/edit",{image:e})},this.darkView=function(e){return t.api.post("/api/users/dark-mode",{darkMode:e})},this.api=b.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})},k=i.a.createContext(),N=k.Consumer,w=k.Provider,S=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isLoggedIn:!1,isLoading:!0,user:null,isDark:!1,isNewUser:!1},e.signup=function(t,s,n,o,i){v.signup(t,s,n,o,i).then((function(t){return e.setState({isLoggedIn:!0,user:t,isNewUser:!0})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.login=function(t,s){return v.login(t,s).then((function(t){console.log("error"),e.setState({isLoggedIn:!0,user:t})})).catch((function(t){console.log("error"),e.setState({isLoggedIn:!1,user:null})})),"Username or password not correct"},e.logout=function(){v.logout().then((function(){return e.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},e.me=function(){console.log("me called"),v.me().then((function(t){e.setState({user:t})})).catch((function(e){console.log(e)}))},e.toggleTheme=function(){var t="";t=e.state.isDark?"light":"dark",x.darkView(t).then((function(t){console.log(t),e.setState({isDark:!e.state.isDark})})).catch((function(e){console.log(e)}))},e.closeNewUser=function(){e.setState({isNewUser:!1})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;v.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1,isDark:t.darkMode})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isDark,s=e.isLoggedIn,o=e.isLoading,i=e.user,a=e.isNewUser,c=this.toggleTheme,r=this.signup,l=this.login,u=this.logout,d=this.me,h=this.closeNewUser;return o?Object(n.jsx)("p",{children:"Loading"}):Object(n.jsx)(w,{value:{isDark:t,isLoggedIn:s,isLoading:o,user:i,isNewUser:a,signup:r,login:l,logout:u,me:d,toggleTheme:c,closeNewUser:h},children:this.props.children})}}]),s}(i.a.Component),y=function(e){return function(t){Object(d.a)(o,t);var s=Object(h.a)(o);function o(){return Object(l.a)(this,o),s.apply(this,arguments)}return Object(u.a)(o,[{key:"render",value:function(){var t=this;return Object(n.jsx)(N,{children:function(s){var o=s.isLoggedIn,i=s.isDark,a=s.isLoading,c=s.user,r=s.isNewUser,l=s.signup,u=s.login,d=s.logout,h=s.me,p=s.toggleTheme,m=s.closeNewUser;return Object(n.jsx)(e,Object(j.a)(Object(j.a)({},t.props),{},{isDark:i,isLoggedIn:o,isLoading:a,user:c,isNewUser:r,signup:l,login:u,logout:d,me:h,toggleTheme:p,closeNewUser:m}))}})}}]),o}(i.a.Component)},C=s(75),_=s.n(C),I=s(74),L=s.n(I),P=s(73),D=s.n(P),M=s(71),F=s.n(M),U=s(251),A=(s(36),g()("https://social-developer-platform.herokuapp.com")),B=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={newMessages:0,newNotification:0},e.startSocket=function(){e.props.user.conversations.forEach((function(t){A.emit("join",{room:t._id,user:e.props.user._id},(function(e){e&&console.log(e)})),A.on("message",(function(e){}))})),A.on("notification",(function(t){var s=t.userId.userId,n=t.userId.userLiked;if(console.log(n),s===e.props.user._id&&n!==e.props.user._id){var o=e.state.newNotification;o++,e.setState({newNotification:o})}}))},e.getMessageNotification=function(){var t=e.props.user.conversations;if(0===t.length)return 0;var s=e.state.newMessages/t.length;return console.log(s),s},e.getMessageUnread=function(){x.getOne(e.props.user._id).then((function(t){var s=t.data.user.conversations.reduce((function(e,t){return e+t.notifications.length}),0);e.setState({newMessages:s})}))},e.setMessagesZero=function(){e.setState({newMessages:0})},e.setNotificationsZero=function(){e.setState({newNotification:0})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.user&&(this.startSocket(),this.getMessageUnread())}},{key:"render",value:function(){return Object(n.jsx)("nav",{className:"navbar",children:this.props.isLoggedIn?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(r.c,{className:"btn ",activeClassName:"nav-link",to:"/private",children:Object(n.jsx)(F.a,{})}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/search",children:Object(n.jsx)(D.a,{})}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/profile/".concat(this.props.user._id),onClick:this.setNotificationsZero,children:Object(n.jsx)(U.a,{badgeContent:this.state.newNotification,color:"primary",max:10,children:Object(n.jsx)(L.a,{})})}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/conversations",onClick:this.setMessagesZero,children:Object(n.jsx)(U.a,{color:"primary",max:10,children:Object(n.jsx)(_.a,{})})})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/",children:"Home"}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/login",children:"Login"}),Object(n.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/signup",children:"Sign Up"})]})})}}]),s}(o.Component));var z=function(){return Object(n.jsxs)("div",{id:"home",children:[Object(n.jsx)("img",{src:"/logo.png",alt:"logo"}),Object(n.jsx)("section",{children:Object(n.jsx)("p",{children:"Love Code? Share your thoughts, explore new ideas and find others like you!"})})]})},T=s(18),E=s(12),W=s(13);function q(){var e=Object(E.a)(["\n    width:100%;\n  background-color: #f2f2f2;\n  height: auto;\n  padding-bottom:200px;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:10px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px auto;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  div{\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n  }\n  input {\n    margin: 5px auto;\n    width:70%;\n"]);return q=function(){return e},e}function R(){var e=Object(E.a)(["\n  ","\n"]);return R=function(){return e},e}function Y(){var e=Object(E.a)(["\n    width:100%;\n  background-color: #f2f2f2;\n  height: 100%;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:20px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px 0;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  input {\n    margin: 20px auto;\n    width:70%;\n"]);return Y=function(){return e},e}function J(){var e=Object(E.a)(["\n  ","\n"]);return J=function(){return e},e}var V=W.b.div(J(),(function(){return Object(W.a)(Y())})),Z=W.b.div(R(),(function(){return Object(W.a)(q())})),H=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={firstName:"",lastName:"",image:"",email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var s=e.state,n=s.firstName,o=s.lastName,i=s.image,a=s.email,c=s.password;e.props.signup(n,o,i,a,c)},e.handleChange=function(t){var s=t.target,n=s.name,o=s.value;e.setState(Object(T.a)({},n,o))},e.handleFileUpload=function(t){console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],n=new FormData;n.append("image",s),b.a.post("".concat("https://social-developer-platform.herokuapp.com","/auth/upload"),n,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({image:t.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(u.a)(s,[{key:"render",value:function(){var e=this.state,t=e.firstName,s=e.lastName,o=e.image,i=e.email,a=e.password;return Object(n.jsxs)(Z,{children:[Object(n.jsx)("h1",{children:"Sign Up"}),Object(n.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(n.jsx)("label",{children:"Profile Pic"}),Object(n.jsx)("input",{className:"input is-primary",name:"image",type:"file",onChange:this.handleFileUpload}),Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:o&&o,alt:""})}),Object(n.jsx)("label",{children:"First Name:"}),Object(n.jsx)("input",{className:"input is-primary",type:"text",name:"firstName",value:t,onChange:this.handleChange,required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{children:"Last Name:"}),Object(n.jsx)("input",{className:"input is-primary",type:"text",name:"lastName",value:s,onChange:this.handleChange,required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{children:"Email:"}),Object(n.jsx)("input",{className:"input is-primary",type:"text",name:"email",value:i,onChange:this.handleChange,required:!0}),Object(n.jsx)("br",{}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{className:"input is-primary",type:"password",name:"password",value:a,onChange:this.handleChange,required:!0}),Object(n.jsxs)("button",{className:"button is-primary is-white",type:"submit",children:[" ","Signup"," "]})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:"Already have account?"}),Object(n.jsx)("button",{className:"signup-btn button is-link is-light",children:Object(n.jsx)(r.b,{to:"/login",children:" Login"})})]})]})}}]),s}(o.Component)),G=(s(51),y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={email:"",password:"",errorMessage:!1},e.handleFormSubmit=function(t){t.preventDefault();var s=e.state,n=s.email,o=s.password;e.props.login(n,o);e.setState({errorMessage:!0})},e.handleChange=function(t){var s=t.target,n=s.name,o=s.value;e.setState(Object(T.a)({},n,o))},e}return Object(u.a)(s,[{key:"render",value:function(){var e=this.state,t=e.email,s=e.password;return console.log(),Object(n.jsxs)(V,{children:[Object(n.jsx)("h1",{children:"Login"}),Object(n.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(n.jsx)("label",{children:"Email:"}),Object(n.jsx)("input",{class:"input is-primary",type:"text",name:"email",value:t,onChange:this.handleChange,required:!0}),Object(n.jsx)("label",{children:"Password:"}),Object(n.jsx)("input",{class:"input is-primary",type:"password",name:"password",value:s,onChange:this.handleChange,required:!0}),Object(n.jsx)("button",{className:"button is-primary is-white",type:"submit",children:"Login"})]}),this.state.errorMessage?Object(n.jsx)("div",{className:"login-error animated fadeIn",children:"Email or password is incorrect"}):null]})}}]),s}(o.Component))),K=s(22),Q=new function e(){var t=this;Object(l.a)(this,e),this.getAllPostsByFollowedUsers=function(){return t.api.get("/api/posts")},this.getById=function(e){return t.api.get("/api/posts/".concat(e))},this.createPost=function(e,s,n,o){return console.log(e,s,n,o),t.api.post("/api/posts",{postedBy:e,postContent:s,postPhoto:n,code:o})},this.likePost=function(e){return t.api.put("/api/posts/".concat(e,"/likes"))},this.unlikePost=function(e){return t.api.put("/api/posts/".concat(e,"/unlikes"))},this.comment=function(e,s){return t.api.post("/api/posts/".concat(e,"/comment"),{commentContent:s})},this.delete=function(e){return t.api.delete("/api/posts/".concat(e,"/delete"))},this.deleteComment=function(e,s){return t.api.delete("/api/posts/".concat(e,"/comment/").concat(s))},this.api=b.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})};function X(){var e=Object(E.a)(["\n    width:100%;\n    background-color:rgb(29, 41, 53);\n  height:auto;\n  \n  h1 {\n    color: palevioletred;\n  }\n  .post-main{\n    background-color:rgb(80, 80, 80);\n    color: white;\n  } \n  .admin-message p{\n    color:white;\n  }\n  p {\n    color: palevioletred;\n"]);return X=function(){return e},e}function $(){var e=Object(E.a)(["\n  ","\n"]);return $=function(){return e},e}function ee(){var e=Object(E.a)(["\n    width:100%;\n  background-color: rgb(0, 0, 0) ;\n  ","\n  height:100%;\n  \n  h1 {\n    color: palevioletred;\n  }\n  div.post-main{\n    background-color:rgb(29, 41, 53);\n    color: white;\n  }\n  div.message-preview{\n    background-color:rgb(29, 41, 53);\n\n  }\n  div.notifications-menu{\n    background-color:rgb(29, 41, 53);\n\n  }\n  div#nav-space{\n    background-color: rgb(0, 0, 0) ;\n\n  }\n  nav.navbar{\n    background-color: rgb(0, 0, 0) ;\n\n  }\n  button.button{\n    background-color:rgb(29, 41, 53);\n    color:white;\n\n  }\n\n  input {\n    background-color: rgb(0, 0, 0) ;\n    color:white;\n  }\n\n  textarea{\n    background-color: rgb(0, 0, 0) ;\n    color:white;\n  }\n  div{\n    color:white;\n  }\n  p {\n    color: white;\n"]);return ee=function(){return e},e}function te(){var e=Object(E.a)(["\n  ","\n"]);return te=function(){return e},e}var se=W.b.div(te(),(function(e){return e.dark&&Object(W.a)(ee(),"")})),ne=W.b.div($(),(function(e){return e.dark&&Object(W.a)(X())})),oe=s(34),ie=s.n(oe),ae=s(45),ce=s.n(ae),re=(s(118),g()("https://social-developer-platform.herokuapp.com")),le=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={isliked:!1,numberOfLikes:0,numberOfComments:0,showPhoto:!1,highlightedContent:[]},e.countNumberOfLikes=function(){var t=e.props.post.likes.length;e.setState({numberOfLikes:t})},e.countNumberOfComments=function(){var t=e.props.post.comments.length;e.setState({numberOfComments:t})},e.socketLike=function(){re.emit("notification",{userId:e.props.post.postedBy._id,userLiked:e.props.user._id},(function(){console.log("socket called")}))},e.handleLike=function(){e.state.isLiked||Q.likePost(e.props.post._id).then((function(t){var s=e.state.numberOfLikes;s++,e.setState({numberOfLikes:s}),e.socketLike()})).catch((function(e){console.log(e)})),e.state.isLiked&&Q.unlikePost(e.props.post._id).then((function(t){var s=e.state.numberOfLikes;s--,e.setState({numberOfLikes:s})})).catch((function(e){console.log(e)})),e.setState({isLiked:!e.state.isLiked})},e.outputDate=function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},e.toggleShowPicture=function(){e.setState({showPhoto:!e.state.showPhoto})},e.highlightSearchInput=function(){if(e.props.searchWord){var t=e.props.post.postContent.split(" "),s=e.props.searchWord.toLowerCase(),o=s.toUpperCase(),i=t.map((function(e){return e.toLowerCase().includes(s)||e.includes(o)?Object(n.jsx)("strong",{children:e}):e}));e.setState({highlightedContent:i})}},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=!1;this.props.post&&this.props.post.likes.forEach((function(s){s===e.props.user._id&&(t=!0)})),this.setState({isLiked:t}),this.countNumberOfLikes(),this.countNumberOfComments(),this.highlightSearchInput()}},{key:"render",value:function(){var e=this.props.post;return Object(n.jsx)("div",{children:Object(n.jsx)(se,{dark:this.props.isDark,children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:e.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)("div",{className:"post-user",children:[" ",e.postedBy&&e.postedBy.firstName," ",e.postedBy&&e.postedBy.lastName,"   "]}),Object(n.jsx)("div",{className:"date",children:this.outputDate(e.date)})]}),e.postPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"post-image",style:{width:"100px"},src:e.postPhoto&&e.postPhoto,alt:""}):null,Object(n.jsxs)(r.b,{to:"/postdetails/".concat(e._id),children:[" ",Object(n.jsx)("div",{className:"post-content",children:this.state.highlightedContent.map((function(e,t){return Object(n.jsxs)("span",{children:[e," "]},t)}))})]}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(n.jsx)(ie.a,{fontSize:"small",color:"primary"}):Object(n.jsx)(ie.a,{fontSize:"small"})," ",Object(n.jsx)("div",{children:this.state.numberOfLikes})]}),Object(n.jsxs)("div",{className:"comment-icon",children:[Object(n.jsx)(ce.a,{}),Object(n.jsx)("div",{children:this.state.numberOfComments})]})]}),this.state.showPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"large-img animated zoomIn",src:e.postPhoto&&e.postPhoto,alt:""}):null]})]})})})}}]),s}(o.Component));function ue(){var e=Object(E.a)(["\n  background: transparent;\n  border-radius: 3px;\n  color: palevioletred;\n  margin: 0 1em;\n\n  animation: "," 1s linear;\n"]);return ue=function(){return e},e}function de(){var e=Object(E.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return de=function(){return e},e}var he=Object(W.c)(de()),pe=(W.b.div(ue(),he),g()("https://social-developer-platform.herokuapp.com")),je=(y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={users:[],posts:[],post:"",postPhoto:"",newPosts:[]},e.handlePostsFollowedApi=function(){Q.getAllPostsByFollowedUsers().then((function(t){e.setState({users:t.data}),e.orderPosts()})).catch((function(t){return e.setState({users:[]})}))},e.orderPosts=function(){var t=[].concat(Object(K.a)(e.state.newPosts),Object(K.a)(e.props.user.posts));e.state.users.forEach((function(e){t.push.apply(t,Object(K.a)(e.posts))})),t.sort((function(e,t){return e.date>t.date?-1:e.date>t.date?1:0})),e.setState({posts:t})},e.handleInput=function(t){var s=t.target,n=s.name,o=s.value;e.setState(Object(T.a)({},n,o))},e.handleFileUpload=function(t){console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],n=new FormData;n.append("image",s),b.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),n,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({postPhoto:t.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e.postWithSocket=function(){pe.emit("post",{},(function(){}))},e.handleSubmit=function(t){t.preventDefault(),e.postWithSocket(),Q.createPost(e.props.user._id,e.state.post,e.state.postPhoto).then((function(t){console.log(t);var s=Object(K.a)(e.state.newPosts);s.push(t.data),e.setState({postPhoto:"",post:"",newPosts:s}),e.handlePostsFollowedApi()})).catch((function(e){console.log(e)}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),this.handlePostsFollowedApi(),pe.emit("join-main",{user:this.props.user._id},(function(e){e&&console.log(e)})),pe.on("postIncoming",(function(){console.log("new post"),e.handlePostsFollowedApi()}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return Object(n.jsx)("div",{className:"dashboard",children:Object(n.jsxs)(se,{dark:this.props.isDark,children:[Object(n.jsxs)("div",{className:"dashboard-header",children:[Object(n.jsx)("img",{src:this.props.user.image,alt:"user profile"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h2",{children:["Welcome ",this.props.user&&this.props.user.firstName]}),Object(n.jsx)("p",{children:"See New Posts Here!"})]})]}),Object(n.jsxs)("form",{className:"post-form",onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:this.props.user.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsx)("div",{className:"post-user-info",children:Object(n.jsxs)("div",{className:"post-user",children:[" ",this.props.user&&this.props.user.firstName," ",this.props.user&&this.props.user.lastName,"   "]})}),Object(n.jsx)("textarea",{className:"post",name:"post",value:this.state.post,onChange:this.handleInput,placeholder:"Share your code...",required:!0}),Object(n.jsxs)("div",{className:"post-actions",children:[Object(n.jsx)("input",{name:"postPhoto",type:"file",onChange:this.handleFileUpload}),Object(n.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Post"})," "]})]})]}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})})]}),this.state.posts.map((function(e){return Object(n.jsx)(le,{post:e},e._id)}))]})})}}]),s}(o.Component)),s(5)),me=s(11),be=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isAdmin:!1},e.handleIsAdmin=function(){e.props.comment.createdBy._id===e.props.user._id?e.setState({isAdmin:!0}):e.setState({isAdmin:!1})},e.deleteComment=function(){var t=e.props.comment.post,s=e.props.comment._id;Q.deleteComment(t,s).then((function(t){console.log("clicked"),console.log(t),e.props.getPostDetails()})).catch((function(e){console.log(e)}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.handleIsAdmin()}},{key:"render",value:function(){var e=this.props.comment;return Object(n.jsxs)("div",{className:"comment-main post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:"".concat(e.createdBy.image),alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)(r.b,{to:"/profile/".concat(e.createdBy._id),children:[" ",Object(n.jsxs)("div",{className:"post-user",children:[" ",e.createdBy.firstName," ",e.createdBy.lastName,"   "]})," "]}),Object(n.jsx)("div",{className:"date"}),this.state.isAdmin?Object(n.jsx)("p",{onClick:this.deleteComment,href:"#",className:"delete-icon delete"}):null]})," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",e.commentContent]})]})]})}}]),s}(o.Component));g()("https://social-developer-platform.herokuapp.com");var fe=y((function(e){var t=Object(o.useState)(""),s=Object(je.a)(t,2),i=s[0],a=s[1],c=Object(o.useState)([]),r=Object(je.a)(c,2),l=r[0],u=r[1],d=function(e){var t=e.target.value;a(t)};Object(o.useEffect)((function(){h()}),[]);var h=function(){Q.getById(e.postId).then((function(e){console.log(e.data),u(e.data.comments)})).catch((function(e){return console.log(e)}))},p=function(t){t.preventDefault(),Q.comment(e.postId,i).then((function(t){console.log(t.data),h(),a(""),e.socketComment()}))};return Object(n.jsxs)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[l.map((function(e){return Object(n.jsx)(be,{comment:e,getPostDetails:h})})),Object(n.jsxs)("div",{className:"comment-main post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:"".concat(e.user.image),alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[" ",Object(n.jsxs)("div",{className:"post-user",children:[" ",e.user.firstName," ",e.user.lastName,"   "]})," "]})," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",Object(n.jsxs)("form",{onSubmit:p,className:"post-comment",children:[Object(n.jsx)("input",{name:"commentInput",value:i,onChange:d,autoComplete:"off",placeholder:"Write your comment here...",required:!0}),Object(n.jsx)("button",{id:"comment-btn",className:"button is-white s-size-7",type:"submit",children:"Comment"})]})]})]})]})]})})),ge=new function e(){var t=this;Object(l.a)(this,e),this.createConversation=function(e){return t.api.post("/api/conversations/".concat(e))},this.getConversations=function(){return t.api.get("/api/conversations")},this.getConversationOne=function(e){return t.api.get("/api/conversations/".concat(e))},this.sendMessage=function(e,s,n){return t.api.post("/api/conversations/".concat(e,"/message"),{messageContent:s,userSentToId:n})},this.messageSeen=function(e){return t.api.get("/api/conversations/".concat(e,"/message-seen"))},this.deleteMessage=function(e,s){return t.api.delete("/api/conversations/".concat(e,"/message/").concat(s))},this.api=b.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})},Oe=(s(198),y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isFollowing:!1,hasConversation:!1,conversationId:"",user:{},isCurrentUser:!1},e.handleIsCurrentUser=function(){var t=e.props.userSearch,s=e.props.user;console.log(typeof t._id,typeof s._id),t._id===s._id&&e.setState({isCurrentUser:!0})},e.checkFollow=function(){var t=e.props.user.following;console.log(t);var s=e.props.userSearch._id,n=!1;t.forEach((function(e){e===s&&(n=!0)})),e.setState({isFollowing:n})},e.checkConversation=function(){var t=e.props.user.conversations;console.log(t);var s=e.props.userSearch._id,n=!1;0!==t.length?(t.forEach((function(t){t.users.includes(s)&&(n=!0,e.setState({conversationId:t._id}))})),e.setState({hasConversation:n})):e.setState({hasConversation:n})},e.handleFollow=function(){x.follow(e.props.userSearch._id).then((function(t){console.log(t),e.setState({isFollowing:!0})}))},e.handleUnfollow=function(){x.unfollow(e.props.userSearch._id).then((function(t){console.log(t),e.setState({isFollowing:!1})}))},e.createConversation=function(){var t=e.props.userSearch._id;ge.createConversation(t).then((function(t){console.log(t);var s=t.data;e.setState({hasConversation:!0,conversationId:s})}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.checkFollow(),this.checkConversation(),this.handleIsCurrentUser()}},{key:"render",value:function(){var e=this.props.userSearch;return Object(n.jsxs)("tr",{className:"profile-link",children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:e.image,alt:"user profile"})}),Object(n.jsx)("td",{children:Object(n.jsxs)(r.b,{className:"search-name",to:"/profile/".concat(e._id),children:[Object(n.jsxs)("p",{children:[e&&e.firstName," "]}),Object(n.jsx)("p",{children:e&&e.lastName})]})}),Object(n.jsx)("td",{className:"following-column",children:this.state.isCurrentUser?null:this.state.isFollowing?Object(n.jsx)("button",{className:"button is-white is-light is-size-7",onClick:this.handleUnfollow,children:"Unfollow"}):Object(n.jsx)("button",{className:"button is-success is-light is-size-7",onClick:this.handleFollow,children:"Follow"})}),Object(n.jsx)("td",{children:this.state.isCurrentUser?null:this.state.hasConversation?Object(n.jsx)(r.b,{className:"button is-success is-light is-size-7",to:"/conversation-details/".concat(this.state.conversationId),children:"Go to chat"}):Object(n.jsx)("button",{className:"button is-white is-light is-size-7",onClick:this.createConversation,children:"Start Chat"})})]})}}]),s}(o.Component)));s(199);var ve=function(e){return Object(n.jsx)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(n.jsx)("div",{onClick:e.toggleShowLikes,className:"popup-likes-background",children:Object(n.jsx)("div",{className:"popup-likes",children:e.likes.map((function(e){return Object(n.jsx)(r.b,{to:"/profile/".concat(e._id),children:Object(n.jsx)("div",{className:"like-list",children:Object(n.jsx)(Oe,{userSearch:e})})})}))})})})},xe=g()("https://social-developer-platform.herokuapp.com"),ke=y((function(e){var t=Object(o.useState)(!1),s=Object(je.a)(t,2),i=s[0],a=s[1],c=Object(o.useState)(0),r=Object(je.a)(c,2),l=r[0],u=r[1],d=Object(o.useState)(0),h=Object(je.a)(d,2),p=h[0],j=h[1],m=Object(o.useState)(!1),b=Object(je.a)(m,2),f=b[0],g=b[1],O=Object(o.useState)([]),v=Object(je.a)(O,2),x=v[0],k=v[1],N=Object(o.useState)(!1),w=Object(je.a)(N,2),S=w[0],y=w[1],C=Object(o.useState)(!1),_=Object(je.a)(C,2),I=_[0],L=_[1];Object(o.useEffect)((function(){var t=!1;e.post&&e.post.likes.forEach((function(s){s===e.user._id&&(t=!0)})),a(t),function(){var t=e.post.likes.length;u(t)}(),function(){var t=e.post.comments.length;j(t)}(),D()}),[]);var P=function(){g(!f)},D=function(){var t=e.post.postContent.split(" ").map((function(e){return e.startsWith("http")||e.startsWith("https")?Object(n.jsx)("a",{href:e,children:e}):e}));k(t)},M=e.post;return Object(n.jsx)("div",{children:Object(n.jsx)(se,{dark:e.isDark,children:Object(n.jsxs)("div",{className:"post-main-page",children:[Object(n.jsx)(me.c.li,{layout:!0,initial:{borderRadius:10},children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:M.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)("div",{className:"post-user",children:[" ",M.postedBy&&M.postedBy.firstName," ",M.postedBy&&M.postedBy.lastName,"   "]}),Object(n.jsx)("div",{className:"date",children:function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s}(M.date)})]}),M.postPhoto?f?null:Object(n.jsx)("img",{onClick:P,className:"post-image",style:{width:"100px"},src:M.postPhoto&&M.postPhoto,alt:""}):null,f?Object(n.jsx)("img",{onClick:P,className:"large-img animated zoomIn",src:M.postPhoto&&M.postPhoto,alt:""}):null," ",Object(n.jsx)("div",{className:"post-content",children:x.map((function(e,t){return Object(n.jsxs)("span",{children:[e," "]},t)}))}),M.code&&Object(n.jsx)("code",{children:Object(n.jsx)("pre",{children:M.code})}),M.likes[0]&&Object(n.jsx)("div",{children:Object(n.jsxs)("p",{onClick:function(){y(!S)},className:"like-preview",children:[Object(n.jsx)("img",{src:M.likes[0].image}),M.likes[0].firstName," ",M.likes[0].lastName," ",1!==M.likes.length?"and others":null," liked this post"]})}),Object(n.jsx)(me.a,{children:S&&Object(n.jsx)(ve,{likes:M.likes,toggleShowLikes:function(){y(!S)}})}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:function(){i||Q.likePost(e.post._id).then((function(t){console.log(t);var s=l;s++,u(s),console.log("sockey run"),xe.emit("notification",{userId:e.post.postedBy._id,userLiked:e.user._id},(function(){console.log("socket called")}))})).catch((function(e){console.log(e)})),i&&Q.unlikePost(e.post._id).then((function(e){var t=l;t--,console.log(t),u(t)})).catch((function(e){console.log(e)})),a(!i)},children:[i?Object(n.jsx)(ie.a,{fontSize:"small",color:"primary",className:"like-btn-animate"}):Object(n.jsx)(ie.a,{fontSize:"small"})," ",Object(n.jsx)("div",{children:l})]}),Object(n.jsxs)("div",{onClick:function(){L(!I)},className:"comment-icon",children:[Object(n.jsx)(ce.a,{}),Object(n.jsx)("div",{children:p})]})]})]})]})}),Object(n.jsx)(me.a,{children:I&&Object(n.jsx)(fe,{comments:M.comments,postId:M._id,socketComment:function(){console.log("sockey run"),xe.emit("notification",{userId:e.post.postedBy._id,userLiked:e.user._id},(function(){console.log("socket called")}))}})})]})})})})),Ne=s(253),we=(s(255),s(259),s(254)),Se=(s(262),s(263),s(260),s(252));Object(Se.a)((function(e){return{root:{display:"flex"},paper:{zIndex:1,marginRight:e.spacing(2)}}}));var ye=s(126),Ce=s.n(ye),_e=s(88),Ie=s.n(_e),Le=s(89),Pe=s.n(Le),De=(s(200),y((function(e){var t,s=Object(o.useState)(!1),i=Object(je.a)(s,2),a=i[0],c=i[1],r=Object(o.useReducer)((function(e,t){return Object(j.a)(Object(j.a)({},e),t)}),{post:"",postPhoto:"",code:""}),l=Object(je.a)(r,2),u=l[0],d=l[1],h=Object(o.useState)(!1),p=Object(je.a)(h,2),m=p[0],f=p[1],g=function(e){console.log("The file to be uploaded is: ",e.target.files);var t=e.target.files[0],s=new FormData;s.append("image",t),b.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),s,{withCredentials:!0}).then((function(e){console.log("response is: ",e),d({postPhoto:e.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},O=function(e){var t=e.target,s=t.name,n=t.value;d(Object(T.a)({},s,n))},v=function(){c(!a)},x=function(){f(!m)};return Object(n.jsx)(me.b,{children:Object(n.jsx)(me.c.div,{layout:!0,initial:{borderRadius:25},children:Object(n.jsx)("form",{className:"post-form",onSubmit:function(t){t.preventDefault(),Q.createPost(e.user._id,u.post,u.postPhoto,u.code).then((function(t){console.log(t),d({postPhoto:"",post:"",code:""}),e.handleComponentSubmit(t)})).catch((function(e){console.log(e)}))},children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:e.user.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsx)("div",{className:"post-user-info",children:Object(n.jsxs)("div",{className:"post-user",children:[" ",e.user&&e.user.firstName," ",e.user&&e.user.lastName,"   "]})}),""===u.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{className:"large-img animated zoomIn",src:u.postPhoto&&u.postPhoto,alt:""})}),Object(n.jsx)("textarea",{className:"post",name:"post",value:u.post,onChange:O,placeholder:"Share your thoughts........",required:!0}),Object(n.jsx)(me.a,{children:a&&Object(n.jsx)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(n.jsx)("textarea",(t={className:"post",name:"code"},Object(T.a)(t,"className","code-input"),Object(T.a)(t,"value",u.code),Object(T.a)(t,"onChange",O),Object(T.a)(t,"placeholder","Share your code..."),t))})}),Object(n.jsxs)("div",{className:"post-actions-input",children:[Object(n.jsxs)("div",{className:"photo-code-buttons-moblie",children:[Object(n.jsx)(Ce.a,{onClick:x}),Object(n.jsx)(me.a,{children:m&&Object(n.jsxs)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[" ",Object(n.jsxs)("div",{className:"moble-photo-upload",children:[Object(n.jsxs)("div",{className:"moble-photo-upload",children:[Object(n.jsx)("div",{className:"photo-upload",children:Object(n.jsx)(Ie.a,{})}),Object(n.jsx)("input",{name:"postPhoto",type:"file",placeholder:"Upload photo",onChange:g})]}),Object(n.jsx)("div",{onClick:function(){v(),x()},className:"photo-upload",children:Object(n.jsx)(Pe.a,{})})]})]})}),Object(n.jsx)("button",{className:"button s-size-7",type:"submit",children:"Post"})," "]}),Object(n.jsxs)("div",{className:"photo-code-buttons",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"photo-upload",children:Object(n.jsx)(Ie.a,{})}),Object(n.jsx)("input",{name:"postPhoto",type:"file",onChange:g}),Object(n.jsx)("div",{onClick:v,className:"photo-upload",children:Object(n.jsx)(Pe.a,{})})]}),Object(n.jsx)("button",{className:"button s-size-7",type:"submit",children:"Post"})," "]})]})]})]})})})})})));function Me(){var e=Object(E.a)(["\n      border-radius: 10px;\n      margin-top: 200px;\n      border: 1px solid #3b945e;\n      padding: 30px;\n      background-color: white;\n      width: 60%;\n      height: 250px;\n      overflow: auto;\n    "]);return Me=function(){return e},e}function Fe(){var e=Object(E.a)(["\n  ","\n\n  h1 {\n    font-size: 1.8rem;\n    text-align: center;\n    margin-bottom: 10px;\n  }\n\n  h3 {\n    font-size: 1.4rem;\n  }\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(E.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n  background-color: rgb(0, 0, 0);\n  padding: 30px 0;\n\n  background-color: rgb(0, 0, 0, 0.4);\n"]);return Ue=function(){return e},e}var Ae=W.b.div(Ue()),Be=(W.b.div(Fe(),(function(){return Object(W.a)(Me())})),s(128)),ze=s.n(Be),Te=s(77),Ee=s(261),We=s(257),qe=s(90),Re=s.n(qe),Ye=s(91),Je=s.n(Ye),Ve=s(258),Ze=s(127),He=s.n(Ze),Ge=s(256),Ke=[{title:"Welcome to Social Developers",step:"Click on the home page to see posts from others who have followed",icon:Object(n.jsx)(F.a,{})},{title:"Search",step:"Search to find other developers",icon:Object(n.jsx)(D.a,{})},{title:"Your Profile",step:"Find your posts, likes and following on your profile page ",icon:Object(n.jsx)(L.a,{})},{title:"Instant Messaging",step:"Instant Message other users and see who is online. To start a conversation search for the developer first",icon:Object(n.jsx)(_.a,{})}],Qe=Object(Se.a)((function(e){return{root:{height:400,width:"90%",flexGrow:1,border:0},header:{display:"flex",alignItems:"center",height:70,paddingTop:7,borderRadius:"10px 10px 0 0 ",background:"#57ba98",paddingLeft:e.spacing(4),color:"white"},content:{display:"flex",flexDirection:"column",paddingTop:20,height:110,paddingLeft:e.spacing(4)},buttons:{borderRadius:"0 0 10px 10px ",background:"#57ba98",color:"white"},btn:{color:"white"},"@media (min-width: 1024px)":{root:{width:"50%"}}}}));var Xe=y((function(e){var t=Qe(),s=Object(Te.a)(),o=(Object(Ge.a)("(min-width:1023px)"),i.a.useState(0)),a=Object(je.a)(o,2),c=a[0],r=a[1],l=Ke.length;return Object(n.jsx)(Ae,{children:Object(n.jsxs)("div",{className:t.root,children:[Object(n.jsxs)(we.a,{square:!0,elevation:0,className:t.header,children:[Object(n.jsx)(We.a,{style:{margin:"0 10px"},children:Ke[c].icon}),Object(n.jsx)(We.a,{children:Ke[c].title}),Object(n.jsx)(ze.a,{onClick:e.closeNewUser})]}),Object(n.jsx)(Ve.a,{variant:"middle"}),Object(n.jsx)(He.a,{axis:"rtl"===s.direction?"x-reverse":"x",index:c,onChangeIndex:function(e){r(e)},enableMouseEvents:!0,children:Ke.map((function(e,s){return Object(n.jsx)("div",{children:Math.abs(c-s)<=2?Object(n.jsx)(we.a,{square:!0,elevation:0,className:t.content,children:Object(n.jsx)("p",{children:Ke[c].step})}):null},e.label)}))}),Object(n.jsx)(Ee.a,{steps:l,position:"static",variant:"text",className:t.buttons,activeStep:c,nextButton:Object(n.jsxs)(Ne.a,{className:t.btn,size:"small",onClick:function(){r((function(e){return e+1}))},disabled:c===l-1,children:["Next","rtl"===s.direction?Object(n.jsx)(Re.a,{}):Object(n.jsx)(Je.a,{})]}),backButton:Object(n.jsxs)(Ne.a,{className:t.btn,size:"small",onClick:function(){r((function(e){return e-1}))},disabled:0===c,children:["rtl"===s.direction?Object(n.jsx)(Je.a,{}):Object(n.jsx)(Re.a,{}),"Back"]})})]})})})),$e=g()("https://social-developer-platform.herokuapp.com"),et=y((function(e){var t=Object(o.useState)([]),s=Object(je.a)(t,2),i=s[0],a=s[1],c=Object(o.useState)([]),r=Object(je.a)(c,2),l=r[0],u=r[1],d=Object(o.useState)([]),h=Object(je.a)(d,2),p=h[0],j=h[1];Object(o.useEffect)((function(){window.scrollTo(0,0),m(),$e.emit("join-main",{user:e.user._id},(function(e){e&&console.log(e)})),$e.on("postIncoming",(function(){console.log("new post"),m()}))}),[]);var m=function(){Q.getAllPostsByFollowedUsers().then((function(e){a(e.data)})).catch((function(e){return a([])}))};Object(o.useEffect)((function(){b()}),[i]);var b=function(){console.log(e.user.posts);var t=[].concat(Object(K.a)(p),Object(K.a)(e.user.posts));i.forEach((function(e){t.push.apply(t,Object(K.a)(e.posts))})),t.sort((function(e,t){return e.date>t.date?-1:e.date>t.date?1:0})),u(Object(K.a)(t))};return Object(n.jsx)("div",{className:"dashboard",children:Object(n.jsxs)(se,{dark:e.isDark,children:[Object(n.jsxs)("div",{className:"dashboard-header",children:[Object(n.jsx)("img",{src:e.user.image,alt:"user profile"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("h2",{children:["Welcome ",e.user&&e.user.firstName]}),Object(n.jsx)("p",{children:"See New Posts Here!"})]})]}),e.isNewUser?Object(n.jsx)(Xe,{}):null,Object(n.jsx)(De,{handleComponentSubmit:function(e){$e.emit("post",{},(function(){}));var t=Object(K.a)(p);t.push(e.data),j(Object(K.a)(t)),m()}}),Object(n.jsx)(me.b,{children:Object(n.jsx)(me.c.ul,{layout:!0,initial:{borderRadius:25},children:l.map((function(e){return Object(n.jsx)(ke,{post:e},e._id)}))})})]})})})),tt=y((function(e){var t=Object(o.useState)([]),s=Object(je.a)(t,2),i=s[0],a=s[1],c=Object(o.useState)([]),r=Object(je.a)(c,2),l=r[0],u=r[1],d=Object(o.useState)(""),h=Object(je.a)(d,2),p=h[0],j=h[1],m=Object(o.useState)([]),b=Object(je.a)(m,2),f=b[0],g=b[1],O=Object(o.useState)([]),v=Object(je.a)(O,2),k=v[0],N=v[1],w=Object(o.useState)([]),S=Object(je.a)(w,2),y=S[0],C=S[1],_=Object(o.useState)(!1),I=Object(je.a)(_,2),L=I[0],P=I[1],D=Object(o.useState)(!0),M=Object(je.a)(D,2),F=M[0],U=M[1];Object(o.useEffect)((function(){window.scrollTo(0,0),x.getAll().then((function(e){A(e.data)})).catch((function(e){console.log(e)}))}),[]),Object(o.useEffect)((function(){B()}),[i]);var A=function(t){var s=t.filter((function(t){return t._id!==e.user._id}));a(s),u(s)},B=function(){var e=[];i.map((function(t){e.push.apply(e,Object(K.a)(t.posts))})),g(e),N(e)};return Object(n.jsx)(se,{dark:e.isDark,children:Object(n.jsxs)("div",{className:"search",children:[Object(n.jsx)("h1",{children:"Search For A Fellow Developer"}),Object(n.jsx)("input",{className:"input is-primary",name:"searchInput",value:p,onChange:function(e){var t=e.target,s=(t.name,t.value);!function(e){var t=i.filter((function(t){var s=t.firstName.toLowerCase(),n=t.lastName.toLowerCase(),o=s+" "+n,i=e.toLowerCase();return!!(s.startsWith(i)||n.startsWith(i)||o.startsWith(i))}));u(t)}(s),function(e){var t=f.filter((function(t){var s=t.postContent.toLowerCase(),n=e.toLowerCase();return!!s.includes(n)}));N(t);var s=t.splice(0,3);C(s)}(s),j(s)},autoComplete:"off"}),""===p?null:Object(n.jsxs)("div",{className:"animated slideInUp search-content",children:[Object(n.jsx)("h1",{children:"People"}),Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{className:"search-table-body",children:0===l.length?Object(n.jsx)("p",{children:"Not results found"}):l.map((function(e){return Object(n.jsx)(Oe,{userSearch:e},e._id)}))})}),Object(n.jsx)("h1",{onClick:function(){U(!F)},children:"Posts"}),Object(n.jsx)(me.b,{children:Object(n.jsx)(me.a,{children:F&&Object(n.jsxs)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[y.map((function(e){return Object(n.jsx)(le,{post:e,searchWord:p},e._id)})),Object(n.jsx)(me.a,{children:L?Object(n.jsx)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:k.map((function(e){return Object(n.jsx)(le,{post:e,searchWord:p},e._id)}))}):null}),Object(n.jsx)("button",{className:"see-more-button",onClick:function(){return P(!L)},children:"See More"})]})})})]})]})})})),st=(s(218),y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={notifications:[]},e.filterNotifications=function(t){var s=e.state.notifications.filter((function(e){return t!==e._id}));e.setState({notifications:s})},e.deleteNotification=function(t){x.deleteNotification(t).then((function(s){e.filterNotifications(t),e.props.reduceNotifications()})).catch((function(e){return console.log(e)}))},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.setState({notifications:Object(K.a)(this.props.notifications).reverse().slice(0,10)})}},{key:"render",value:function(){var e=this,t=this.state.notifications;return Object(n.jsx)(me.c.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:Object(n.jsx)("div",{className:"notifications-menu",children:Object(n.jsxs)("div",{className:"notification",children:[Object(n.jsx)("p",{className:"delete",onClick:this.props.toggleNotifications}),Object(n.jsx)("table",{className:"notification-table",children:Object(n.jsx)("tbody",{children:t.map((function(t){return"follow"!==t.notificationInfo?Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"notifications-info",children:[Object(n.jsx)("img",{src:"".concat(t.userActivity.image),alt:"user profile"}),Object(n.jsx)(r.b,{to:"/postdetails/".concat(t.post),children:Object(n.jsxs)("p",{children:[t.userActivity.firstName," ",t.notificationInfo," your post"]})})]}),Object(n.jsx)("td",{className:"notifications-btn-delete",children:Object(n.jsx)("button",{className:"delete notification-delete",onClick:function(){return e.deleteNotification(t._id)}})})]}):Object(n.jsxs)("tr",{children:[Object(n.jsxs)("td",{className:"notifications-info",children:[Object(n.jsx)("img",{src:"".concat(t.userActivity.image),alt:"user profile"}),Object(n.jsxs)(r.b,{onClick:e.props.toggleNotifications,to:"/profile/".concat(t.userActivity._id),children:[" ",Object(n.jsxs)("p",{children:[t.userActivity.firstName," ",t.userActivity.lastName," started following you"]})]})]}),Object(n.jsx)("td",{className:"notifications-btn-delete",children:Object(n.jsx)("button",{className:"delete",onClick:function(){return e.deleteNotification(t._id)},children:"Delete"})})]})}))})})]})})})}}]),s}(o.Component))),nt=function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={image:""},e.handleSubmit=function(t){t.preventDefault(),x.editPhoto(e.state.image).then((function(t){console.log(t),e.setState({image:""})})).catch((function(e){console.log(e)}))},e.handleFileUpload=function(t){console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],n=new FormData;n.append("image",s),b.a.post("http://localhost:5000/api/users/upload",n,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({image:t.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e}return Object(u.a)(s,[{key:"render",value:function(){return console.log(this.state),Object(n.jsx)("div",{children:Object(n.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(n.jsx)("input",{name:"image",type:"file",onChange:this.handleFileUpload}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(n.jsx)("button",{type:"submit",children:"Save Changes"})]})})}}]),s}(o.Component),ot=s(129),it=s.n(ot),at=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showEdit:!1,isFollowed:!1,showSettings:!1},e.toggleEdit=function(){e.setState({showEdit:!e.state.showEdit})},e.handleFollow=function(){e.state.isFollowed?e.state.isFollowed&&x.unfollow(e.props.user._id).then((function(t){console.log(t.data.following),e.setState({isFollowed:!1})})).catch((function(e){return console.log(e)})):x.follow(e.props.user._id).then((function(t){e.setState({isFollowed:!0})}))},e.checkFollow=function(){e.props.user.followers.forEach((function(t){e.props.user._id===t&&e.setState({isFollowed:!0})}))},e.toggleSettings=function(){e.setState({showSettings:!e.state.showSettings})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.checkFollow()}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"settings",children:[Object(n.jsx)("div",{onClick:this.toggleSettings,children:Object(n.jsx)(it.a,{})}),this.state.showSettings?Object(n.jsxs)("div",{className:"settings-menu",children:[Object(n.jsx)("button",{className:"is-size-7\t button is-white",onClick:this.toggleEdit,children:"Edit Photo"}),this.state.showEdit?Object(n.jsx)(nt,{}):null,Object(n.jsx)("button",{className:"is-size-7\t button is-white",onClick:this.props.logout,children:"Logout"}),Object(n.jsxs)("button",{className:"is-size-7\t button is-white",onClick:this.props.toggleTheme,children:["Toggle dark mode"," "]})]}):null]})}}]),s}(o.Component)),ct=s(78),rt=s.n(ct);function lt(){var e=Object(E.a)(["\n      ","\n      border-radius: 5px;\n    "]);return lt=function(){return e},e}function ut(){var e=Object(E.a)(["\n  ","\n"]);return ut=function(){return e},e}var dt=W.b.div(ut(),(function(e){return e.highlight&&Object(W.a)(lt(),"")})),ht=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isliked:!1,showDelete:!1,numberOfLikes:0,numberOfComments:0},e.countNumberOfLikes=function(){var t=e.props.post.likes.length;e.setState({numberOfLikes:t})},e.countNumberOfComments=function(){var t=e.props.post.comments.length;e.setState({numberOfComments:t})},e.handleLike=function(){e.state.isLiked||Q.likePost(e.props.post._id).then((function(t){var s=e.state.numberOfLikes;s++,console.log(s),e.setState({numberOfLikes:s})})).catch((function(e){console.log(e)})),e.state.isLiked&&Q.unlikePost(e.props.post._id).then((function(t){var s=e.state.numberOfLikes;s--,console.log(s),e.setState({numberOfLikes:s})})).catch((function(e){console.log(e)})),e.setState({isLiked:!e.state.isLiked})},e.toggleDelete=function(){e.setState({showDelete:!e.state.showDelete})},e.outputDate=function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this,t=!1;this.props.post&&this.props.post.likes.forEach((function(s){s===e.props.user._id&&(t=!0)})),this.setState({isLiked:t}),this.countNumberOfLikes(),this.countNumberOfComments()}},{key:"render",value:function(){var e=this,t=this.props.post;return Object(n.jsx)(se,{dark:this.props.isDark,children:Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:t.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsxs)("div",{className:"post-user",children:[" ",t.postedBy&&t.postedBy.firstName," ",t.postedBy&&t.postedBy.lastName,"   "]}),Object(n.jsx)("div",{className:"date",children:this.outputDate(t.date)}),Object(n.jsx)("p",{onClick:this.toggleDelete,href:"#",className:"delete-icon delete is-size-7"}),this.state.showDelete?Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"button is-warning is-light is-size-7",onClick:function(){return e.props.deletePost(t._id)},children:"Confirm Delete"}),Object(n.jsx)("button",{className:"button is-info is-light is-size-7",onClick:this.toggleDelete,children:"Cancel"})]}):null," "]}),t.postPhoto?Object(n.jsx)("img",{className:"post-image",style:{width:"100px"},src:t.postPhoto&&t.postPhoto,alt:""}):null,Object(n.jsxs)(r.b,{to:"/postdetails/".concat(t._id),children:[" ",Object(n.jsx)("div",{className:"post-content",children:t.postContent}),t.code&&Object(n.jsx)("code",{children:Object(n.jsx)("pre",{children:t.code})})]}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(n.jsx)(ie.a,{fontSize:"small",color:"primary"}):Object(n.jsx)(ie.a,{fontSize:"small"})," ",Object(n.jsx)("div",{children:this.state.numberOfLikes})]}),Object(n.jsxs)("div",{className:"comment-icon",children:[Object(n.jsx)(ce.a,{}),Object(n.jsx)("div",{children:this.state.numberOfComments})]})]})]})]})})})}}]),s}(o.Component)),pt=g()("https://social-developer-platform.herokuapp.com"),jt=(y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={user:{},posts:[],isAdmin:!1,isFollowed:!1,showDelete:!1,userId:"",showPosts:!0,showLikes:!1,showFollowing:!1,postInput:"",postPhoto:"",showNotifications:!1,numberOfNotifications:0,newNotification:!1,showSettings:!1,following:[]},e.handlePostApi=function(t){var s=e.props.match.params.id;x.getOne(s).then((function(n){e.setState({user:n.data.user,isAdmin:n.data.isAdmin,userId:s,newNotification:n.data.user.newNotification}),t&&e.displayPosts(),e.checkFollow(),e.orderPosts(),e.setFollowing()})).catch((function(e){console.log(e)}))},e.orderPosts=function(){var t=[];e.state.user.posts.forEach((function(e){t.push(e)})),t.sort((function(e,t){return e.date>t.date?-1:e.date>t.date?1:0})),e.setState({posts:t,numberOfNotifications:e.state.user.notifications.length})},e.componentDidUpdate=function(){e.state.userId!==e.props.match.params.id&&e.handlePostApi()},e.checkFollow=function(){e.state.user.followers.forEach((function(t){e.props.user._id===t&&e.setState({isFollowed:!0})}))},e.socketFollow=function(){console.log("sockey run"),pt.emit("notification",{userId:e.state.user._id,userLiked:e.props.user._id},(function(){console.log("socket called")}))},e.handleFollow=function(){e.state.isFollowed?e.state.isFollowed&&x.unfollow(e.state.user._id).then((function(t){console.log(t.data.following),e.setState({isFollowed:!1})})).catch((function(e){return console.log(e)})):x.follow(e.state.user._id).then((function(t){e.setState({isFollowed:!0}),e.socketFollow()}))},e.deletePost=function(t){Q.delete(t).then((function(t){e.handlePostApi()})).catch((function(e){return console.log(e)}))},e.displayPosts=function(){e.handlePostApi(!1),e.setState({showPosts:!0,showLikes:!1,showFollowing:!1})},e.displayLikes=function(){e.handlePostApi(!1),e.setState({showPosts:!1,showLikes:!0,showFollowing:!1})},e.displayFollowing=function(){e.handlePostApi(!1),e.setState({showPosts:!1,showLikes:!1,showFollowing:!0})},e.handleInput=function(t){var s=t.target,n=s.name,o=s.value;e.setState(Object(T.a)({},n,o))},e.handleSubmit=function(t){t.preventDefault(),Q.createPost(e.props.user._id,e.state.postInput,e.state.postPhoto).then((function(t){e.handlePostApi(),e.setState({postPhoto:"",postInput:""})})).catch((function(e){console.log(e)}))},e.toggleNotifications=function(){e.state.newNotification&&x.seenNotification().then((function(t){e.setState({newNotification:!1})})).catch((function(e){return console.log(e)})),e.setState({showNotifications:!e.state.showNotifications})},e.reduceNotifications=function(){var t=e.state.numberOfNotifications;t--,e.setState({numberOfNotifications:t})},e.toggleSettings=function(){e.setState({showSettings:!e.state.showSettings})},e.setFollowing=function(){var t=e.state.user.following,s=e.state.user,n=t.filter((function(e){return e._id!==s._id}));e.setState({following:n})},e.handleFileUpload=function(t){console.log("The file to be uploaded is: ",t.target.files);var s=t.target.files[0],n=new FormData;n.append("image",s),b.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),n,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({postPhoto:t.data.secure_url})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e.getNumberOfFollowers=function(){return e.state.isAdmin&&e.state.isFollowed?e.state.user.following.length-1:e.state.user.following.length},e.outputDate=function(e){return new Date(e).toDateString().split(" ").slice(1,4).join(" ")},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),this.handlePostApi(!0),pt.on("notification",(function(t){var s=t.userId.userId,n=t.userId.userLiked;console.log(n),s===e.props.user._id&&n!==e.props.user._id&&e.handlePostApi()}))}},{key:"render",value:function(){var e=this;return Object(n.jsx)("div",{className:"profile",children:Object(n.jsxs)(se,{dark:this.props.isDark,children:[Object(n.jsxs)("div",{className:"profile-header",children:[Object(n.jsx)("img",{src:this.state.user.image,alt:"user profile"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:[this.state.user.firstName," ",this.state.user.lastName]}),Object(n.jsxs)("p",{className:"join-date",children:["Joined on ",this.outputDate(this.state.user.created_at)]})]}),this.state.isAdmin?Object(n.jsx)(at,{userProfile:this.state.user}):Object(n.jsx)("button",{className:"button is-white is-size-7",onClick:this.handleFollow,children:this.state.isFollowed?"Unfollow":"Follow"}),Object(n.jsxs)("div",{className:"notifications",children:[this.state.isAdmin?Object(n.jsxs)("div",{children:[this.state.newNotification?Object(n.jsx)("div",{onClick:this.toggleNotifications,id:"new-notification",className:"notification is-primary animated bounce",children:"You have a new notification"}):null,Object(n.jsx)("div",{onClick:this.toggleNotifications,children:Object(n.jsx)(U.a,{badgeContent:this.state.numberOfNotifications,color:"primary",max:10,children:Object(n.jsx)(rt.a,{})})})]}):null,this.state.showNotifications?Object(n.jsx)(st,{toggleNotifications:this.toggleNotifications,notifications:this.state.user.notifications,reduceNotifications:this.reduceNotifications}):null]})]}),Object(n.jsxs)("div",{className:"button-group",children:[Object(n.jsx)(dt,{highlight:this.state.showPosts,children:Object(n.jsxs)("div",{className:"button is-white",onClick:this.displayPosts,children:[" ","Posts ",this.state.posts&&this.state.posts.length]})}),Object(n.jsx)(dt,{highlight:this.state.showLikes,children:Object(n.jsxs)("div",{className:"button is-white",onClick:this.displayLikes,children:[" ","Likes ",this.state.user.likes&&this.state.user.likes.length]})}),Object(n.jsx)(dt,{highlight:this.state.showFollowing,children:Object(n.jsxs)("div",{className:"button is-white",onClick:this.displayFollowing,children:["Following"," ",this.state.user.following&&this.state.following.length]})})]}),this.state.showPosts?Object(n.jsxs)("div",{className:"animated fadeInUp",children:[this.state.isAdmin?Object(n.jsx)("div",{children:Object(n.jsxs)("form",{className:"profile-post-form post-form",onSubmit:this.handleSubmit,children:[Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:this.props.user.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsx)("div",{className:"post-user-info",children:Object(n.jsxs)("div",{className:"post-user",children:[" ",this.props.user&&this.props.user.firstName," ",this.props.user&&this.props.user.lastName,"   "]})}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(n.jsx)("textarea",{className:"post",name:"postInput",value:this.state.postInput,onChange:this.handleInput,placeholder:"Share you code...",required:!0}),Object(n.jsxs)("div",{className:"post-actions",children:[Object(n.jsx)("input",{name:"postPhoto",type:"file",onChange:this.handleFileUpload}),Object(n.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Post"})," "]})]})]}),""===this.state.postPhoto?null:Object(n.jsx)("span",{children:Object(n.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})})]})}):null,this.state.posts&&this.state.posts.map((function(t){return Object(n.jsx)("div",{children:e.state.isAdmin?Object(n.jsx)(ht,{post:t,deletePost:e.deletePost}):Object(n.jsx)(le,{post:t})},t._id)}))," "]}):null,this.state.showLikes?Object(n.jsx)("div",{className:"animated fadeInUp",children:0===this.state.user.likes.length?Object(n.jsx)("h3",{className:"no-info",children:"No likes yet"}):this.state.user.likes.map((function(e){return Object(n.jsx)(le,{post:e},e._id)}))}):null,this.state.showFollowing?Object(n.jsx)("div",{className:"animated fadeInUp",children:0===this.state.following.length?Object(n.jsx)("h3",{className:"no-info",children:"Not following anyone"}):Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{children:this.state.following.map((function(e){return Object(n.jsxs)("tr",{className:"following-link",children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:e.image,alt:"user profile"})}),Object(n.jsx)("td",{children:Object(n.jsx)("p",{children:Object(n.jsxs)(r.b,{to:"/profile/".concat(e._id),children:[e.firstName," ",e.lastName]})})})]},e._id)}))})})}):null]})})}}]),s}(o.Component)),g()("https://social-developer-platform.herokuapp.com")),mt=y((function(e){var t=Object(o.useState)({}),s=Object(je.a)(t,2),i=s[0],a=s[1],c=Object(o.useState)([]),l=Object(je.a)(c,2),u=l[0],d=l[1],h=Object(o.useState)(!1),p=Object(je.a)(h,2),j=p[0],m=p[1],b=Object(o.useState)(!1),f=Object(je.a)(b,2),g=f[0],O=f[1],v=Object(o.useState)(!1),k=Object(je.a)(v,2),N=(k[0],k[1],Object(o.useState)("")),w=Object(je.a)(N,2),S=w[0],y=w[1],C=Object(o.useState)(!0),_=Object(je.a)(C,2),I=_[0],L=_[1],P=Object(o.useState)(!1),D=Object(je.a)(P,2),M=D[0],F=D[1],A=Object(o.useState)(!1),B=Object(je.a)(A,2),z=B[0],T=B[1],E=Object(o.useState)(!1),W=Object(je.a)(E,2),q=W[0],R=W[1],Y=Object(o.useState)(0),J=Object(je.a)(Y,2),V=J[0],Z=J[1],H=Object(o.useState)(!1),G=Object(je.a)(H,2),K=G[0],X=G[1],$=Object(o.useState)(!1),ee=Object(je.a)($,2),te=(ee[0],ee[1],Object(o.useState)([])),ne=Object(je.a)(te,2),oe=ne[0],ie=ne[1];Object(o.useEffect)((function(){window.scrollTo(0,0),ae(!0),jt.on("notification",(function(t){var s=t.userId.userId,n=t.userId.userLiked;s===e.user._id&&n!==e.user._id&&ae()}))}),[]);var ae=function(t){var s=e.match.params.id;x.getOne(s).then((function(e){a(e.data.user),m(e.data.isAdmin),y(s),X(e.data.user.newNotification),t&&ue()})).catch((function(e){console.log(e)}))};Object(o.useEffect)((function(){ce(),ie(i.following)}),[i]);var ce=function(){var e=[];0!==Object.keys(i).length&&(i.posts.forEach((function(t){e.push(t)})),e.sort((function(e,t){return e.date>t.date?-1:e.date>t.date?1:0})),d(e),Z(i.notifications.length))};Object(o.useEffect)((function(){S!==e.match.params.id&&ae()}),[e.match.params.id]);var re,le=function(e){Q.delete(e).then((function(e){ae()})).catch((function(e){return console.log(e)}))},ue=function(){ae(!1),L(!0),F(!1),T(!1)},de=function(){K&&x.seenNotification().then((function(e){X(!1)})).catch((function(e){return console.log(e)})),R(!q)},he={type:"spring",stiffness:500,damping:30};return Object(n.jsx)("div",{className:"profile",children:Object(n.jsxs)(se,{dark:e.isDark,children:[Object(n.jsxs)("div",{className:"profile-header",children:[Object(n.jsx)("img",{src:i.image,alt:"user profile"}),Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{children:[i.firstName," ",i.lastName]}),Object(n.jsxs)("p",{className:"join-date",children:["Joined on ",(re=i.created_at,new Date(re).toDateString().split(" ").slice(1,4).join(" "))]})]}),j?Object(n.jsx)(at,{userProfile:i}):Object(n.jsx)("button",{className:"button is-white is-size-7",onClick:function(){g?g&&x.unfollow(i._id).then((function(e){O(!1)})).catch((function(e){return console.log(e)})):x.follow(i._id).then((function(t){O(!0),jt.emit("notification",{userId:i._id,userLiked:e.user._id},(function(){console.log("socket called")}))}))},children:g?"Unfollow":"Follow"}),Object(n.jsxs)("div",{className:"notifications",children:[j?Object(n.jsxs)("div",{children:[K?Object(n.jsx)("div",{onClick:de,id:"new-notification",className:"notification is-primary animated bounce",children:"You have a new notification"}):null,Object(n.jsx)("div",{onClick:de,children:Object(n.jsx)(U.a,{badgeContent:V,color:"primary",max:10,children:Object(n.jsx)(rt.a,{})})})]}):null,Object(n.jsx)(me.a,{children:q?Object(n.jsx)(st,{toggleNotifications:de,notifications:i.notifications,reduceNotifications:function(){var e=V;e--,Z(e)}}):null})]})]}),Object(n.jsx)(me.b,{children:Object(n.jsxs)("div",{className:"button-group",children:[Object(n.jsx)(dt,{highlight:I,children:Object(n.jsxs)("div",{className:"button is-white",onClick:ue,children:[" ",I&&Object(n.jsx)(me.c.div,{layoutId:"outline",className:"outline",initial:!1,animate:{borderColor:"#22cc88"},transition:he}),"Posts ",u&&u.length]})}),Object(n.jsx)(dt,{highlight:M,children:Object(n.jsxs)("div",{className:"button is-white",onClick:function(){ae(!1),L(!1),F(!0),T(!1)},children:[" ",M&&Object(n.jsx)(me.c.div,{layoutId:"outline",className:"outline",initial:!1,animate:{borderColor:"#22cc88"},transition:he}),"Likes ",i.likes&&i.likes.length]})}),Object(n.jsx)(dt,{highlight:z,children:Object(n.jsxs)("div",{className:"button is-white",onClick:function(){ae(!1),L(!1),F(!1),T(!0)},children:[z&&Object(n.jsx)(me.c.div,{layoutId:"outline",className:"outline",initial:!1,animate:{borderColor:"#22cc88"},transition:he}),"Following ",i.following&&i.following.length]})})]})}),I?Object(n.jsxs)("div",{className:"animated fadeInUp",children:[j?Object(n.jsx)("div",{children:Object(n.jsx)(De,{handleComponentSubmit:function(){ae()}})}):null,u&&u.map((function(e){return Object(n.jsx)("div",{children:j?Object(n.jsx)(ht,{post:e,deletePost:le}):Object(n.jsx)(ke,{post:e})},e._id)}))," "]}):null,M?Object(n.jsx)("div",{className:"animated fadeInUp",children:0===i.likes.length?Object(n.jsx)("h3",{className:"no-info",children:"No likes yet"}):i.likes.map((function(e){return Object(n.jsx)(ke,{post:e},e._id)}))}):null,z?Object(n.jsx)("div",{className:"animated fadeInUp",children:0===oe.length?Object(n.jsx)("h3",{className:"no-info",children:"Not following anyone"}):Object(n.jsx)("table",{children:Object(n.jsx)("tbody",{children:oe.map((function(e){return Object(n.jsxs)("tr",{className:"following-link",children:[Object(n.jsx)("td",{children:Object(n.jsx)("img",{src:e.image,alt:"user profile"})}),Object(n.jsx)("td",{children:Object(n.jsx)("p",{children:Object(n.jsxs)(r.b,{to:"/profile/".concat(e._id),children:[e.firstName," ",e.lastName]})})})]},e._id)}))})})}):null]})})}));function bt(){var e=Object(E.a)(["\nbackground-color: white;\ntop:0;\ndisplay:flex;\njusifty-content:space-between;\nalign-items:center; \nwidth:100%;\nmargin:0 auto;\n\nimg{\n  width:25px;\n  height:25px;\n  border-radius:50%;\n  margin:5px 10px;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n"]);return bt=function(){return e},e}function ft(){var e=Object(E.a)(["\n  ","\n"]);return ft=function(){return e},e}var gt=W.b.div(ft(),(function(){return Object(W.a)(bt())})),Ot=g()("https://social-developer-platform.herokuapp.com"),vt=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={post:{},isLiked:!1,commentInput:"",numberOfLikes:0,numberOfComments:0,showLikes:!1,showPhoto:!1},e.countNumberOfLikes=function(){var t=e.state.post.likes.length;e.setState({numberOfLikes:t})},e.countNumberOfComments=function(){var t=e.state.post.comments.length;e.setState({numberOfComments:t})},e.setLike=function(){var t=!1;e.state.post.likes.forEach((function(s){s._id===e.props.user._id&&(t=!0)})),e.setState({isLiked:t})},e.toggleLikes=function(){e.setState({showLikes:!e.state.showLikes})},e.handlePostById=function(){var t=e.props.match.params.postId;Q.getById(t).then((function(t){e.setState({post:t.data}),e.setLike(),e.countNumberOfLikes(),e.countNumberOfComments()})).catch((function(e){return console.log(e)}))},e.handleLike=function(){e.state.isLiked||Q.likePost(e.state.post._id).then((function(t){var s=e.state.numberOfLikes;s++,e.setState({numberOfLikes:s})})).catch((function(e){console.log(e)})),e.state.isLiked&&Q.unlikePost(e.state.post._id).then((function(t){var s=e.state.numberOfLikes;s--,e.setState({numberOfLikes:s})})).catch((function(e){console.log(e)})),e.setState({isLiked:!e.state.isLiked})},e.socketComment=function(){console.log("sockey run"),Ot.emit("notification",{userId:e.state.post.postedBy._id,userLiked:e.props.user._id},(function(){console.log("socket called")}))},e.handleInput=function(t){var s=t.target,n=s.name,o=s.value;e.setState(Object(T.a)({},n,o))},e.handleSubmit=function(t){t.preventDefault(),Q.comment(e.state.post._id,e.state.commentInput).then((function(t){console.log(t.data),e.handlePostById(),e.setState({commentInput:""}),e.socketComment()}))},e.showCommentInput=function(){return Object(n.jsxs)("form",{onSubmit:e.handleSubmit,className:"post-comment",children:[Object(n.jsx)("input",{name:"commentInput",value:e.state.commentInput,onChange:e.handleInput,autoComplete:"off",placeholder:"Write your comment here...",required:!0}),Object(n.jsx)("button",{id:"comment-btn",className:"button is-white s-size-7",type:"submit",children:"Comment"})]})},e.handlePostLinks=function(){var t=e.state.post.postContent.split(" ");console.log(t);var s=t.map((function(e){return e.startsWith("http")||e.startsWith("https")?Object(n.jsx)("a",{href:"".concat(e),children:e}):e}));console.log(s);var o=s.join(" ");return console.log(o),Object(n.jsx)("p",{children:s})},e.outputDate=function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},e.toggleShowPicture=function(){e.setState({showPhoto:!e.state.showPhoto})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.handlePostById()}},{key:"componentWillUnmount",value:function(){console.log("unmount")}},{key:"render",value:function(){var e=this,t=this.state.post;return Object(n.jsx)("div",{children:Object(n.jsx)(se,{dark:this.props.isDark,children:Object(n.jsxs)("div",{id:"post-details",children:[Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:t.postedBy&&t.postedBy.image,alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[Object(n.jsx)(r.b,{to:"/profile/".concat(t.postedBy&&t.postedBy._id),children:Object(n.jsxs)("div",{className:"post-user",children:[" ",t.postedBy&&t.postedBy.firstName," ",t.postedBy&&t.postedBy.lastName,"   "]})}),Object(n.jsx)("div",{className:"date",children:this.outputDate(t.date)})]}),t.postPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"post-image",style:{width:"100px"},src:t.postPhoto&&t.postPhoto,alt:""}):null," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",t.postContent]}),Object(n.jsx)("p",{className:"like-btn",onClick:this.toggleLikes,children:"Likes"}),Object(n.jsxs)("div",{className:"post-actions",children:[" ",Object(n.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(n.jsx)(ie.a,{fontSize:"small",color:"primary"}):Object(n.jsx)(ie.a,{fontSize:"small",color:"disabled"})," ",Object(n.jsx)("div",{children:this.state.numberOfLikes})]}),Object(n.jsxs)("div",{className:"comment-icon",children:[Object(n.jsx)(ce.a,{}),Object(n.jsx)("div",{children:this.state.numberOfComments})]})]}),this.state.showPhoto?Object(n.jsx)("img",{onClick:this.toggleShowPicture,className:"large-img animated zoomIn",src:t.postPhoto&&t.postPhoto,alt:""}):null]})]}),Object(n.jsxs)("section",{className:"comments",children:[t.comments&&t.comments.map((function(t){return Object(n.jsx)(be,{outputDate:e.outputDate,getPostDetails:e.handlePostById,comment:t},t._id)})),Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"post-main",children:[Object(n.jsx)("div",{children:Object(n.jsx)("img",{src:"".concat(this.props.user.image),alt:"user profile"})}),Object(n.jsxs)("div",{className:"post-section",children:[Object(n.jsxs)("div",{className:"post-user-info",children:[" ",Object(n.jsxs)("div",{className:"post-user",children:[" ",this.props.user.firstName," ",this.props.user.lastName,"   "]})," "]})," ",Object(n.jsxs)("div",{className:"post-content",children:[" ",this.showCommentInput()]})]})]})})]}),this.state.showLikes?Object(n.jsx)("div",{className:"likes",children:Object(n.jsxs)("div",{className:"like-content animated zoomIn",children:[Object(n.jsx)("p",{className:"delete close-likes",onClick:this.toggleLikes}),t.likes&&t.likes.map((function(e){return Object(n.jsx)(r.b,{to:"/profile/".concat(e._id),children:Object(n.jsxs)(gt,{children:[Object(n.jsx)("img",{src:"".concat(e.image),alt:"profile"}),Object(n.jsxs)("p",{className:"like-item",children:[e.firstName," ",e.lastName]},e._id)," "]})})}))]})}):null]})})})}}]),s}(o.Component));function xt(){var e=Object(E.a)(["\n  background-color: #57ba98;\n\n  h3{\n    color:white;\n  }\n \n  p {\n    color:white\n"]);return xt=function(){return e},e}function kt(){var e=Object(E.a)(["\n  ","\n"]);return kt=function(){return e},e}function Nt(){var e=Object(E.a)(["\n  background-color: #f2f2f2;\nimg{\n    width:30px;\n    height:30px;\n    border-radius:50%;\n    margin:5px 10px;\n}\n  h3{\n    \n    font-size:1.2rem;\n  }\n \n  p {\n    margin-bottom:5px;\n    font-size:0.8rem;\n"]);return Nt=function(){return e},e}function wt(){var e=Object(E.a)(["\n  ","\n"]);return wt=function(){return e},e}var St=W.b.div(wt(),(function(){return Object(W.a)(Nt())})),yt=W.b.div(kt(),(function(e){return e.isSelected&&Object(W.a)(xt())})),Ct=s(130),_t=s.n(Ct),It=(s(219),y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={unreadMessages:0,isOnline:!1,isSelected:!1,conversationSelected:""},e.outputDate=function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},e.checkOnline=function(){var t=e.props.online,s=!1,n=e.props.receiverUser._id;return t.forEach((function(e){e===n&&(s=!0)})),s},e.checkNotifications=function(){var t=e.props.user._id,s=e.props.conversation;s.notifications[0]===t&&(console.log("notications",s.notifications.length,s._id),e.setState({unreadMessages:s.notifications.length}))},e.handleSelected=function(){var t=e.props.conversation._id;e.props.selected;console.log("Called",t)},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.checkNotifications();var e=this.props.selected;this.setState({conversationSelected:e})}},{key:"componentDidUpdate",value:function(){this.props.selected,this.state.conversationSelected}},{key:"render",value:function(){var e=this.props,t=e.conversation,s=e.messageArrLength,o=e.receiverUser;return console.log(this.state.isSelected),Object(n.jsx)(yt,{isSelected:this.state.isSelected,children:Object(n.jsxs)("div",{className:"message-preview",children:[Object(n.jsx)("img",{src:"".concat(o&&o.image),alt:"profile"}),Object(n.jsxs)("div",{className:"message-name",children:[Object(n.jsxs)("h3",{children:[o&&o.firstName," ",o&&o.lastName," ",this.checkOnline()?Object(n.jsx)(_t.a,{className:"online animated bounce"}):null]}),Object(n.jsxs)("div",{className:"message-info",children:[Object(n.jsxs)("div",{children:[0===this.state.unreadMessages?null:Object(n.jsx)("div",{className:"unread",children:Object(n.jsx)("p",{children:this.state.unreadMessages})}),Object(n.jsxs)("div",{className:"preview-message-content",children:[t.messages[s]&&t.messages[s].userSent.firstName,":"," ",t.messages[s]&&t.messages[s].messageContent]})]}),Object(n.jsx)("p",{className:"message-date",children:this.outputDate(t.messages[s]&&t.messages[s].updated_at)})]})]})]})})}}]),s}(o.Component)));function Lt(){var e=Object(E.a)(["\nbackground-color: #f2f2f2;\nposition:sticky;\ntop:0;\ndisplay:flex;\n jusifty-content:space-evenly;\nalign-items:center; \nwidth:100%;\nz-index:6;\n\nimg{\n  width:50px;\n  height:50px;\n  border-radius:50%;\n  margin:5px 10px;\n}\nh3{\n  margin: 0 10px;\n  font-size:1.3rem;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n"]);return Lt=function(){return e},e}function Pt(){var e=Object(E.a)(["\n  ","\n"]);return Pt=function(){return e},e}var Dt=W.b.div(Pt(),(function(){return Object(W.a)(Lt())})),Mt=g()("https://social-developer-platform.herokuapp.com"),Ft=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={conversation:{},messages:[],sendMessage:"",intervalId:"",userContact:{},newMessages:[],showDelete:!1,isTyping:!1,isSelected:!1},e.startSocket=function(){Mt.emit("join",{room:e.state.conversation._id,user:e.props.user._id},(function(e){e&&console.log(e)})),Mt.on("message",(function(t){e.getConversation(),e.seenMessage(),e.setState({isTyping:!1})})),Mt.on("online",(function(e){})),Mt.on("messageIsSeen",(function(){e.getConversation()})),Mt.on("type",(function(){e.setState({isTyping:!0})})),Mt.on("StopType",(function(){e.setState({isTyping:!1})})),e.sendDelete()},e.seenMessage=function(){var t=e.props.conversationId;Mt.emit("messageSeen",{room:e.state.conversation._id},(function(){})),ge.messageSeen(t).then((function(e){})).catch((function(e){return console.log(e)}))},e.getConversation=function(){var t=e.props.conversationId;ge.getConversationOne(t).then((function(t){e.setState({conversation:t.data}),e.getMessages(),e.filterCurrentUser()}))},e.getConversationMount=function(){var t=e.props.conversationId;ge.getConversationOne(t).then((function(t){e.setState({conversation:t.data}),e.getMessages(),e.filterCurrentUser(),e.startSocket()}))},e.sendMessage=function(){var t=e.state.sendMessage,s=e.state.conversation._id;console.log(t);var n={conversationId:s,message:t};t&&Mt.emit("sendMessage",n,(function(){console.log("MessageSent"),e.setState({sendMessage:""})}))},e.sendDelete=function(){var t={conversationId:e.state.conversation._id,message:""};Mt.emit("sendMessage",t,(function(){e.setState({sendMessage:""})}))},e.getMessages=function(){var t=e.state.conversation.messages;t.length!==e.state.messages.length&&(e.setState({messages:t}),e.scrollToBottom())},e.handleInput=function(t){var s=t.target,n=s.name,o=s.value;Mt.emit("typing",{room:e.state.conversation._id,value:o}),e.setState(Object(T.a)({},n,o))},e.handleSubmit=function(t){t.preventDefault();var s=e.props.conversationId,n=e.state.sendMessage,o=e.state.userContact._id;console.log(o),ge.sendMessage(s,n,o).then((function(t){console.log(t),e.getConversation(),e.sendMessage()})).catch((function(e){return console.log(e)}))},e.filterCurrentUser=function(){var t=e.state.conversation.users.filter((function(t){return t._id!==e.props.user._id}));return e.setState({userContact:t[0]}),t[0]},e.isAdmin=function(t){return t===e.props.user._id},e.setTimerFromApiCall=function(){var t=setInterval((function(){e.getConversation()}),5e3);e.setState({intervalId:t})},e.outputDate=function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},e.checkSeen=function(){var t=e.state.conversation.notifications,s=e.state.conversation.messages,n=e.state.conversation.messages.length-1;return 0===t.length&&0!==s.length&&s[n].userSent._id===e.props.user._id?"Seen":null},e.deleteMessage=function(t){var s=e.props.conversationId;ge.deleteMessage(s,t).then((function(t){e.getConversation(),e.sendDelete()})).catch((function(e){console.log(e)}))},e.toggleDelete=function(){e.setState({showDelete:!e.state.showDelete})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.getConversationMount(),this.seenMessage()}},{key:"componentDidUpdate",value:function(){this.state.conversation._id!==this.props.conversationId&&this.getConversationMount()}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView()}},{key:"componentWillUnmount",value:function(){Mt.emit("leaveConversation",{room:this.state.conversation._id},(function(e){e&&console.log(e)})),this.seenMessage()}},{key:"render",value:function(){var e=this,t="";return this.state.showDelete&&(t="slide-message"),Object(n.jsx)("div",{className:"conversation-details",children:Object(n.jsxs)(ne,{dark:this.props.isDark,className:"isMessages",children:[Object(n.jsxs)(Dt,{children:[Object(n.jsx)("img",{src:this.state.userContact.image}),Object(n.jsxs)("h3",{children:[this.state.userContact.firstName," ",this.state.userContact.lastName]})]}),Object(n.jsxs)("div",{className:"message-background",children:[this.state.messages.map((function(s){return Object(n.jsx)("div",{children:e.isAdmin(s.userSent._id)?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{onClick:e.toggleDelete,className:"admin-message ".concat(t," animated slideInRight"),children:[Object(n.jsx)("div",{children:e.outputDate(s.created_at)}),Object(n.jsxs)("p",{children:[s.userSent.firstName,": ",s.messageContent," "]})]}),e.state.showDelete?Object(n.jsx)("button",{className:"delete delete-message",onClick:function(){return e.deleteMessage(s._id)}}):null]}):Object(n.jsxs)("div",{className:"user-message animated slideInLeft",children:[Object(n.jsx)("div",{children:e.outputDate(s.created_at)}),Object(n.jsxs)("p",{children:[s.userSent.firstName,": ",s.messageContent]})]})},s._id)})),Object(n.jsx)("div",{className:"seen",children:this.state.conversation.notifications&&this.checkSeen()}),Object(n.jsx)("div",{ref:function(t){e.el=t}})]}),this.state.isTyping?Object(n.jsxs)("div",{className:"typing",children:[Object(n.jsx)("div",{className:"dots dot1"}),Object(n.jsx)("div",{className:"dots dot2"}),Object(n.jsx)("div",{className:"dots dot3"})]}):null,Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"send-message",children:[Object(n.jsx)("input",{className:"input is-info",value:this.state.sendMessage,name:"sendMessage",onChange:this.handleInput,required:!0}),Object(n.jsx)("button",{className:"button",type:"submit",children:"Send"})]})]})})}}]),s}(o.Component)),Ut=g()("https://social-developer-platform.herokuapp.com"),At=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={conversations:[],online:[],conversationId:""},e.sortConversations=function(){var t=Object(K.a)(e.state.conversations);t.sort((function(e,t){return e.updated_at>t.updated_at?-1:e.updated_at>t.updated_at?1:0})),e.setState({conversations:t})},e.getConversations=function(){ge.getConversations().then((function(t){e.setState({conversations:t.data}),e.sortConversations()})).catch((function(e){console.log(e)}))},e.filterCurrentUser=function(t){return t.filter((function(t){return t._id!==e.props.user._id}))[0]},e.handleConversationChoosen=function(t){console.log(t),e.setState({conversationId:t})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),this.getConversations(),Ut.emit("join-main",{user:this.props.user._id},(function(e){e&&console.log(e)})),Ut.on("online",(function(t){var s=Object.values(t.users);e.setState({online:s})}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.conversations;return Object(n.jsx)(se,{dark:this.props.isDark,children:Object(n.jsxs)("div",{className:"conversation-list-and-details",children:[Object(n.jsxs)("div",{className:"conversation-list",children:[Object(n.jsx)("h1",{className:"subtitle is-4",children:"Conversations"}),t&&0===t.length?Object(n.jsx)("p",{className:"zero-conversation animated fadeIn",children:"You have no conversations. Search for developers to chat with!"}):t.map((function(t){var s=e.filterCurrentUser(t.users),o=t.messages.length-1;return Object(n.jsxs)("div",{className:"animated fadeInUp",children:[Object(n.jsx)(r.b,{className:"link-to-conversation",to:"/conversation-details/".concat(t._id),children:Object(n.jsx)("div",{className:"conversations",children:Object(n.jsx)(St,{children:Object(n.jsx)(It,{online:e.state.online,conversation:t,messageArrLength:o,receiverUser:s})})})}),Object(n.jsx)("div",{onClick:function(){e.handleConversationChoosen(t._id)},className:"conversations link-to-desktop-conversations",children:Object(n.jsx)(St,{children:Object(n.jsx)(It,{selected:e.state.conversationId,online:e.state.online,conversation:t,messageArrLength:o,receiverUser:s})})})]},t._id)}))]}),Object(n.jsx)("div",{className:"link-to-desktop-conversations",children:""===this.state.conversationId?Object(n.jsx)("h2",{className:"link-to-desktop-conversations subtitle is-4",children:"Choose your Conversation"}):Object(n.jsx)(Ft,{conversationId:this.state.conversationId})})]})})}}]),s}(o.Component)),Bt=g()("https://social-developer-platform.herokuapp.com"),zt=(y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={conversations:[],online:[],conversationId:""},e.sortConversations=function(){var t=Object(K.a)(e.state.conversations);t.sort((function(e,t){return e.updated_at>t.updated_at?-1:e.updated_at>t.updated_at?1:0})),e.setState({conversations:t})},e.getConversations=function(){ge.getConversations().then((function(t){e.setState({conversations:t.data}),e.sortConversations()})).catch((function(e){console.log(e)}))},e.filterCurrentUser=function(t){return t.filter((function(t){return t._id!==e.props.user._id}))[0]},e.handleConversationChoosen=function(t){console.log(t),e.setState({conversationId:t})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;window.scrollTo(0,0),this.getConversations(),Bt.emit("join-main",{user:this.props.user._id},(function(e){e&&console.log(e)})),Bt.on("online",(function(t){var s=Object.values(t.users);e.setState({online:s})}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.conversations;return Object(n.jsx)(se,{dark:this.props.isDark,children:Object(n.jsxs)("div",{className:"conversation-list-and-details",children:[Object(n.jsxs)("div",{className:"conversation-list",children:[Object(n.jsx)("h1",{className:"subtitle is-4",children:"Conversations"}),t&&0===t.length?Object(n.jsx)("p",{className:"zero-conversation animated fadeIn",children:"You have no conversations. Search for developers to chat with!"}):t.map((function(t){var s=e.filterCurrentUser(t.users),o=t.messages.length-1;return Object(n.jsx)("div",{className:"animated fadeInUp",children:Object(n.jsx)("div",{onClick:function(){e.handleConversationChoosen(t._id)},className:"conversations",children:Object(n.jsx)(St,{children:Object(n.jsx)(It,{selected:e.state.conversationId,online:e.state.online,conversation:t,messageArrLength:o,receiverUser:s})})})},t._id)}))]}),""===this.state.conversationId?Object(n.jsx)("p",{children:"Conversations"}):Object(n.jsx)(Ft,{conversationId:this.state.conversationId})]})})}}]),s}(o.Component)),g()("https://social-developer-platform.herokuapp.com")),Tt=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(l.a)(this,s);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={conversation:{},messages:[],sendMessage:"",intervalId:"",userContact:{},newMessages:[],showDelete:!1,isTyping:!1},e.startSocket=function(){zt.emit("join",{room:e.state.conversation._id,user:e.props.user._id},(function(e){e&&console.log(e)})),zt.on("message",(function(t){e.getConversation(),e.seenMessage(),e.setState({isTyping:!1})})),zt.on("online",(function(e){})),zt.on("messageIsSeen",(function(){e.getConversation()})),zt.on("type",(function(){e.setState({isTyping:!0})})),zt.on("StopType",(function(){e.setState({isTyping:!1})})),e.sendDelete()},e.seenMessage=function(){var t=e.props.match.params.conversationId;zt.emit("messageSeen",{room:e.state.conversation._id},(function(){console.log("message-seen")})),ge.messageSeen(t).then((function(e){})).catch((function(e){return console.log(e)}))},e.getConversation=function(){var t=e.props.match.params.conversationId;ge.getConversationOne(t).then((function(t){e.setState({conversation:t.data}),e.getMessages(),e.filterCurrentUser()}))},e.getConversationMount=function(){var t=e.props.match.params.conversationId;ge.getConversationOne(t).then((function(t){e.setState({conversation:t.data}),e.getMessages(),e.filterCurrentUser(),e.startSocket()}))},e.sendMessage=function(){var t=e.state.sendMessage,s=e.state.conversation._id;console.log(t);var n={conversationId:s,message:t};t&&zt.emit("sendMessage",n,(function(){console.log("MessageSent"),e.setState({sendMessage:""})}))},e.sendDelete=function(){var t={conversationId:e.state.conversation._id,message:""};zt.emit("sendMessage",t,(function(){e.setState({sendMessage:""})}))},e.getMessages=function(){var t=e.state.conversation.messages;t.length!==e.state.messages.length&&(e.setState({messages:t}),e.scrollToBottom())},e.handleInput=function(t){var s=t.target,n=s.name,o=s.value;zt.emit("typing",{room:e.state.conversation._id,value:o}),e.setState(Object(T.a)({},n,o))},e.handleSubmit=function(t){t.preventDefault();var s=e.props.match.params.conversationId,n=e.state.sendMessage,o=e.state.userContact._id;console.log(o),ge.sendMessage(s,n,o).then((function(t){console.log(t),e.getConversation(),e.sendMessage()})).catch((function(e){return console.log(e)}))},e.filterCurrentUser=function(){var t=e.state.conversation.users.filter((function(t){return t._id!==e.props.user._id}));return e.setState({userContact:t[0]}),t[0]},e.isAdmin=function(t){return t===e.props.user._id},e.setTimerFromApiCall=function(){var t=setInterval((function(){e.getConversation()}),5e3);e.setState({intervalId:t})},e.outputDate=function(e){var t=new Date(e),s=t.toDateString().split(" ").slice(0,3).join(" ");return t.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+s},e.checkSeen=function(){var t=e.state.conversation.notifications,s=e.state.conversation.messages,n=e.state.conversation.messages.length-1;return 0===t.length&&0!==s.length&&s[n].userSent._id===e.props.user._id?"Seen":null},e.deleteMessage=function(t){var s=e.props.match.params.conversationId;ge.deleteMessage(s,t).then((function(t){e.getConversation(),e.sendDelete()})).catch((function(e){console.log(e)}))},e.toggleDelete=function(){e.setState({showDelete:!e.state.showDelete})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.getConversationMount(),this.seenMessage(),this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){console.log("leave conversation"),zt.emit("leaveConversation",{room:this.state.conversation._id},(function(e){e&&console.log(e)})),this.seenMessage()}},{key:"render",value:function(){var e=this,t="";return this.state.showDelete&&(t="slide-message"),Object(n.jsx)("div",{className:"conversation-details",children:Object(n.jsxs)(ne,{dark:this.props.isDark,className:"isMessages",children:[Object(n.jsxs)(Dt,{children:[Object(n.jsx)("img",{src:this.state.userContact.image}),Object(n.jsxs)("h3",{children:[this.state.userContact.firstName," ",this.state.userContact.lastName]})]}),Object(n.jsxs)("div",{className:"message-background",children:[this.state.messages.map((function(s){return Object(n.jsx)("div",{children:e.isAdmin(s.userSent._id)?Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{onClick:e.toggleDelete,className:"admin-message ".concat(t),children:[Object(n.jsx)("div",{children:e.outputDate(s.created_at)}),Object(n.jsxs)("p",{children:[s.userSent.firstName,": ",s.messageContent," "]})]}),e.state.showDelete?Object(n.jsx)("button",{className:"delete delete-message",onClick:function(){return e.deleteMessage(s._id)}}):null]}):Object(n.jsxs)("div",{className:"user-message",children:[Object(n.jsx)("div",{children:e.outputDate(s.created_at)}),Object(n.jsxs)("p",{children:[s.userSent.firstName,": ",s.messageContent]})]})},s._id)})),Object(n.jsx)("div",{className:"seen",children:this.state.conversation.notifications&&this.checkSeen()}),Object(n.jsx)("div",{ref:function(t){e.el=t}})]}),this.state.isTyping?Object(n.jsxs)("div",{className:"typing",children:[Object(n.jsx)("div",{className:"dots dot1"}),Object(n.jsx)("div",{className:"dots dot2"}),Object(n.jsx)("div",{className:"dots dot3"})]}):null,Object(n.jsxs)("form",{onSubmit:this.handleSubmit,className:"send-message",children:[Object(n.jsx)("input",{className:"input is-info",value:this.state.sendMessage,name:"sendMessage",onChange:this.handleInput,required:!0}),Object(n.jsx)("button",{className:"button",type:"submit",children:"Send"})]})]})})}}]),s}(o.Component));var Et=y((function(e){var t=e.isLoggedIn,s=e.isLoading,o=e.component,i=e.exact,a=e.path;return s?"Loading":Object(n.jsx)(p.b,{exact:i,path:a,render:function(e){return t?Object(n.jsx)(p.a,{to:"/private"}):t?void 0:Object(n.jsx)(o,Object(j.a)({},e))}})}));var Wt=y((function(e){var t=e.isLoggedIn,s=e.isLoading,o=e.component,i=e.exact,a=e.path;return s?"Loading":Object(n.jsx)(p.b,{exact:i,path:a,render:function(e){return t?t?Object(n.jsx)(o,Object(j.a)({},e)):void 0:Object(n.jsx)(p.a,{to:"/login"})}})})),qt=y(function(e){Object(d.a)(s,e);var t=Object(h.a)(s);function s(){return Object(l.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return console.log(window.innerWidth<1023),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)(se,{dark:this.props.isDark,children:[Object(n.jsxs)("div",{className:"container-side-nav",children:[Object(n.jsx)(B,{}),Object(n.jsx)("div",{className:"side-nav-pages",children:Object(n.jsxs)(p.d,{children:[Object(n.jsx)(p.b,{exact:!0,path:"/",component:z}),Object(n.jsx)(Et,{exact:!0,path:"/signup",component:H}),Object(n.jsx)(Et,{exact:!0,path:"/login",component:G}),Object(n.jsx)(Wt,{exact:!0,path:"/private",component:et}),Object(n.jsx)(Wt,{exact:!0,path:"/search",component:tt}),Object(n.jsx)(Wt,{exact:!0,path:"/profile/:id",component:mt}),Object(n.jsx)(Wt,{exact:!0,path:"/postdetails/:postId",component:vt}),Object(n.jsx)(Wt,{exact:!0,path:"/conversations",component:At}),Object(n.jsx)(Wt,{exact:!0,path:"/conversation-details/:conversationId",component:Tt})]})})]}),Object(n.jsx)("div",{id:"nav-space"})]})})}}]),s}(o.Component));c.a.render(Object(n.jsx)(r.a,{children:Object(n.jsx)(S,{children:Object(n.jsx)(qt,{})})}),document.getElementById("root"))}},[[220,1,2]]]);
//# sourceMappingURL=main.3a189222.chunk.js.map