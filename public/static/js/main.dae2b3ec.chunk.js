(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{154:function(t,e,n){},156:function(t,e,n){"use strict";n.r(e);var s=n(0),o=n(1),i=n.n(o),a=n(48),c=n.n(a),r=n(7),l=n(3),u=n(4),h=n(6),d=n(5),p=(n(99),n(10)),j=n(23),m=n(13),f=n.n(m),b=n(22),g=n.n(b),v=g()("https://social-developer-platform.herokuapp.com"),O=new(function(){function t(){Object(l.a)(this,t),this.auth=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})}return Object(u.a)(t,[{key:"signup",value:function(t,e,n,s,o){return console.log(t,e,n,s,o),this.auth.post("/auth/signup",{firstName:t,lastName:e,image:n,email:s,password:o}).then((function(t){return t.data}))}},{key:"login",value:function(t,e){return this.auth.post("/auth/login",{email:t,password:e}).then((function(t){return t.data}))}},{key:"logout",value:function(){return v.off(),this.auth.get("/auth/logout").then((function(t){return t.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(t){return t.data}))}}]),t}()),x=new function t(){var e=this;Object(l.a)(this,t),this.getAll=function(){return e.api.get("/api/users")},this.getOne=function(t){return e.api.get("/api/users/".concat(t))},this.follow=function(t){return e.api.put("/api/users/".concat(t,"/follow"))},this.unfollow=function(t){return e.api.put("/api/users/".concat(t,"/unfollow"))},this.deleteNotification=function(t){return e.api.put("/api/users/notifications/".concat(t))},this.seenNotification=function(){return e.api.get("/api/users/notifications/seen")},this.editPhoto=function(t){return console.log(t),e.api.post("/api/users/edit",{image:t})},this.darkView=function(t){return e.api.post("/api/users/dark-mode",{darkMode:t})},this.api=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})},w=i.a.createContext(),k=w.Consumer,N=w.Provider,y=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isLoggedIn:!1,isLoading:!0,user:null,isDark:!1},t.signup=function(e,n,s,o,i){O.signup(e,n,s,o,i).then((function(e){return t.setState({isLoggedIn:!0,user:e})})).catch((function(e){t.setState({isLoggedIn:!1,user:null})}))},t.login=function(e,n){O.login(e,n).then((function(e){return t.setState({isLoggedIn:!0,user:e})})).catch((function(e){t.setState({isLoggedIn:!1,user:null})}))},t.logout=function(){O.logout().then((function(){return t.setState({isLoggedIn:!1,user:null})})).catch((function(t){return console.log(t)}))},t.me=function(){console.log("me called"),O.me().then((function(e){t.setState({user:e})})).catch((function(t){console.log(t)}))},t.toggleTheme=function(){var e="";e=t.state.isDark?"light":"dark",x.darkView(e).then((function(e){console.log(e),t.setState({isDark:!t.state.isDark})})).catch((function(t){console.log(t)}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;O.me().then((function(e){return t.setState({isLoggedIn:!0,user:e,isLoading:!1,isDark:e.darkMode})})).catch((function(e){return t.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var t=this.state,e=t.isDark,n=t.isLoggedIn,o=t.isLoading,i=t.user,a=this.toggleTheme,c=this.signup,r=this.login,l=this.logout,u=this.me;return o?Object(s.jsx)("p",{children:"Loading"}):Object(s.jsx)(N,{value:{isDark:e,isLoggedIn:n,isLoading:o,user:i,signup:c,login:r,logout:l,me:u,toggleTheme:a},children:this.props.children})}}]),n}(i.a.Component),S=function(t){return function(e){Object(h.a)(o,e);var n=Object(d.a)(o);function o(){return Object(l.a)(this,o),n.apply(this,arguments)}return Object(u.a)(o,[{key:"render",value:function(){var e=this;return Object(s.jsx)(k,{children:function(n){var o=n.isLoggedIn,i=n.isDark,a=n.isLoading,c=n.user,r=n.signup,l=n.login,u=n.logout,h=n.me,d=n.toggleTheme;return Object(s.jsx)(t,Object(j.a)(Object(j.a)({},e.props),{},{isDark:i,isLoggedIn:o,isLoading:a,user:c,signup:r,login:l,logout:u,me:h,toggleTheme:d}))}})}}]),o}(i.a.Component)},C=n(87),L=n.n(C),P=n(86),D=n.n(P),I=n(85),_=n.n(I),F=n(84),M=n.n(F),A=(n(33),g()("https://social-developer-platform.herokuapp.com")),U=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={newMessages:0},t.startSocket=function(){t.props.user.conversations.forEach((function(e){A.emit("join",{room:e._id,user:t.props.user._id},(function(t){t&&console.log(t)})),A.on("message",(function(e){console.log("socket called");var n=t.state.newMessages;n++,t.setState({newMessages:n})}))}))},t.getMessageNotification=function(){var e=t.props.user.conversations,n=t.state.newMessages/e.length;return console.log(n),n},t.setNotificationsZero=function(){t.setState({newMessages:0})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.props.user&&this.startSocket()}},{key:"render",value:function(){return Object(s.jsx)("nav",{className:"navbar",children:this.props.isLoggedIn?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(r.c,{className:"btn ",activeClassName:"nav-link",to:"/private",children:Object(s.jsx)(M.a,{})}),Object(s.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/search",children:Object(s.jsx)(_.a,{})}),Object(s.jsx)(r.c,{className:"btn",activeClassName:"nav-link",to:"/profile/".concat(this.props.user._id),children:Object(s.jsx)(D.a,{})}),Object(s.jsxs)(r.c,{className:"btn",activeClassName:"nav-link",to:"/conversations",onClick:this.setNotificationsZero,children:[Object(s.jsx)(L.a,{}),0===this.getMessageNotification()?null:this.getMessageNotification()]})]}):Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(r.c,{to:"/login",children:[Object(s.jsx)("button",{className:"button btn nav-home-btn",activeClassName:"nav-link",children:"Login"})," "]}),Object(s.jsx)("br",{}),Object(s.jsxs)(r.c,{to:"/signup",children:[Object(s.jsx)("button",{className:"button nav-home-btn",activeClassName:"nav-link",children:"Sign Up"})," "]})]})})}}]),n}(o.Component));var B=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("img",{src:"/logo.png"}),Object(s.jsx)("section",{id:"home",children:Object(s.jsx)("p",{children:"Love Code? Share your thoughts, explore new ideas and find others like you!"})})]})},z=n(12),E=n(8),T=n(9);function W(){var t=Object(E.a)(["\n    width:100%;\n  background-color: #f2f2f2;\n  height: auto;\n  padding-bottom:200px;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:10px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px auto;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  div{\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n  }\n  input {\n    margin: 5px auto;\n    width:70%;\n"]);return W=function(){return t},t}function R(){var t=Object(E.a)(["\n  ","\n"]);return R=function(){return t},t}function q(){var t=Object(E.a)(["\n    width:100%;\n  background-color: #f2f2f2;\n  height: 100%;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:20px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px 0;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  input {\n    margin: 20px auto;\n    width:70%;\n"]);return q=function(){return t},t}function J(){var t=Object(E.a)(["\n  ","\n"]);return J=function(){return t},t}var V=T.b.div(J(),(function(){return Object(T.a)(q())})),Z=T.b.div(R(),(function(){return Object(T.a)(W())})),G=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={firstName:"",lastName:"",image:"",email:"",password:""},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state,s=n.firstName,o=n.lastName,i=n.image,a=n.email,c=n.password;t.props.signup(s,o,i,a,c)},t.handleChange=function(e){var n=e.target,s=n.name,o=n.value;t.setState(Object(z.a)({},s,o))},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var n=e.target.files[0],s=new FormData;s.append("image",n),f.a.post("".concat("https://social-developer-platform.herokuapp.com","/auth/upload"),s,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({image:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.firstName,n=t.lastName,o=t.image,i=t.email,a=t.password;return Object(s.jsxs)(Z,{children:[Object(s.jsx)("h1",{children:"Sign Up"}),Object(s.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(s.jsx)("label",{children:"Profile Pic"}),Object(s.jsx)("input",{className:"input is-primary",name:"image",type:"file",onChange:this.handleFileUpload}),Object(s.jsx)("span",{children:Object(s.jsx)("img",{style:{width:"100px"},src:o&&o,alt:""})}),Object(s.jsx)("label",{children:"First Name:"}),Object(s.jsx)("input",{className:"input is-primary",type:"text",name:"firstName",value:e,onChange:this.handleChange}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Last Name:"}),Object(s.jsx)("input",{className:"input is-primary",type:"text",name:"lastName",value:n,onChange:this.handleChange}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Email:"}),Object(s.jsx)("input",{className:"input is-primary",type:"text",name:"email",value:i,onChange:this.handleChange}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{children:"Password:"}),Object(s.jsx)("input",{className:"input is-primary",type:"password",name:"password",value:a,onChange:this.handleChange}),Object(s.jsxs)("button",{className:"button is-primary is-white",type:"submit",children:[" ","Signup"," "]})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("p",{children:"Already have account?"}),Object(s.jsx)("button",{className:"signup-btn button is-link is-light",children:Object(s.jsx)(r.b,{to:"/login",children:" Login"})})]})]})}}]),n}(o.Component)),H=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={email:"",password:""},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state,s=n.email,o=n.password;t.props.login(s,o)},t.handleChange=function(e){var n=e.target,s=n.name,o=n.value;t.setState(Object(z.a)({},s,o))},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.email,n=t.password;return Object(s.jsxs)(V,{children:[Object(s.jsx)("h1",{children:"Login"}),Object(s.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(s.jsx)("label",{children:"Email:"}),Object(s.jsx)("input",{class:"input is-primary",type:"text",name:"email",value:e,onChange:this.handleChange}),Object(s.jsx)("label",{children:"Password:"}),Object(s.jsx)("input",{class:"input is-primary",type:"password",name:"password",value:n,onChange:this.handleChange}),Object(s.jsx)("button",{className:"button is-primary is-white",type:"submit",children:"Login"})]})]})}}]),n}(o.Component)),Y=n(35),K=i.a.createContext(),Q=(K.Consumer,K.Provider),X=(i.a.Component,new function t(){var e=this;Object(l.a)(this,t),this.getAllPostsByFollowedUsers=function(){return e.api.get("/api/posts")},this.getById=function(t){return e.api.get("/api/posts/".concat(t))},this.createPost=function(t,n,s){return console.log(t,n,s),e.api.post("/api/posts",{postedBy:t,postContent:n,postPhoto:s})},this.likePost=function(t){return e.api.put("/api/posts/".concat(t,"/likes"))},this.unlikePost=function(t){return e.api.put("/api/posts/".concat(t,"/unlikes"))},this.comment=function(t,n){return e.api.post("/api/posts/".concat(t,"/comment"),{commentContent:n})},this.delete=function(t){return e.api.delete("/api/posts/".concat(t,"/delete"))},this.deleteComment=function(t,n){return e.api.delete("/api/posts/".concat(t,"/comment/").concat(n))},this.api=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})});function $(){var t=Object(E.a)(["\n    width:100%;\n  background-color: rgb(68, 68, 68);\n  height:auto;\n  \n  h1 {\n    color: palevioletred;\n  }\n  .post-main{\n    background-color:rgb(80, 80, 80);\n    color: white;\n  } \n  .admin-message p{\n    color:white;\n  }\n  p {\n    color: palevioletred;\n"]);return $=function(){return t},t}function tt(){var t=Object(E.a)(["\n  ","\n"]);return tt=function(){return t},t}function et(){var t=Object(E.a)(["\n    width:100%;\n  background-color: rgb(68, 68, 68);\n  height:100%;\n  \n  h1 {\n    color: palevioletred;\n  }\n  div{\n    background-color:rgb(100, 100, 100);\n    color: white;\n  }\n  p {\n    color: white;\n"]);return et=function(){return t},t}function nt(){var t=Object(E.a)(["\n  ","\n"]);return nt=function(){return t},t}var st=T.b.div(nt(),(function(t){return t.dark&&Object(T.a)(et())})),ot=T.b.div(tt(),(function(t){return t.dark&&Object(T.a)($())})),it=n(32),at=n.n(it),ct=n(38),rt=n.n(ct),lt=(n(154),S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isliked:!1,numberOfLikes:0,numberOfComments:0,showPhoto:!1},t.countNumberOfLikes=function(){var e=t.props.post.likes.length;t.setState({numberOfLikes:e})},t.countNumberOfComments=function(){var e=t.props.post.comments.length;t.setState({numberOfComments:e})},t.handleLike=function(){t.state.isLiked||X.likePost(t.props.post._id).then((function(e){console.log(e);var n=t.state.numberOfLikes;n++,t.setState({numberOfLikes:n})})).catch((function(t){console.log(t)})),t.state.isLiked&&X.unlikePost(t.props.post._id).then((function(e){var n=t.state.numberOfLikes;n--,console.log(n),t.setState({numberOfLikes:n})})).catch((function(t){console.log(t)})),t.setState({isLiked:!t.state.isLiked})},t.outputDate=function(t){var e=new Date(t),n=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+n},t.toggleShowPicture=function(){t.setState({showPhoto:!t.state.showPhoto})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=!1;this.props.post&&this.props.post.likes.forEach((function(n){n===t.props.user._id&&(e=!0)})),this.setState({isLiked:e}),this.countNumberOfLikes(),this.countNumberOfComments()}},{key:"render",value:function(){var t=this.props.post;return this.state.isLiked&&"liked",Object(s.jsx)("div",{children:Object(s.jsx)(st,{dark:this.props.isDark,children:Object(s.jsxs)("div",{className:"post-main",children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:t.postedBy.image,alt:"user profile"})}),Object(s.jsxs)("div",{className:"post-section",children:[Object(s.jsxs)("div",{className:"post-user-info",children:[Object(s.jsxs)("div",{className:"post-user",children:[" ",t.postedBy&&t.postedBy.firstName," ",t.postedBy&&t.postedBy.lastName,"   "]}),Object(s.jsx)("div",{className:"date",children:this.outputDate(t.date)})]}),t.postPhoto?Object(s.jsx)("img",{onClick:this.toggleShowPicture,className:"post-image",style:{width:"100px"},src:t.postPhoto&&t.postPhoto,alt:""}):null,Object(s.jsxs)(r.b,{to:"/postdetails/".concat(t._id),children:[" ",Object(s.jsx)("div",{className:"post-content",children:t.postContent})]}),Object(s.jsxs)("div",{className:"post-actions",children:[" ",Object(s.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(s.jsx)(at.a,{fontSize:"small",color:"primary"}):Object(s.jsx)(at.a,{fontSize:"small",color:"disabled"})," ",Object(s.jsx)("div",{children:this.state.numberOfLikes})]}),Object(s.jsxs)("div",{className:"comment-icon",children:[Object(s.jsx)(rt.a,{}),Object(s.jsx)("div",{children:this.state.numberOfComments})]})]}),this.state.showPhoto?Object(s.jsx)("img",{onClick:this.toggleShowPicture,className:"large-img animated zoomIn",src:t.postPhoto&&t.postPhoto,alt:""}):null]})]})})})}}]),n}(o.Component)));n(155);function ut(){var t=Object(E.a)(["\n  background: transparent;\n  border-radius: 3px;\n  color: palevioletred;\n  margin: 0 1em;\n\n  animation: "," 1s linear;\n"]);return ut=function(){return t},t}function ht(){var t=Object(E.a)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return ht=function(){return t},t}var dt=Object(T.c)(ht()),pt=T.b.div(ut(),dt),jt=g()("https://social-developer-platform.herokuapp.com"),mt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={users:[],posts:[],post:"",postPhoto:"",newPosts:[]},t.handlePostsFollowedApi=function(){X.getAllPostsByFollowedUsers().then((function(e){t.setState({users:e.data}),t.orderPosts()})).catch((function(e){return t.setState({users:[]})}))},t.orderPosts=function(){console.log("orderPosts");var e=[].concat(Object(Y.a)(t.state.newPosts),Object(Y.a)(t.props.user.posts));t.state.users.forEach((function(t){e.push.apply(e,Object(Y.a)(t.posts))})),e.sort((function(t,e){return t.date>e.date?-1:t.date>e.date?1:0})),t.setState({posts:e})},t.handleInput=function(e){var n=e.target,s=n.name,o=n.value;t.setState(Object(z.a)({},s,o))},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var n=e.target.files[0],s=new FormData;s.append("image",n),f.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),s,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({postPhoto:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t.postWithSocket=function(){jt.emit("post",{},(function(){}))},t.handleSubmit=function(e){e.preventDefault(),t.postWithSocket(),X.createPost(t.props.user._id,t.state.post,t.state.postPhoto).then((function(e){console.log(e);var n=Object(Y.a)(t.state.newPosts);n.push(e.data),t.setState({postPhoto:"",post:"",newPosts:n}),t.handlePostsFollowedApi()})).catch((function(t){console.log(t)}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.handlePostsFollowedApi(),jt.emit("join-main",{user:this.props.user._id},(function(t){t&&console.log(t)})),jt.on("online",(function(t){console.log("online"),console.log(t)})),jt.on("postIncoming",(function(){console.log("new post"),t.handlePostsFollowedApi()}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"dashboard",children:Object(s.jsxs)(st,{dark:this.props.isDark,children:[Object(s.jsxs)("div",{className:"dashboard-header",children:[Object(s.jsx)("img",{src:this.props.user.image,alt:"user profile"}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("h2",{children:["Welcome ",this.props.user&&this.props.user.firstName]}),Object(s.jsx)("p",{children:"See New Posts Here!"})]})]}),Object(s.jsxs)("form",{className:"post-form",onSubmit:this.handleSubmit,children:[Object(s.jsxs)("div",{className:"post-main",children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:this.props.user.image,alt:"user profile"})}),Object(s.jsxs)("div",{className:"post-section",children:[Object(s.jsx)("div",{className:"post-user-info",children:Object(s.jsxs)("div",{className:"post-user",children:[" ",this.props.user&&this.props.user.firstName," ",this.props.user&&this.props.user.lastName,"   "]})}),""===this.state.postPhoto?null:Object(s.jsx)("span",{children:Object(s.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(s.jsx)("textarea",{className:"post",name:"post",value:this.state.post,onChange:this.handleInput,placeholder:"Share you code...",required:!0}),Object(s.jsxs)("div",{className:"post-actions",children:[Object(s.jsx)("input",{name:"postPhoto",type:"file",onChange:this.handleFileUpload}),Object(s.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Post"})," "]})]})]}),""===this.state.postPhoto?null:Object(s.jsx)("span",{children:Object(s.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})})]}),Object(s.jsx)(pt,{children:this.state.posts.map((function(t){return Object(s.jsx)(lt,{post:t},t._id)}))})]})})}}]),n}(o.Component)),ft=new function t(){var e=this;Object(l.a)(this,t),this.createConversation=function(t){return e.api.post("/api/conversations/".concat(t))},this.getConversations=function(){return e.api.get("/api/conversations")},this.getConversationOne=function(t){return e.api.get("/api/conversations/".concat(t))},this.sendMessage=function(t,n,s){return e.api.post("/api/conversations/".concat(t,"/message"),{messageContent:n,userSentToId:s})},this.messageSeen=function(t){return e.api.get("/api/conversations/".concat(t,"/message-seen"))},this.deleteMessage=function(t,n){return e.api.delete("/api/conversations/".concat(t,"/message/").concat(n))},this.api=f.a.create({baseURL:"https://social-developer-platform.herokuapp.com",withCredentials:!0})},bt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isFollowing:!1,hasConversation:!1,conversationId:"",user:{}},t.checkFollow=function(){var e=t.props.user.following,n=t.props.userSearch._id,s=!1;e.forEach((function(t){t===n&&(s=!0)})),t.setState({isFollowing:s})},t.checkConversation=function(){var e=t.props.user.conversations;console.log(e);var n=t.props.userSearch._id,s=!1;0!==e.length?(e.forEach((function(e){e.users.includes(n)&&(s=!0,t.setState({conversationId:e._id}))})),t.setState({hasConversation:s})):t.setState({hasConversation:s})},t.handleFollow=function(){x.follow(t.props.userSearch._id).then((function(e){console.log(e),t.setState({isFollowing:!0})}))},t.handleUnfollow=function(){x.unfollow(t.props.userSearch._id).then((function(e){console.log(e),t.setState({isFollowing:!1})}))},t.createConversation=function(){var e=t.props.userSearch._id;ft.createConversation(e).then((function(e){console.log(e);var n=e.data;t.setState({hasConversation:!0,conversationId:n})}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.checkFollow(),this.checkConversation()}},{key:"render",value:function(){var t=this.props.userSearch;return Object(s.jsxs)("tr",{className:"profile-link",children:[Object(s.jsx)("td",{children:Object(s.jsx)("img",{src:t.image,alt:"user profile"})}),Object(s.jsx)("td",{children:Object(s.jsxs)(r.b,{to:"/profile/".concat(t._id),children:[Object(s.jsxs)("p",{children:[t&&t.firstName," "]}),Object(s.jsx)("p",{children:t&&t.lastName})]})}),Object(s.jsx)("td",{children:this.state.isFollowing?Object(s.jsx)("button",{className:"button is-white is-light is-size-7",onClick:this.handleUnfollow,children:"Unfollow"}):Object(s.jsx)("button",{className:"button is-success is-light is-size-7",onClick:this.handleFollow,children:"Follow"})}),Object(s.jsx)("td",{children:this.state.hasConversation?Object(s.jsx)(r.b,{className:"button is-success is-light is-size-7",to:"/conversation-details/".concat(this.state.conversationId),children:"Go to chat"}):Object(s.jsx)("button",{className:"button is-white is-light is-size-7",onClick:this.createConversation,children:"Start Chat"})})]})}}]),n}(o.Component)),gt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={users:[],searchResults:[],searchInput:""},t.handleSearchResults=function(e){var n=t.state.users.filter((function(t){var n=t.firstName.toLowerCase(),s=t.lastName.toLowerCase(),o=e.toLowerCase();return!(!n.startsWith(o)&&!s.startsWith(o))}));t.setState({searchResults:n})},t.handleInput=function(e){var n=e.target,s=n.name,o=n.value;t.handleSearchResults(o),t.setState(Object(z.a)({},s,o))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),x.getAll().then((function(e){console.log(e),t.setState({users:e.data,searchResults:e.data})})).catch((function(t){console.log(t)}))}},{key:"render",value:function(){return Object(s.jsx)(st,{dark:this.props.isDark,children:Object(s.jsxs)("div",{className:"search",children:[Object(s.jsx)("h1",{children:"Search For A Fellow Developer"}),Object(s.jsx)("input",{className:"input is-primary",name:"searchInput",value:this.state.searchInput,onChange:this.handleInput,autoComplete:"off"}),""===this.state.searchInput?null:Object(s.jsx)("div",{className:"animated slideInLeft",children:Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:this.state.searchResults.map((function(t){return Object(s.jsx)(bt,{userSearch:t},t._id)}))})})})]})})}}]),n}(o.Component)),vt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={notifications:[]},t.filterNotifications=function(e){var n=t.state.notifications.filter((function(t){return e!==t._id}));t.setState({notifications:n})},t.deleteNotification=function(e){x.deleteNotification(e).then((function(n){t.filterNotifications(e),t.props.reduceNotifications()})).catch((function(t){return console.log(t)}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.setState({notifications:Object(Y.a)(this.props.notifications).reverse().slice(0,5)})}},{key:"render",value:function(){var t=this,e=this.state.notifications;return Object(s.jsx)("div",{className:"notifications-menu animated zoomIn",children:e.map((function(e){return"follow"!==e.notificationInfo?Object(s.jsxs)("div",{className:"notification-item",children:[Object(s.jsx)(r.b,{to:"/postdetails/".concat(e.post),children:Object(s.jsxs)("p",{children:[e.userActivity.firstName," ",e.userActivity.lastName," ",e.notificationInfo," your post"]})}),Object(s.jsx)("button",{className:"delete",onClick:function(){return t.deleteNotification(e._id)}})]},e._id):Object(s.jsxs)("div",{className:"notification-item",children:[Object(s.jsx)(r.b,{onClick:t.props.toggleNotifications,to:"/profile/".concat(e.userActivity._id),children:Object(s.jsxs)("p",{children:[e.userActivity.firstName," ",e.userActivity.lastName," started following you"]})}),Object(s.jsx)("button",{className:"delete",onClick:function(){return t.deleteNotification(e._id)},children:"Delete"})]},e._id)}))})}}]),n}(o.Component)),Ot=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={image:""},t.handleSubmit=function(e){e.preventDefault(),x.editPhoto(t.state.image).then((function(e){console.log(e),t.setState({image:""})})).catch((function(t){console.log(t)}))},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var n=e.target.files[0],s=new FormData;s.append("image",n),f.a.post("http://localhost:5000/api/users/upload",s,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({image:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t}return Object(u.a)(n,[{key:"render",value:function(){return console.log(this.state),Object(s.jsx)("div",{children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(s.jsx)("input",{name:"image",type:"file",onChange:this.handleFileUpload}),""===this.state.postPhoto?null:Object(s.jsx)("span",{children:Object(s.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(s.jsx)("button",{type:"submit",children:"Save Changes"})]})})}}]),n}(o.Component),xt=n(54),wt=n.n(xt),kt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={showEdit:!1,isFollowed:!1,showSettings:!1},t.toggleEdit=function(){t.setState({showEdit:!t.state.showEdit})},t.handleFollow=function(){t.state.isFollowed?t.state.isFollowed&&x.unfollow(t.props.user._id).then((function(e){console.log(e.data.following),t.setState({isFollowed:!1})})).catch((function(t){return console.log(t)})):x.follow(t.props.user._id).then((function(e){t.setState({isFollowed:!0})}))},t.checkFollow=function(){console.log(t.props),t.props.user.followers.forEach((function(e){t.props.user._id===e&&t.setState({isFollowed:!0})}))},t.toggleSettings=function(){t.setState({showSettings:!t.state.showSettings})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.checkFollow()}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"settings",children:[Object(s.jsx)("div",{onClick:this.toggleSettings,children:Object(s.jsx)(wt.a,{})}),this.state.showSettings?Object(s.jsxs)("div",{className:"settings-menu",children:[Object(s.jsx)("button",{className:"is-size-7\t button is-white",onClick:this.toggleEdit,children:"Edit Photo"}),this.state.showEdit?Object(s.jsx)(Ot,{}):null,Object(s.jsx)("button",{className:"is-size-7\t button is-white",onClick:this.props.logout,children:"Logout"}),Object(s.jsxs)("button",{className:"is-size-7\t button is-white",onClick:this.props.toggleTheme,children:["Toggle dark mode"," "]})]}):null]})}}]),n}(o.Component)),Nt=n(172),yt=n(92),St=n.n(yt);function Ct(){var t=Object(E.a)(["\n      border: 0.1rem solid #3b945e;\n      border-radius: 5px;\n    "]);return Ct=function(){return t},t}function Lt(){var t=Object(E.a)(["\n  ","\n"]);return Lt=function(){return t},t}var Pt=T.b.div(Lt(),(function(t){return t.highlight&&Object(T.a)(Ct())})),Dt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isliked:!1,showDelete:!1,numberOfLikes:0,numberOfComments:0},t.countNumberOfLikes=function(){var e=t.props.post.likes.length;t.setState({numberOfLikes:e})},t.countNumberOfComments=function(){var e=t.props.post.comments.length;t.setState({numberOfComments:e})},t.handleLike=function(){t.state.isLiked||X.likePost(t.props.post._id).then((function(e){var n=t.state.numberOfLikes;n++,console.log(n),t.setState({numberOfLikes:n})})).catch((function(t){console.log(t)})),t.state.isLiked&&X.unlikePost(t.props.post._id).then((function(e){var n=t.state.numberOfLikes;n--,console.log(n),t.setState({numberOfLikes:n})})).catch((function(t){console.log(t)})),t.setState({isLiked:!t.state.isLiked})},t.toggleDelete=function(){t.setState({showDelete:!t.state.showDelete})},t.outputDate=function(t){var e=new Date(t),n=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+n},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=!1;this.props.post&&this.props.post.likes.forEach((function(n){n===t.props.user._id&&(e=!0)})),this.setState({isLiked:e}),this.countNumberOfLikes(),this.countNumberOfComments()}},{key:"render",value:function(){var t=this,e=this.props.post;return this.state.isLiked&&"liked",Object(s.jsx)(st,{dark:this.props.isDark,children:Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"post-main",children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:e.postedBy.image,alt:"user profile"})}),Object(s.jsxs)("div",{className:"post-section",children:[Object(s.jsxs)("div",{className:"post-user-info",children:[Object(s.jsxs)("div",{className:"post-user",children:[" ",e.postedBy&&e.postedBy.firstName," ",e.postedBy&&e.postedBy.lastName,"   "]}),Object(s.jsx)("div",{className:"date",children:this.outputDate(e.date)}),Object(s.jsx)("p",{onClick:this.toggleDelete,href:"#",className:"delete-icon delete is-size-7"}),this.state.showDelete?Object(s.jsxs)("div",{children:[Object(s.jsx)("button",{className:"button is-warning is-light is-size-7",onClick:function(){return t.props.deletePost(e._id)},children:"Confirm Delete"}),Object(s.jsx)("button",{className:"button is-info is-light is-size-7",onClick:this.toggleDelete,children:"Cancel"})]}):null," "]}),Object(s.jsxs)("div",{className:"post-content",children:[e.postPhoto?Object(s.jsx)("img",{className:"post-image",style:{width:"100px"},src:e.postPhoto&&e.postPhoto,alt:""}):null,e.postContent]}),Object(s.jsxs)("div",{className:"post-actions",children:[" ",Object(s.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(s.jsx)(at.a,{fontSize:"small",color:"primary"}):Object(s.jsx)(at.a,{fontSize:"small",color:"disabled"})," ",Object(s.jsx)("div",{children:this.state.numberOfLikes})]}),Object(s.jsxs)("div",{className:"comment-icon",children:[Object(s.jsx)(rt.a,{}),Object(s.jsx)("div",{children:this.state.numberOfComments})]})]})]})]})})})}}]),n}(o.Component)),It=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={user:{},posts:[],isAdmin:!1,isFollowed:!1,showDelete:!1,userId:"",showPosts:!0,showLikes:!1,showFollowing:!1,postInput:"",postPhoto:"",showNotifications:!1,numberOfNotifications:0,newNotification:!1,showSettings:!1,following:[]},t.handlePostApi=function(e){var n=t.props.match.params.id;x.getOne(n).then((function(s){t.setState({user:s.data.user,isAdmin:s.data.isAdmin,userId:n,newNotification:s.data.user.newNotification}),e&&t.displayPosts(),t.checkFollow(),t.orderPosts(),t.setFollowing()})).catch((function(t){console.log(t)}))},t.orderPosts=function(){var e=[];t.state.user.posts.forEach((function(t){e.push(t)})),e.sort((function(t,e){return t.date>e.date?-1:t.date>e.date?1:0})),t.setState({posts:e,numberOfNotifications:t.props.user.notifications.length})},t.componentDidUpdate=function(){t.state.userId!==t.props.match.params.id&&t.handlePostApi()},t.checkFollow=function(){t.state.user.followers.forEach((function(e){t.props.user._id===e&&t.setState({isFollowed:!0})}))},t.handleFollow=function(){t.state.isFollowed?t.state.isFollowed&&x.unfollow(t.state.user._id).then((function(e){console.log(e.data.following),t.setState({isFollowed:!1})})).catch((function(t){return console.log(t)})):x.follow(t.state.user._id).then((function(e){t.setState({isFollowed:!0})}))},t.deletePost=function(e){X.delete(e).then((function(e){t.handlePostApi()})).catch((function(t){return console.log(t)}))},t.displayPosts=function(){t.handlePostApi(!1),t.setState({showPosts:!0,showLikes:!1,showFollowing:!1})},t.displayLikes=function(){t.handlePostApi(!1),t.setState({showPosts:!1,showLikes:!0,showFollowing:!1})},t.displayFollowing=function(){t.handlePostApi(!1),t.setState({showPosts:!1,showLikes:!1,showFollowing:!0})},t.handleInput=function(e){var n=e.target,s=n.name,o=n.value;t.setState(Object(z.a)({},s,o))},t.handleSubmit=function(e){e.preventDefault(),X.createPost(t.props.user._id,t.state.postInput,t.state.postPhoto).then((function(e){t.handlePostApi(),t.setState({postPhoto:"",postInput:""})})).catch((function(t){console.log(t)}))},t.toggleNotifications=function(){t.state.newNotification&&x.seenNotification().then((function(e){t.setState({newNotification:!1})})).catch((function(t){return console.log(t)})),t.setState({showNotifications:!t.state.showNotifications})},t.reduceNotifications=function(){var e=t.state.numberOfNotifications;e--,t.setState({numberOfNotifications:e})},t.toggleSettings=function(){t.setState({showSettings:!t.state.showSettings})},t.setFollowing=function(){var e=t.state.user.following,n=t.state.user,s=e.filter((function(t){return t._id!==n._id}));t.setState({following:s})},t.handleFileUpload=function(e){console.log("The file to be uploaded is: ",e.target.files);var n=e.target.files[0],s=new FormData;s.append("image",n),f.a.post("".concat("https://social-developer-platform.herokuapp.com","/api/posts/upload"),s,{withCredentials:!0}).then((function(e){console.log("response is: ",e),t.setState({postPhoto:e.data.secure_url})})).catch((function(t){console.log("Error while uploading the file: ",t)}))},t.getNumberOfFollowers=function(){return t.state.isAdmin&&t.state.isFollowed?t.state.user.following.length-1:t.state.user.following.length},t.outputDate=function(t){return new Date(t).toDateString().split(" ").slice(1,4).join(" ")},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.handlePostApi(!0)}},{key:"render",value:function(){var t=this;this.state.user;return Object(s.jsx)("div",{className:"profile",children:Object(s.jsxs)(st,{dark:this.props.isDark,children:[Object(s.jsxs)("div",{className:"profile-header",children:[Object(s.jsx)("img",{src:this.state.user.image,alt:"user profile"}),Object(s.jsxs)("div",{children:[Object(s.jsxs)("p",{children:[this.state.user.firstName," ",this.state.user.lastName]}),Object(s.jsxs)("p",{className:"join-date",children:["Joined on ",this.outputDate(this.state.user.created_at)]})]}),this.state.isAdmin?Object(s.jsx)(kt,{userProfile:this.state.user}):Object(s.jsx)("button",{className:"button is-white is-size-7",onClick:this.handleFollow,children:this.state.isFollowed?"Unfollow":"Follow"}),Object(s.jsxs)("div",{className:"notifications",children:[this.state.isAdmin?Object(s.jsxs)("div",{children:[this.state.newNotification?Object(s.jsx)("div",{onMouseEnter:this.toggleNotifications,id:"new-notification",className:"notification is-primary animated bounce",children:"You have a new notification"}):null,Object(s.jsx)("div",{onClick:this.toggleNotifications,children:Object(s.jsx)(Nt.a,{badgeContent:this.state.numberOfNotifications,color:"primary",max:10,children:Object(s.jsx)(St.a,{})})})]}):null,this.state.showNotifications?Object(s.jsx)(vt,{toggleNotifications:this.toggleNotifications,notifications:this.state.user.notifications,reduceNotifications:this.reduceNotifications}):null]})]}),Object(s.jsxs)("div",{className:"button-group",children:[Object(s.jsx)(Pt,{highlight:this.state.showPosts,children:Object(s.jsxs)("div",{className:"button is-white",onClick:this.displayPosts,children:[" ","Posts ",this.state.posts&&this.state.posts.length]})}),Object(s.jsx)(Pt,{highlight:this.state.showLikes,children:Object(s.jsxs)("div",{className:"button is-white",onClick:this.displayLikes,children:[" ","Likes ",this.state.user.likes&&this.state.user.likes.length]})}),Object(s.jsx)(Pt,{highlight:this.state.showFollowing,children:Object(s.jsxs)("div",{className:"button is-white",onClick:this.displayFollowing,children:["Following"," ",this.state.user.following&&this.state.following.length]})})]}),this.state.showPosts?Object(s.jsxs)("div",{className:"animated fadeInUp",children:[this.state.isAdmin?Object(s.jsxs)("form",{className:"post-form",onSubmit:this.handleSubmit,children:[Object(s.jsx)("textarea",{className:"post",name:"postInput",value:this.state.postInput,onChange:this.handleInput,required:!0}),Object(s.jsx)("br",{}),Object(s.jsx)("input",{name:"postPhoto",type:"file",onChange:this.handleFileUpload}),""===this.state.postPhoto?null:Object(s.jsx)("span",{children:Object(s.jsx)("img",{style:{width:"100px"},src:this.state.postPhoto&&this.state.postPhoto,alt:""})}),Object(s.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Post"})]}):null,this.state.posts&&this.state.posts.map((function(e){return Object(s.jsx)("div",{children:t.state.isAdmin?Object(s.jsx)(Dt,{post:e,deletePost:t.deletePost}):Object(s.jsx)(lt,{post:e})},e._id)}))," "]}):null,this.state.showLikes?Object(s.jsx)("div",{className:"animated fadeInUp",children:this.state.user.likes&&this.state.user.likes.map((function(t){return Object(s.jsx)(lt,{post:t},t._id)}))}):null,this.state.showFollowing?Object(s.jsx)("div",{className:"animated fadeInUp",children:0===this.state.following.length?Object(s.jsx)("h3",{children:"Not following anyone"}):Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:this.state.following.map((function(t){return Object(s.jsxs)("tr",{className:"following-link",children:[Object(s.jsx)("td",{children:Object(s.jsx)("img",{src:t.image,alt:"user profile"})}),Object(s.jsx)("td",{children:Object(s.jsx)("p",{children:Object(s.jsxs)(r.b,{to:"/profile/".concat(t._id),children:[t.firstName," ",t.lastName]})})})]},t._id)}))})})}):null]})})}}]),n}(o.Component)),_t=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={isAdmin:!1},t.handleIsAdmin=function(){var e=t.props.comment.createdBy._id,n=t.props.user._id;console.log(e,n),e===n?(console.log(!0),t.setState({isAdmin:!0})):t.setState({isAdmin:!1})},t.deleteComment=function(){var e=t.props.comment.post,n=t.props.comment._id;X.deleteComment(e,n).then((function(e){console.log("clicked"),console.log(e),t.props.getPostDetails()})).catch((function(t){console.log(t)}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.handleIsAdmin()}},{key:"render",value:function(){var t=this.props.comment;return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{className:"post-main",children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:"".concat(t.createdBy.image),alt:"user profile"})}),Object(s.jsxs)("div",{className:"post-section",children:[Object(s.jsxs)("div",{className:"post-user-info",children:[Object(s.jsxs)(r.b,{to:"/profile/".concat(t.createdBy._id),children:[" ",Object(s.jsxs)("div",{className:"post-user",children:[" ",t.createdBy.firstName," ",t.createdBy.lastName,"   "]})," "]}),Object(s.jsx)("div",{className:"date",children:this.props.outputDate(t.created_at)})]})," ",Object(s.jsxs)("div",{className:"post-content",children:[" ",t.commentContent]})]})]})})}}]),n}(o.Component)),Ft=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))).state={post:{},isLiked:!1,commentInput:"",numberOfLikes:0,numberOfComments:0,showLikes:!1},t.countNumberOfLikes=function(){var e=t.state.post.likes.length;t.setState({numberOfLikes:e})},t.countNumberOfComments=function(){var e=t.state.post.comments.length;t.setState({numberOfComments:e})},t.setLike=function(){var e=!1;t.state.post.likes.forEach((function(n){n._id===t.props.user._id&&(e=!0)})),t.setState({isLiked:e})},t.toggleLikes=function(){t.setState({showLikes:!t.state.showLikes})},t.handlePostById=function(){var e=t.props.match.params.postId;X.getById(e).then((function(e){t.setState({post:e.data}),t.setLike(),t.countNumberOfLikes(),t.countNumberOfComments()})).catch((function(t){return console.log(t)}))},t.handleLike=function(){t.state.isLiked||X.likePost(t.state.post._id).then((function(e){var n=t.state.numberOfLikes;n++,t.setState({numberOfLikes:n})})).catch((function(t){console.log(t)})),t.state.isLiked&&X.unlikePost(t.state.post._id).then((function(e){var n=t.state.numberOfLikes;n--,t.setState({numberOfLikes:n})})).catch((function(t){console.log(t)})),t.setState({isLiked:!t.state.isLiked})},t.handleInput=function(e){var n=e.target,s=n.name,o=n.value;t.setState(Object(z.a)({},s,o))},t.handleSubmit=function(e){e.preventDefault(),X.comment(t.state.post._id,t.state.commentInput).then((function(e){console.log(e.data),t.handlePostById(),t.setState({commentInput:""})}))},t.showCommentInput=function(){return Object(s.jsxs)("form",{onSubmit:t.handleSubmit,className:"post",children:[Object(s.jsx)("input",{name:"commentInput",value:t.state.commentInput,onChange:t.handleInput,autoComplete:"off"}),Object(s.jsx)("button",{className:"button is-white s-size-7",type:"submit",children:"Submit"})]})},t.handlePostLinks=function(){var e=t.state.post.postContent.split(" ");console.log(e);var n=e.map((function(t){return t.startsWith("http")||t.startsWith("https")?Object(s.jsx)("a",{href:"".concat(t),children:t}):t}));console.log(n);var o=n.join(" ");return console.log(o),Object(s.jsx)("p",{children:n})},t.outputDate=function(t){var e=new Date(t),n=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+n},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.scrollTo(0,0),this.handlePostById()}},{key:"componentWillUnmount",value:function(){console.log("unmount")}},{key:"render",value:function(){var t=this;this.state.isLiked;var e=this.state.post;return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{id:"post-details",children:[Object(s.jsxs)("div",{className:"post-main",children:[Object(s.jsx)("div",{children:Object(s.jsx)("img",{src:e.postedBy&&e.postedBy.image,alt:"user profile"})}),Object(s.jsxs)("div",{className:"post-section",children:[Object(s.jsxs)("div",{className:"post-user-info",children:[Object(s.jsxs)("div",{className:"post-user",children:[" ",e.postedBy&&e.postedBy.firstName," ",e.postedBy&&e.postedBy.lastName,"   "]}),Object(s.jsx)("div",{className:"date",children:this.outputDate(e.date)})]}),Object(s.jsxs)(r.b,{to:"/postdetails/".concat(e._id),children:[" ",Object(s.jsxs)("div",{className:"post-content",children:[" ",e.postContent]})]}),Object(s.jsx)("p",{className:"like-btn",onClick:this.toggleLikes,children:"Likes"}),Object(s.jsxs)("div",{className:"post-actions",children:[" ",Object(s.jsxs)("div",{onClick:this.handleLike,children:[this.state.isLiked?Object(s.jsx)(at.a,{fontSize:"small",color:"primary"}):Object(s.jsx)(at.a,{fontSize:"small",color:"disabled"})," ",Object(s.jsx)("div",{children:this.state.numberOfLikes})]}),Object(s.jsxs)("div",{className:"comment-icon",children:[Object(s.jsx)(rt.a,{}),Object(s.jsx)("div",{children:this.state.numberOfComments})]})]})]})]}),Object(s.jsxs)("section",{className:"comments",children:[e.comments&&e.comments.map((function(e){return Object(s.jsx)(_t,{outputDate:t.outputDate,getPostDetails:t.handlePostById,comment:e},e._id)})),this.showCommentInput()]}),this.state.showLikes?Object(s.jsx)("div",{className:"likes animated zoomIn",children:e.likes&&e.likes.map((function(t){return Object(s.jsxs)(r.b,{to:"/profile/".concat(t._id),children:[Object(s.jsxs)("p",{className:"like-item",children:[t.firstName," ",t.lastName]},t._id)," "]})}))}):null]})})}}]),n}(o.Component));function Mt(){var t=Object(E.a)(["\n  background-color: #f2f2f2;\nimg{\n    width:30px;\n    height:30px;\n    border-radius:50%;\n    margin:5px 10px;\n}\n  h3{\n    \n    font-size:1.2rem;\n  }\n \n  p {\n    margin-bottom:5px;\n    font-size:0.8rem;\n"]);return Mt=function(){return t},t}function At(){var t=Object(E.a)(["\n  ","\n"]);return At=function(){return t},t}var Ut=T.b.div(At(),(function(){return Object(T.a)(Mt())})),Bt=n(57),zt=n.n(Bt),Et=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={unreadMessages:0,isOnline:!1},t.outputDate=function(t){var e=new Date(t),n=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+n},t.checkOnline=function(){var e=t.props.online,n=!1,s=t.props.receiverUser._id;return e.forEach((function(t){t===s&&(n=!0)})),n},t.checkNotifications=function(){var e=t.props.user._id,n=t.props.conversation;n.notifications[0]===e&&(console.log("notications"),t.setState({unreadMessages:n.notifications.length}))},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.checkNotifications()}},{key:"render",value:function(){var t=this.props,e=t.conversation,n=t.messageArrLength,o=t.receiverUser;return Object(s.jsxs)("div",{className:"message-preview",children:[Object(s.jsx)("img",{src:"".concat(o&&o.image),alt:"profile image"}),Object(s.jsxs)("div",{className:"message-name",children:[Object(s.jsxs)("h3",{children:[o&&o.firstName," ",o&&o.lastName," ",this.checkOnline()?Object(s.jsx)(zt.a,{className:"online animated bounce"}):Object(s.jsx)(zt.a,{className:"offline"})]}),Object(s.jsxs)("div",{className:"message-info",children:[Object(s.jsxs)("div",{children:[0===this.state.unreadMessages?null:Object(s.jsx)("div",{className:"unread",children:Object(s.jsx)("p",{children:this.state.unreadMessages})}),e.messages[n]&&e.messages[n].userSent.firstName,":"," ",e.messages[n]&&e.messages[n].messageContent]}),Object(s.jsx)("p",{className:"message-date",children:this.outputDate(e.messages[n]&&e.messages[n].updated_at)})]})]})]})}}]),n}(o.Component)),Tt=g()("https://social-developer-platform.herokuapp.com"),Wt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={conversations:[],online:[]},t.getConversations=function(){ft.getConversations().then((function(e){t.setState({conversations:e.data})})).catch((function(t){console.log(t)}))},t.filterCurrentUser=function(e){return e.filter((function(e){return e._id!==t.props.user._id}))[0]},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.scrollTo(0,0),this.getConversations(),Tt.emit("join-main",{user:this.props.user._id},(function(t){t&&console.log(t)})),Tt.on("online",(function(e){var n=Object.values(e.users);t.setState({online:n})}))}},{key:"componentDidUpdate",value:function(){Tt.on("online",(function(t){}))}},{key:"componentWillUnmount",value:function(){console.log("unmount")}},{key:"render",value:function(){var t=this,e=this.state.conversations;return Object(s.jsx)(st,{dark:this.props.isDark,children:Object(s.jsxs)("div",{className:"conversation-list",children:[Object(s.jsx)("h1",{className:"subtitle is-4",children:"Conversations"}),e&&e.map((function(e){var n=t.filterCurrentUser(e.users),o=e.messages.length-1;return Object(s.jsx)("div",{children:Object(s.jsx)(r.b,{to:"/conversation-details/".concat(e._id),children:Object(s.jsx)("div",{className:"conversations",children:Object(s.jsx)(Ut,{children:Object(s.jsx)(Et,{online:t.state.online,conversation:e,messageArrLength:o,receiverUser:n})})})})},e._id)}))]})})}}]),n}(o.Component));function Rt(){var t=Object(E.a)(["\nbackground-color: #f2f2f2;\nposition:sticky;\ntop:0;\ndisplay:flex;\n jusifty-content:space-evenly;\nalign-items:center; \nwidth:100%;\nz-index:6;\n\nimg{\n  width:50px;\n  height:50px;\n  border-radius:50%;\n  margin:5px 10px;\n}\nh3{\n  margin: 0 10px;\n  font-size:1.3rem;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n"]);return Rt=function(){return t},t}function qt(){var t=Object(E.a)(["\n  ","\n"]);return qt=function(){return t},t}var Jt=T.b.div(qt(),(function(){return Object(T.a)(Rt())})),Vt=g()("https://social-developer-platform.herokuapp.com"),Zt=S(function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(l.a)(this,n);for(var s=arguments.length,o=new Array(s),i=0;i<s;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))).state={conversation:{},messages:[],sendMessage:"",intervalId:"",userContact:{},newMessages:[],showDelete:!1},t.startSocket=function(){Vt.emit("join",{room:t.state.conversation._id,user:t.props.user._id},(function(t){t&&console.log(t)})),Vt.on("message",(function(e){console.log("socket called"),t.getConversation(),t.seenMessage()})),Vt.on("online",(function(t){console.log("online")})),t.sendDelete()},t.seenMessage=function(){var e=t.props.match.params.conversationId;ft.messageSeen(e).then((function(t){})).catch((function(t){return console.log(t)}))},t.getConversation=function(){var e=t.props.match.params.conversationId;ft.getConversationOne(e).then((function(e){t.setState({conversation:e.data}),t.getMessages(),t.filterCurrentUser()}))},t.getConversationMount=function(){var e=t.props.match.params.conversationId;ft.getConversationOne(e).then((function(e){t.setState({conversation:e.data}),t.getMessages(),t.filterCurrentUser(),t.startSocket()}))},t.sendMessage=function(){var e=t.state.sendMessage,n=t.state.conversation._id;console.log(e);var s={conversationId:n,message:e};e&&Vt.emit("sendMessage",s,(function(){console.log("MessageSent"),t.setState({sendMessage:""})}))},t.sendDelete=function(){var e={conversationId:t.state.conversation._id,message:""};Vt.emit("sendMessage",e,(function(){console.log("MessageSent"),t.setState({sendMessage:""})}))},t.getMessages=function(){var e=t.state.conversation.messages;e.length!==t.state.messages.length&&(t.setState({messages:e}),t.scrollToBottom())},t.handleInput=function(e){var n=e.target,s=n.name,o=n.value;t.setState(Object(z.a)({},s,o))},t.handleSubmit=function(e){e.preventDefault();var n=t.props.match.params.conversationId,s=t.state.sendMessage,o=t.state.userContact._id;console.log(o),ft.sendMessage(n,s,o).then((function(e){t.getConversation(),t.sendMessage()})).catch((function(t){return console.log(t)}))},t.filterCurrentUser=function(){var e=t.state.conversation.users.filter((function(e){return e._id!==t.props.user._id}));return t.setState({userContact:e[0]}),e[0]},t.isAdmin=function(e){return e===t.props.user._id},t.setTimerFromApiCall=function(){var e=setInterval((function(){t.getConversation()}),5e3);t.setState({intervalId:e})},t.outputDate=function(t){var e=new Date(t),n=e.toDateString().split(" ").slice(0,3).join(" ");return e.toLocaleString().split(" ").reverse()[0].slice(0,5)+" "+n},t.checkSeen=function(){var e=t.state.conversation.notifications,n=t.state.conversation.messages,s=t.state.conversation.messages.length-1;return 0===e.length&&0!==n.length&&n[s].userSent._id===t.props.user._id?"Seen":null},t.deleteMessage=function(e){var n=t.props.match.params.conversationId;ft.deleteMessage(n,e).then((function(e){t.getConversation(),t.sendDelete()})).catch((function(t){console.log(t)}))},t.toggleDelete=function(){t.setState({showDelete:!t.state.showDelete})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getConversationMount(),this.seenMessage(),this.scrollToBottom()}},{key:"componentDidUpdate",value:function(){this.state.newMessages}},{key:"scrollToBottom",value:function(){this.el.scrollIntoView({behavior:"smooth"})}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.intervalId),this.seenMessage()}},{key:"render",value:function(){var t=this,e="";return this.state.showDelete&&(e="slide-message"),Object(s.jsx)("div",{className:"conversation-details",children:Object(s.jsxs)(ot,{dark:this.props.isDark,className:"isMessages",children:[Object(s.jsxs)(Jt,{children:[Object(s.jsx)("img",{src:this.state.userContact.image}),Object(s.jsxs)("h3",{children:[this.state.userContact.firstName," ",this.state.userContact.lastName]})]}),this.state.messages.map((function(n){return Object(s.jsx)("div",{children:t.isAdmin(n.userSent._id)?Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{onClick:t.toggleDelete,className:"admin-message ".concat(e),children:[Object(s.jsx)("div",{children:t.outputDate(n.created_at)}),Object(s.jsx)("p",{children:Object(s.jsxs)("p",{children:[n.userSent.firstName,": ",n.messageContent," "]})})]}),t.state.showDelete?Object(s.jsx)("button",{className:"delete delete-message",onClick:function(){return t.deleteMessage(n._id)}}):null]}):Object(s.jsxs)("div",{className:"user-message",children:[Object(s.jsx)("div",{children:t.outputDate(n.created_at)}),Object(s.jsxs)("p",{children:[n.userSent.firstName,": ",n.messageContent]})]})},n._id)})),Object(s.jsx)("div",{className:"seen",children:this.state.conversation.notifications&&this.checkSeen()}),Object(s.jsx)("div",{ref:function(e){t.el=e}}),Object(s.jsxs)("form",{onSubmit:this.handleSubmit,className:"send-message",children:[Object(s.jsx)("input",{className:"input is-info",value:this.state.sendMessage,name:"sendMessage",onChange:this.handleInput,required:!0}),Object(s.jsx)("button",{className:"button",type:"submit",children:"Send"})]})]})})}}]),n}(o.Component));var Gt=S((function(t){var e=t.isLoggedIn,n=t.isLoading,o=t.component,i=t.exact,a=t.path;return n?"Loading":Object(s.jsx)(p.b,{exact:i,path:a,render:function(t){return e?Object(s.jsx)(p.a,{to:"/private"}):e?void 0:Object(s.jsx)(o,Object(j.a)({},t))}})}));var Ht=S((function(t){var e=t.isLoggedIn,n=t.isLoading,o=t.component,i=t.exact,a=t.path;return n?"Loading":Object(s.jsx)(p.b,{exact:i,path:a,render:function(t){return e?e?Object(s.jsx)(o,Object(j.a)({},t)):void 0:Object(s.jsx)(p.a,{to:"/login"})}})})),Yt=function(t){Object(h.a)(n,t);var e=Object(d.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return console.log(window.innerWidth<1023),Object(s.jsxs)("div",{className:"container",children:[window.innerWidth>1023?Object(s.jsx)(U,{}):null,Object(s.jsxs)(p.d,{children:[Object(s.jsx)(p.b,{exact:!0,path:"/",component:B}),Object(s.jsx)(Gt,{exact:!0,path:"/signup",component:G}),Object(s.jsx)(Gt,{exact:!0,path:"/login",component:H}),Object(s.jsx)(Ht,{exact:!0,path:"/private",component:mt}),Object(s.jsx)(Ht,{exact:!0,path:"/search",component:gt}),Object(s.jsx)(Ht,{exact:!0,path:"/profile/:id",component:It}),Object(s.jsx)(Ht,{exact:!0,path:"/postdetails/:postId",component:Ft}),Object(s.jsx)(Ht,{exact:!0,path:"/conversations",component:Wt}),Object(s.jsx)(Ht,{exact:!0,path:"/conversation-details/:conversationId",component:Zt})]}),Object(s.jsx)("div",{id:"nav-space"}),window.innerWidth<1023?Object(s.jsx)(U,{}):null]})}}]),n}(o.Component);c.a.render(Object(s.jsx)(r.a,{children:Object(s.jsx)(y,{children:Object(s.jsx)(Yt,{})})}),document.getElementById("root"))},99:function(t,e,n){}},[[156,1,2]]]);
//# sourceMappingURL=main.dae2b3ec.chunk.js.map