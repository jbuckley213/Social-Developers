{"version":3,"sources":["lib/auth-service.js","lib/user-service.js","context/auth-context.js","components/Navbar.js","pages/Home.js","styles/login.js","pages/Signup.js","pages/Login.js","context/theme-context.js","lib/post-service.js","styles/themes.js","components/Posts/Post.js","components/PostInput/PostInput.js","styles/fade.js","pages/Private.js","lib/conversation-service.js","components/SeachResult/SearchResult.js","pages/Search.js","components/Notifications/Notifications.js","components/EditProfile/EditProfile.js","components/Settings/Settings.js","styles/profile-button.js","components/UserPost/UserPost.js","pages/Profile.js","components/Comment/Comment.js","styles/likeitem.js","pages/PostDetails.js","styles/message-preview.js","components/ConversationListItem/ConversationListItem.js","pages/ConversationList.js","styles/message-header.js","pages/ConversationDetails.js","components/SideNavbar.js","components/AnonRoute.js","components/PrivateRoute.js","App.js","index.js"],"names":["socket","io","process","authService","this","auth","axios","create","baseURL","withCredentials","firstName","lastName","image","email","password","console","log","post","then","response","data","off","get","userService","getAll","api","getOne","id","follow","put","unfollow","deleteNotification","notificationId","seenNotification","editPhoto","darkView","darkMode","React","createContext","Consumer","Provider","AuthProvider","state","isLoggedIn","isLoading","user","isDark","signup","setState","catch","err","login","logout","me","toggleTheme","mode","apiResponse","value","props","children","Component","withAuth","WrappedComponent","newMessages","newNotification","startSocket","conversations","forEach","conversation","emit","room","_id","error","on","message","userId","userLiked","getMessageNotification","length","notification","getMessageUnread","totalUnreadMessages","reduce","total","notifications","setMessagesZero","setNotificationsZero","className","activeClassName","to","onClick","Badge","badgeContent","color","max","Home","src","AuthStyle","styled","div","css","SignUpStyle","handleFormSubmit","event","preventDefault","handleChange","target","name","handleFileUpload","e","files","file","uploadData","FormData","append","secure_url","onSubmit","type","onChange","style","width","alt","class","postService","getAllPostsByFollowedUsers","getById","postId","createPost","postedBy","postContent","postPhoto","likePost","unlikePost","comment","commentContent","delete","deleteComment","commentId","Theme","dark","ThemeConversation","isliked","numberOfLikes","numberOfComments","showPhoto","countNumberOfLikes","likes","countNumberOfComments","comments","socketLike","handleLike","isLiked","postLiked","postUnliked","outputDate","dateString","date","Date","day","toDateString","split","slice","join","toLocaleString","reverse","toggleShowPicture","likeId","fontSize","handleInput","handleSubmit","placeholder","required","fadeIn","keyframes","Fade","users","posts","newPosts","handlePostsFollowedApi","orderPosts","postsArr","push","sort","a","b","postWithSocket","createdPost","window","scrollTo","map","createConversation","getConversations","getConversationOne","conversationId","sendMessage","messageContent","userSentToId","messageSeen","deleteMessage","messageId","isFollowing","hasConversation","checkFollow","currentUserFollowing","following","userSearchId","userSearch","checkConversation","currentUserConversations","includes","handleFollow","UserService","handleUnfollow","conversationService","searchResults","searchInput","handleSearchResults","filteredUsers","filter","lowercaseFirstName","toLowerCase","lowercaseLastName","lowercaseSearch","startsWith","autoComplete","filterNotifications","filteredNotifications","reduceNotifications","notificationInfo","userActivity","toggleNotifications","EditProfile","showEdit","isFollowed","showSettings","toggleEdit","followers","userFollowing","toggleSettings","ProfileButton","highlight","showDelete","toggleDelete","href","deletePost","isAdmin","showPosts","showLikes","showFollowing","postInput","showNotifications","numberOfNotifications","handlePostApi","mount","profileId","match","params","displayPosts","setFollowing","componentDidUpdate","displayLikes","displayFollowing","userProfile","filteredFollowing","getNumberOfFollowers","created_at","onMouseEnter","UserPost","handleIsAdmin","createdById","createdBy","currentUserId","getPostDetails","LikeItem","commentInput","setLike","toggleLikes","handlePostById","socketComment","showCommentInput","handlePostLinks","postContentWithLinkSplit","word","postContentWithLink","MessagePreview","unreadMessages","isOnline","checkOnline","onlineArr","online","receiverUserId","receiverUser","onlineUser","checkNotifications","messageArrLength","messages","userSent","updated_at","filterCurrentUser","userArr","userIdArr","Object","values","MessageHeader","intervalId","userContact","getConversation","seenMessage","sendDelete","getMessages","getConversationMount","sendObj","scrollToBottom","userContactId","filteredUserArr","setTimerFromApiCall","setInterval","checkSeen","notificationsArr","messagesArr","lastMessage","el","scrollIntoView","behavior","clearInterval","classes","ref","routeProps","ComponentToShow","component","exact","path","render","App","innerWidth","Signup","Login","Private","Search","Profile","PostDetails","ConversationList","ConversationDetails","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.83a2e369.chunk.js","sourcesContent":["import axios from \"axios\";\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass AuthService {\n  constructor() {\n    this.auth = axios.create({\n      baseURL: process.env.REACT_APP_API_URL,\n      withCredentials: true,\n    });\n  }\n\n  signup(firstName, lastName, image, email, password) {\n    console.log(firstName, lastName, image, email, password);\n\n    const pr = this.auth\n      .post(\"/auth/signup\", { firstName, lastName, image, email, password })\n      .then((response) => response.data);\n    // .then(({ data }) => data); // Shorter way of `.then((response) => response.data);`\n\n    return pr;\n  }\n\n  login(email, password) {\n    const pr = this.auth\n      .post(\"/auth/login\", { email, password })\n      .then((response) => response.data);\n\n    return pr;\n  }\n\n  logout() {\n    socket.off();\n\n    const pr = this.auth.get(\"/auth/logout\").then((response) => response.data);\n\n    return pr;\n  }\n\n  me() {\n    const pr = this.auth.get(\"/auth/me\").then((response) => response.data);\n\n    return pr;\n  }\n}\n\nconst authService = new AuthService();\n\nexport default authService;\n\n// Service is a set of methods abstracted and placed into a class, out of which we create one instance.\n// In the above case, all axios request calls are abstracted into methods.\n","import axios from \"axios\";\n\nclass UserService {\n  constructor() {\n    // this.api  is a reusable base of the request containing the base url (baseURL)\n    // of the API and the options ( `withCredentials: true` )\n    this.api = axios.create({\n      baseURL: process.env.REACT_APP_API_URL,\n      withCredentials: true,\n    });\n  }\n\n  getAll = () => {\n    const pr = this.api.get(\"/api/users\");\n\n    return pr;\n  };\n\n  getOne = (id) => {\n    const pr = this.api.get(`/api/users/${id}`);\n    return pr;\n  };\n\n  follow = (id) => {\n    const pr = this.api.put(`/api/users/${id}/follow`);\n    return pr;\n  };\n\n  unfollow = (id) => {\n    const pr = this.api.put(`/api/users/${id}/unfollow`);\n    return pr;\n  };\n\n  deleteNotification = (notificationId) => {\n    const pr = this.api.put(`/api/users/notifications/${notificationId}`);\n    return pr;\n  };\n\n  seenNotification = () => {\n    const pr = this.api.get(\"/api/users/notifications/seen\");\n    return pr;\n  };\n\n  editPhoto = (image) => {\n    console.log(image);\n    const pr = this.api.post(\"/api/users/edit\", { image });\n    return pr;\n  };\n\n  darkView = (darkMode) => {\n    const pr = this.api.post(\"/api/users/dark-mode\", { darkMode });\n    return pr;\n  };\n}\n\nconst userService = new UserService();\n\nexport default userService;\n","import React from \"react\";\nimport authService from \"./../lib/auth-service\";\nimport userService from \"./../lib/user-service\";\n\nconst { Consumer, Provider } = React.createContext();\n\nclass AuthProvider extends React.Component {\n  state = {\n    isLoggedIn: false,\n    isLoading: true,\n    user: null,\n    isDark: false,\n  };\n\n  componentDidMount() {\n    authService\n      .me()\n      .then((user) =>\n        this.setState({\n          isLoggedIn: true,\n          user: user,\n          isLoading: false,\n          isDark: user.darkMode,\n        })\n      )\n      .catch((err) =>\n        this.setState({ isLoggedIn: false, user: null, isLoading: false })\n      );\n  }\n\n  signup = (firstName, lastName, image, email, password) => {\n    authService\n      .signup(firstName, lastName, image, email, password)\n      .then((user) => this.setState({ isLoggedIn: true, user }))\n      .catch((err) => {\n        this.setState({ isLoggedIn: false, user: null });\n      });\n  };\n\n  login = (email, password) => {\n    authService\n      .login(email, password)\n      .then((user) => this.setState({ isLoggedIn: true, user }))\n      .catch((err) => {\n        this.setState({ isLoggedIn: false, user: null });\n      });\n  };\n\n  logout = () => {\n    authService\n      .logout()\n      .then(() => this.setState({ isLoggedIn: false, user: null }))\n      .catch((err) => console.log(err));\n  };\n\n  me = () => {\n    console.log(\"me called\");\n    authService\n      .me()\n      .then((user) => {\n        this.setState({ user });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  toggleTheme = () => {\n    const isDark = this.state.isDark;\n    let mode = \"\";\n    if (isDark) {\n      mode = \"light\";\n    } else {\n      mode = \"dark\";\n    }\n\n    userService\n      .darkView(mode)\n      .then((apiResponse) => {\n        console.log(apiResponse);\n        this.setState({ isDark: !this.state.isDark });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  render() {\n    const { isDark, isLoggedIn, isLoading, user } = this.state;\n    const { toggleTheme, signup, login, logout, me } = this;\n\n    if (isLoading) return <p>Loading</p>;\n\n    return (\n      <Provider\n        value={{\n          isDark,\n          isLoggedIn,\n          isLoading,\n          user,\n          signup,\n          login,\n          logout,\n          me,\n          toggleTheme,\n        }}\n      >\n        {this.props.children}\n      </Provider>\n    );\n  }\n}\n\n// HOC that converts regular component into a Consumer\nconst withAuth = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      return (\n        <Consumer>\n          {(value) => {\n            const {\n              isLoggedIn,\n              isDark,\n              isLoading,\n              user,\n              signup,\n              login,\n              logout,\n              me,\n              toggleTheme,\n            } = value;\n\n            return (\n              <WrappedComponent\n                {...this.props}\n                isDark={isDark}\n                isLoggedIn={isLoggedIn}\n                isLoading={isLoading}\n                user={user}\n                signup={signup}\n                login={login}\n                logout={logout}\n                me={me}\n                toggleTheme={toggleTheme}\n              />\n            );\n          }}\n        </Consumer>\n      );\n    }\n  };\n};\n\nexport { AuthProvider, withAuth };\n","import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { withAuth } from \"./../context/auth-context\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport Badge from \"@material-ui/core/Badge\";\n\nimport \"bulma/css/bulma.css\";\n\nimport io from \"socket.io-client\";\nimport userService from \"../lib/user-service\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass Navbar extends Component {\n  state = {\n    newMessages: 0,\n    newNotification: 0,\n  };\n  componentDidMount() {\n    if (this.props.user) {\n      this.startSocket();\n      this.getMessageUnread();\n    }\n  }\n\n  startSocket = () => {\n    const conversations = this.props.user.conversations;\n\n    conversations.forEach((conversation) => {\n      socket.emit(\n        \"join\",\n        { room: conversation._id, user: this.props.user._id },\n        (error) => {\n          if (error) {\n            console.log(error);\n          }\n        }\n      );\n\n      socket.on(\"message\", (message) => {\n        // let newMessages = this.state.newMessages;\n        // newMessages++;\n        // this.setState({ newMessages });\n      });\n    });\n\n    socket.on(\"notification\", (response) => {\n      const userId = response.userId.userId;\n      const userLiked = response.userId.userLiked;\n      console.log(userLiked);\n      if (userId === this.props.user._id && userLiked !== this.props.user._id) {\n        let newNotification = this.state.newNotification;\n        newNotification++;\n        this.setState({ newNotification });\n      }\n    });\n  };\n\n  getMessageNotification = () => {\n    const conversations = this.props.user.conversations;\n    if (conversations.length === 0) {\n      return 0;\n    }\n    const notification = this.state.newMessages / conversations.length;\n    console.log(notification);\n\n    return notification;\n  };\n\n  getMessageUnread = () => {\n    userService.getOne(this.props.user._id).then((apiResponse) => {\n      const conversations = apiResponse.data.user.conversations;\n      console.log(apiResponse.data);\n      const totalUnreadMessages = conversations.reduce(\n        (total, conversation) => {\n          console.log(conversations.notifications);\n          return (total += conversation.notifications.length);\n        },\n        0\n      );\n      this.setState({ newMessages: totalUnreadMessages });\n    });\n  };\n\n  setMessagesZero = () => {\n    this.setState({ newMessages: 0 });\n  };\n  setNotificationsZero = () => {\n    this.setState({ newNotification: 0 });\n  };\n\n  render() {\n    // const { user, logout, isLoggedin } = this.props;\n    return (\n      <nav className=\"navbar\">\n        {this.props.isLoggedIn ? (\n          <>\n            <NavLink\n              className=\"btn \"\n              activeClassName=\"nav-link\"\n              to={\"/private\"}\n            >\n              <HomeIcon />\n            </NavLink>\n            <NavLink className=\"btn\" activeClassName=\"nav-link\" to=\"/search\">\n              <SearchIcon />\n            </NavLink>\n            <NavLink\n              className=\"btn\"\n              activeClassName=\"nav-link\"\n              to={`/profile/${this.props.user._id}`}\n              onClick={this.setNotificationsZero}\n            >\n              <Badge\n                badgeContent={this.state.newNotification}\n                color=\"primary\"\n                max={10}\n              >\n                <PersonIcon />\n              </Badge>\n              {/* {this.state.newNotification === 0\n                ? null\n                : this.state.newNotification} */}\n            </NavLink>\n            <NavLink\n              className=\"btn\"\n              activeClassName=\"nav-link\"\n              to={\"/conversations\"}\n              onClick={this.setMessagesZero}\n            >\n              <Badge\n                // badgeContent={this.getMessageNotification()}\n                color=\"primary\"\n                max={10}\n              >\n                <ChatIcon />\n              </Badge>\n            </NavLink>\n          </>\n        ) : (\n          <>\n            <NavLink to=\"/login\">\n              <button\n                className=\"button btn nav-home-btn\"\n                activeClassName=\"nav-link\"\n              >\n                Login\n              </button>{\" \"}\n            </NavLink>\n            <br />\n            <NavLink to=\"/signup\">\n              <button\n                className=\"button nav-home-btn\"\n                activeClassName=\"nav-link\"\n              >\n                Sign Up\n              </button>{\" \"}\n            </NavLink>\n          </>\n        )}\n      </nav>\n    );\n  }\n}\n\nexport default withAuth(Navbar);\n","import React from \"react\";\n\nfunction Home() {\n  return (\n    <div>\n      <img src=\"/logo.png\" />\n      <section id=\"home\">\n        <p>\n          Love Code? Share your thoughts, explore new ideas and find others like\n          you!\n        </p>\n      </section>\n    </div>\n  );\n}\n\nexport default Home;\n","import styled, { css } from \"styled-components\";\n\nexport const AuthStyle = styled.div`\n  ${() =>\n    css`\n    width:100%;\n  background-color: #f2f2f2;\n  height: 100%;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:20px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px 0;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  input {\n    margin: 20px auto;\n    width:70%;\n`}\n`;\n\nexport const SignUpStyle = styled.div`\n  ${() =>\n    css`\n    width:100%;\n  background-color: #f2f2f2;\n  height: auto;\n  padding-bottom:200px;\n  form{\n      display:flex;\n      flex-direction:column;\n      align-items:center;\n      margin:10px 0\n  }\n  h1 {\n    text-align:center;\n    padding: 20px 0 10px 0;\n    font-size:2rem;\n    margin:0 auto;\n    width:80%;\n    border-bottom: 0.1rem solid  #3b945e;\n  }\n  button{\n      width:50%;\n      margin: 20px auto;\n  }\n  p{\n    margin: 0 auto;\n   text-align:center;\n  }\n  div{\n    display:flex;\n    flex-direction:column;\n    align-items:center;\n  }\n  input {\n    margin: 5px auto;\n    width:70%;\n`}\n`;\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport { Link } from \"react-router-dom\";\nimport { withAuth } from \"./../context/auth-context\";\nimport { SignUpStyle } from \"./../styles/login\";\n// import userService from \"./../lib/user-service\";\n\nclass Signup extends Component {\n  state = { firstName: \"\", lastName: \"\", image: \"\", email: \"\", password: \"\" };\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const { firstName, lastName, image, email, password } = this.state;\n    this.props.signup(firstName, lastName, image, email, password);\n  };\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleFileUpload = (e) => {\n    console.log(\"The file to be uploaded is: \", e.target.files);\n    const file = e.target.files[0];\n\n    const uploadData = new FormData();\n    // image => this name has to be the same as in the model since we pass\n    // req.body to .create() method when creating a new project in '/api/projects' POST route\n    uploadData.append(\"image\", file);\n\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/auth/upload`, uploadData, {\n        withCredentials: true,\n      })\n      .then((response) => {\n        console.log(\"response is: \", response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state\n        this.setState({ image: response.data.secure_url });\n      })\n      .catch((err) => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  };\n\n  render() {\n    const { firstName, lastName, image, email, password } = this.state;\n    return (\n      <SignUpStyle>\n        <h1>Sign Up</h1>\n\n        <form onSubmit={this.handleFormSubmit}>\n          <label>Profile Pic</label>\n          <input\n            className=\"input is-primary\"\n            name=\"image\"\n            type=\"file\"\n            onChange={this.handleFileUpload}\n          ></input>\n          <span>\n            <img style={{ width: \"100px\" }} src={image && image} alt=\"\"></img>\n          </span>\n\n          <label>First Name:</label>\n          <input\n            className=\"input is-primary\"\n            type=\"text\"\n            name=\"firstName\"\n            value={firstName}\n            onChange={this.handleChange}\n          />\n          <br />\n          <label>Last Name:</label>\n          <input\n            className=\"input is-primary\"\n            type=\"text\"\n            name=\"lastName\"\n            value={lastName}\n            onChange={this.handleChange}\n          />\n          <br />\n          <label>Email:</label>\n          <input\n            className=\"input is-primary\"\n            type=\"text\"\n            name=\"email\"\n            value={email}\n            onChange={this.handleChange}\n          />\n          <br />\n          <label>Password:</label>\n          <input\n            className=\"input is-primary\"\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={this.handleChange}\n          />\n\n          <button className=\"button is-primary is-white\" type=\"submit\">\n            {\" \"}\n            Signup{\" \"}\n          </button>\n        </form>\n\n        <div>\n          <p>Already have account?</p>\n          <button className=\"signup-btn button is-link is-light\">\n            <Link to={\"/login\"}> Login</Link>\n          </button>\n        </div>\n      </SignUpStyle>\n    );\n  }\n}\n\nexport default withAuth(Signup);\n\n// const EnhancedSignup = withAuth(Signup)\n// export default EnhancedSignup;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../context/auth-context\";\nimport { AuthStyle } from \"./../styles/login\";\n\nclass Login extends Component {\n  state = { email: \"\", password: \"\" };\n\n  handleFormSubmit = (event) => {\n    event.preventDefault();\n    const { email, password } = this.state;\n    // Call funciton coming from AuthProvider ( via withAuth )\n    this.props.login(email, password);\n  };\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    const { email, password } = this.state;\n\n    return (\n      <AuthStyle>\n        <h1>Login</h1>\n\n        <form onSubmit={this.handleFormSubmit}>\n          <label>Email:</label>\n          <input\n            class=\"input is-primary\"\n            type=\"text\"\n            name=\"email\"\n            value={email}\n            onChange={this.handleChange}\n          />\n\n          <label>Password:</label>\n          <input\n            class=\"input is-primary\"\n            type=\"password\"\n            name=\"password\"\n            value={password}\n            onChange={this.handleChange}\n          />\n\n          <button className=\"button is-primary is-white\" type=\"submit\">\n            Login\n          </button>\n        </form>\n      </AuthStyle>\n    );\n  }\n}\n\nexport default withAuth(Login);\n","import React from \"react\";\n\nconst { Consumer, Provider } = React.createContext();\n\nclass ThemeProvider extends React.Component {\n  state = {\n    isDark: false,\n  };\n\n  toggleTheme = () => {\n    this.setState({ isDark: !this.state.isDark });\n  };\n\n  render() {\n    const { isDark } = this.state;\n    const { toggleTheme } = this;\n\n    console.log(isDark);\n\n    return (\n      <Provider value={{ isDark, toggleTheme }}>{this.props.children}</Provider>\n    );\n  }\n}\n\n// HOC that converts regular component into a Consumer\nconst withTheme = (WrappedComponent) => {\n  return class extends React.Component {\n    render() {\n      return (\n        <Consumer>\n          {(value) => {\n            console.log(value);\n            const { toggleTheme } = value;\n\n            return (\n              <WrappedComponent\n                {...this.props}\n                // isDark={isDark}\n                toggleTheme={toggleTheme}\n              />\n            );\n          }}\n        </Consumer>\n      );\n    }\n  };\n};\n\nexport { ThemeProvider, withTheme };\n","import axios from \"axios\";\n\nclass PostService {\n  constructor() {\n    // this.api  is a reusable base of the request containing the base url (baseURL)\n    // of the API and the options ( `withCredentials: true` )\n    this.api = axios.create({\n      baseURL: process.env.REACT_APP_API_URL,\n      withCredentials: true,\n    });\n  }\n\n  getAllPostsByFollowedUsers = () => {\n    const pr = this.api.get(\"/api/posts\");\n\n    return pr;\n  };\n\n  getById = (postId) => {\n    const pr = this.api.get(`/api/posts/${postId}`);\n    return pr;\n  };\n\n  createPost = (postedBy, postContent, postPhoto) => {\n    console.log(postedBy, postContent, postPhoto);\n    const pr = this.api.post(\"/api/posts\", {\n      postedBy,\n      postContent,\n      postPhoto,\n    });\n    return pr;\n  };\n\n  likePost = (postId) => {\n    const pr = this.api.put(`/api/posts/${postId}/likes`);\n    return pr;\n  };\n  unlikePost = (postId) => {\n    const pr = this.api.put(`/api/posts/${postId}/unlikes`);\n    return pr;\n  };\n\n  comment = (postId, commentContent) => {\n    const pr = this.api.post(`/api/posts/${postId}/comment`, {\n      commentContent,\n    });\n    return pr;\n  };\n  delete = (postId) => {\n    const pr = this.api.delete(`/api/posts/${postId}/delete`);\n    return pr;\n  };\n\n  deleteComment = (postId, commentId) => {\n    const pr = this.api.delete(`/api/posts/${postId}/comment/${commentId}`);\n    return pr;\n  };\n}\n\nconst postService = new PostService();\n\nexport default postService;\n","import styled, { css } from \"styled-components\";\n\nexport const Theme = styled.div`\n  ${(props) =>\n    props.dark &&\n    css`\n    width:100%;\n  background-color: rgb(0, 0, 0) ;\n  height:100%;\n  \n  h1 {\n    color: palevioletred;\n  }\n  div.post-main{\n    background-color:rgb(29, 41, 53);\n    color: white;\n  }\n  div.message-preview{\n    background-color:rgb(29, 41, 53);\n\n  }\n  div.notifications-menu{\n    background-color:rgb(29, 41, 53);\n\n  }\n  div{\n    color:white;\n  }\n  p {\n    color: white;\n`}\n`;\n\nexport const ThemeConversation = styled.div`\n  ${(props) =>\n    props.dark &&\n    css`\n    width:100%;\n    background-color:rgb(29, 41, 53);\n  height:auto;\n  \n  h1 {\n    color: palevioletred;\n  }\n  .post-main{\n    background-color:rgb(80, 80, 80);\n    color: white;\n  } \n  .admin-message p{\n    color:white;\n  }\n  p {\n    color: palevioletred;\n`}\n`;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport postService from \"./../../lib/post-service\";\nimport { Link } from \"react-router-dom\";\nimport { Theme } from \"./../../styles/themes\";\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\nimport InsertCommentIcon from \"@material-ui/icons/InsertComment\";\n\nimport \"./Post.css\";\nimport \"bulma/css/bulma.css\";\n\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass Post extends Component {\n  state = {\n    isliked: false,\n    numberOfLikes: 0,\n    numberOfComments: 0,\n    showPhoto: false,\n  };\n\n  countNumberOfLikes = () => {\n    let numberOfLikes = this.props.post.likes.length;\n    this.setState({ numberOfLikes });\n  };\n\n  countNumberOfComments = () => {\n    let numberOfComments = this.props.post.comments.length;\n    this.setState({ numberOfComments });\n  };\n\n  socketLike = () => {\n    console.log(\"sockey run\");\n    socket.emit(\n      \"notification\",\n      { userId: this.props.post.postedBy._id, userLiked: this.props.user._id },\n      () => {\n        console.log(\"socket called\");\n      }\n    );\n  };\n\n  handleLike = () => {\n    if (!this.state.isLiked) {\n      postService\n        .likePost(this.props.post._id)\n        .then((postLiked) => {\n          console.log(postLiked);\n          let numberOfLikes = this.state.numberOfLikes;\n          numberOfLikes++;\n          this.setState({ numberOfLikes: numberOfLikes });\n          this.socketLike();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n    if (this.state.isLiked) {\n      postService\n        .unlikePost(this.props.post._id)\n        .then((postUnliked) => {\n          let numberOfLikes = this.state.numberOfLikes;\n          numberOfLikes--;\n          console.log(numberOfLikes);\n          this.setState({ numberOfLikes: numberOfLikes });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n    this.setState({ isLiked: !this.state.isLiked });\n  };\n\n  // handleLike = () => {\n  //   if (!this.state.isLiked) {\n  //     let numberOfLikes = this.state.numberOfLikes;\n  //     numberOfLikes++;\n  //     this.setState({ numberOfLikes: numberOfLikes });\n  //   }\n  //   if (this.state.isLiked) {\n  //     let numberOfLikes = this.state.numberOfLikes;\n  //     numberOfLikes--;\n  //     this.setState({ numberOfLikes: numberOfLikes });\n  //   }\n  //   this.setState({ isLiked: !this.state.isLiked });\n  // };\n\n  outputDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.toDateString().split(\" \").slice(0, 3).join(\" \");\n\n    const time = date.toLocaleString().split(\" \").reverse()[0].slice(0, 5);\n    return time + \" \" + day;\n  };\n\n  componentDidMount() {\n    let isLiked = false;\n    if (this.props.post) {\n      this.props.post.likes.forEach((likeId) => {\n        if (likeId === this.props.user._id) {\n          isLiked = true;\n        }\n      });\n    }\n    this.setState({ isLiked: isLiked });\n    this.countNumberOfLikes();\n    this.countNumberOfComments();\n  }\n\n  toggleShowPicture = () => {\n    this.setState({ showPhoto: !this.state.showPhoto });\n  };\n\n  // handlePostLinks = () => {\n  //   const postContent = this.props.post.postContent.split(\" \");\n  //   console.log(postContent);\n\n  //   const postContentWithLinkSplit = postContent.map((word) => {\n  //     if (word.startsWith(\"http\") || word.startsWith(\"https\")) {\n  //       return \"<a href={`${word}`}>{word}</a>\";\n  //     } else {\n  //       return word;\n  //     }\n  //   });\n  //   console.log(postContentWithLinkSplit);\n\n  //   const postContentWithLink = postContentWithLinkSplit.join(\" \");\n\n  //   console.log(postContentWithLink);\n\n  //   return <p>{postContentWithLink}</p>;\n  // };\n\n  // componentWillUnmount() {\n  //   if (!this.state.isLiked) {\n  //     postService\n  //       .likePost(this.props.post._id)\n  //       .then((postLiked) => {\n  //         console.log(\"Post liked\");\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //       });\n  //   }\n  //   if (this.state.isLiked) {\n  //     postService\n  //       .unlikePost(this.props.post._id)\n  //       .then((postUnliked) => {\n  //         console.log(\"Post unliked\");\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //       });\n  //   }\n  // }\n  render() {\n    const { post } = this.props;\n    let classes = \"\";\n    if (this.state.isLiked) {\n      classes = \"liked\";\n    }\n    return (\n      <div>\n        {/* <div className=\"card\"> */}\n        <Theme dark={this.props.isDark}>\n          {/* <header className=\"card-header\">\n              <img src={post.postedBy.image} alt=\"user profile\" />\n              <p className=\"card-header-title\">\n                {post.postedBy && post.postedBy.firstName}{\" \"}\n                {post.postedBy && post.postedBy.lastName}\n              </p>\n              <p\n                href=\"#\"\n                className=\"card-header-icon\"\n                aria-label=\"more options\"\n              >\n                <span className=\"icon\">\n                  <i className=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n                </span>\n              </p>\n            </header> */}\n          {/* <Link to={`/postdetails/${post._id}`}> */}\n          {/* <div className=\"card-content\">\n                <div className=\"date\">{this.outputDate(post.date)}</div>\n\n                <div className=\"content\">\n                  {post.postPhoto ? (\n                    <img\n                      style={{ width: \"100px\" }}\n                      src={post.postPhoto && post.postPhoto}\n                      alt=\"\"\n                    ></img>\n                  ) : null}\n                  {/* {this.handlePostLinks()} */}\n\n          {/* {post.postContent} */}\n\n          {/* <br /> */}\n          {/* </div> */}\n          {/* </div> */}\n          {/* </Link> */}\n          {/* <footer className=\"card-footer\">\n            <div\n              onClick={this.handleLike}\n              className={`card-footer-item ${classes}`}\n            >\n              {this.state.isLiked ? (\n                <ThumbUpIcon color=\"primary\" />\n              ) : (\n                <ThumbUpIcon color=\"disabled\" />\n              )}{\" \"}\n              <div>{this.state.numberOfLikes}</div>\n            </div>\n\n            <div className=\"card-footer-item\">\n              <InsertCommentIcon />\n              <div>{this.state.numberOfComments}</div>\n            </div>\n          </footer> */}\n\n          {/* </div> */}\n          <div className=\"post-main\">\n            <div>\n              <img src={post.postedBy.image} alt=\"user profile\" />\n            </div>\n            <div className=\"post-section\">\n              <div className=\"post-user-info\">\n                <div className=\"post-user\">\n                  {\" \"}\n                  {post.postedBy && post.postedBy.firstName}{\" \"}\n                  {post.postedBy && post.postedBy.lastName}\n                  {\"   \"}\n                </div>\n                <div className=\"date\">{this.outputDate(post.date)}</div>\n              </div>\n              {post.postPhoto ? (\n                <img\n                  onClick={this.toggleShowPicture}\n                  className=\"post-image\"\n                  style={{ width: \"100px\" }}\n                  src={post.postPhoto && post.postPhoto}\n                  alt=\"\"\n                ></img>\n              ) : null}\n              <Link to={`/postdetails/${post._id}`}>\n                {\" \"}\n                <div className=\"post-content\">{post.postContent}</div>\n              </Link>\n              <div className=\"post-actions\">\n                {\" \"}\n                <div onClick={this.handleLike}>\n                  {this.state.isLiked ? (\n                    <ThumbUpIcon fontSize=\"small\" color=\"primary\" />\n                  ) : (\n                    <ThumbUpIcon fontSize=\"small\" color=\"disabled\" />\n                  )}{\" \"}\n                  <div>{this.state.numberOfLikes}</div>\n                </div>\n                <div className=\"comment-icon\">\n                  <InsertCommentIcon />\n                  <div>{this.state.numberOfComments}</div>\n                </div>\n              </div>\n              {this.state.showPhoto ? (\n                <img\n                  onClick={this.toggleShowPicture}\n                  className=\"large-img animated zoomIn\"\n                  src={post.postPhoto && post.postPhoto}\n                  alt=\"\"\n                ></img>\n              ) : null}\n            </div>\n          </div>\n        </Theme>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Post);\n","import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport postService from \"./../../lib/post-service\";\n\nimport io from \"socket.io-client\";\nimport { withAuth } from \"../../context/auth-context\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass PostInput extends Component {\n  state = {\n    post: \"\",\n    postPhoto: \"\",\n  };\n\n  handleFileUpload = (e) => {\n    console.log(\"The file to be uploaded is: \", e.target.files);\n    const file = e.target.files[0];\n\n    const uploadData = new FormData();\n    // image => this name has to be the same as in the model since we pass\n    // req.body to .create() method when creating a new project in '/api/projects' POST route\n    uploadData.append(\"image\", file);\n\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/api/posts/upload`, uploadData, {\n        withCredentials: true,\n      })\n      .then((response) => {\n        console.log(\"response is: \", response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state\n        this.setState({ postPhoto: response.data.secure_url });\n      })\n      .catch((err) => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  };\n\n  handleInput = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n  //   postWithSocket = () => {\n  //     socket.emit(\"post\", {}, () => {});\n  //   };\n  //   handleSubmit = (event) => {\n  //     event.preventDefault();\n\n  //     this.postWithSocket();\n\n  //     postService\n  //       .createPost(this.props.user._id, this.state.post, this.state.postPhoto)\n  //       .then((createdPost) => {\n  //         console.log(createdPost);\n  //         const newPosts = [...this.state.newPosts];\n  //         newPosts.push(createdPost.data);\n  //         this.setState({ postPhoto: \"\", post: \"\", newPosts });\n  //         this.handlePostsFollowedApi();\n  //       })\n  //       .catch((err) => {\n  //         console.log(err);\n  //       });\n  //   };\n\n  render() {\n    return (\n      <form className=\"post-form\" onSubmit={this.handleSubmit}>\n        <div className=\"post-main\">\n          <div>\n            <img src={this.props.user.image} alt=\"user profile\" />\n          </div>\n          <div className=\"post-section\">\n            <div className=\"post-user-info\">\n              <div className=\"post-user\">\n                {\" \"}\n                {this.props.user && this.props.user.firstName}{\" \"}\n                {this.props.user && this.props.user.lastName}\n                {\"   \"}\n              </div>\n            </div>\n            {this.state.postPhoto === \"\" ? null : (\n              <span>\n                <img\n                  style={{ width: \"100px\" }}\n                  src={this.state.postPhoto && this.state.postPhoto}\n                  alt=\"\"\n                ></img>\n              </span>\n            )}\n            <textarea\n              className=\"post\"\n              name=\"post\"\n              value={this.state.post}\n              onChange={this.handleInput}\n              placeholder=\"Share you code...\"\n              required\n            />\n            <div className=\"post-actions\">\n              <input\n                name=\"postPhoto\"\n                type=\"file\"\n                // value={this.state.postPhoto}\n                onChange={this.handleFileUpload}\n              />\n              <button className=\"button is-white s-size-7\" type=\"submit\">\n                Post\n              </button>{\" \"}\n            </div>\n          </div>\n        </div>\n\n        {this.state.postPhoto === \"\" ? null : (\n          <span>\n            <img\n              style={{ width: \"100px\" }}\n              src={this.state.postPhoto && this.state.postPhoto}\n              alt=\"\"\n            ></img>\n          </span>\n        )}\n      </form>\n    );\n  }\n}\n\nexport default withAuth(PostInput);\n","import styled, { keyframes } from \"styled-components\";\n\nconst fadeIn = keyframes`\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n`;\n\nexport const Fade = styled.div`\n  background: transparent;\n  border-radius: 3px;\n  color: palevioletred;\n  margin: 0 1em;\n\n  animation: ${fadeIn} 1s linear;\n`;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../context/auth-context\";\nimport { withTheme } from \"./../context/theme-context\";\nimport postService from \"./../lib/post-service\";\nimport Post from \"./../components/Posts/Post\";\nimport \"bulma/css/bulma.css\";\nimport \"animate.css/source/animate.css\";\nimport PostInput from \"./../components/PostInput/PostInput\";\n\nimport { Theme } from \"./../styles/themes\";\nimport { Fade } from \"./../styles/fade\";\nimport axios from \"axios\";\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass Private extends Component {\n  state = {\n    users: [],\n    posts: [],\n    post: \"\",\n    postPhoto: \"\",\n    newPosts: [],\n  };\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    this.handlePostsFollowedApi();\n    socket.emit(\"join-main\", { user: this.props.user._id }, (error) => {\n      if (error) {\n        console.log(error);\n      }\n    });\n    socket.on(\"online\", (user) => {});\n    socket.on(\"postIncoming\", () => {\n      console.log(\"new post\");\n      this.handlePostsFollowedApi();\n    });\n  }\n\n  handlePostsFollowedApi = () => {\n    postService\n      .getAllPostsByFollowedUsers()\n      .then((apiResponse) => {\n        this.setState({ users: apiResponse.data });\n        this.orderPosts();\n      })\n      .catch((err) => this.setState({ users: [] }));\n  };\n\n  orderPosts = () => {\n    //const postsArr = [...this.props.user.posts];\n    console.log(\"orderPosts\");\n    const postsArr = [...this.state.newPosts, ...this.props.user.posts];\n\n    this.state.users.forEach((user) => {\n      postsArr.push(...user.posts);\n    });\n    postsArr.sort((a, b) => {\n      if (a.date > b.date) {\n        return -1;\n      } else if (a.date > b.date) {\n        return 1;\n      }\n      return 0;\n    });\n\n    this.setState({ posts: postsArr });\n  };\n\n  handleInput = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleFileUpload = (e) => {\n    console.log(\"The file to be uploaded is: \", e.target.files);\n    const file = e.target.files[0];\n\n    const uploadData = new FormData();\n    // image => this name has to be the same as in the model since we pass\n    // req.body to .create() method when creating a new project in '/api/projects' POST route\n    uploadData.append(\"image\", file);\n\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/api/posts/upload`, uploadData, {\n        withCredentials: true,\n      })\n      .then((response) => {\n        console.log(\"response is: \", response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state\n        this.setState({ postPhoto: response.data.secure_url });\n      })\n      .catch((err) => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  };\n\n  componentDidUpdate() {\n    // socket.on(\"postIncoming\", () => {\n    //   console.log(\"new post\");\n    //   this.handlePostsFollowedApi();\n    // });\n  }\n\n  postWithSocket = () => {\n    socket.emit(\"post\", {}, () => {});\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n\n    this.postWithSocket();\n\n    postService\n      .createPost(this.props.user._id, this.state.post, this.state.postPhoto)\n      .then((createdPost) => {\n        console.log(createdPost);\n        const newPosts = [...this.state.newPosts];\n        newPosts.push(createdPost.data);\n        this.setState({ postPhoto: \"\", post: \"\", newPosts });\n        this.handlePostsFollowedApi();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  render() {\n    return (\n      <div className=\"dashboard\">\n        <Theme dark={this.props.isDark}>\n          <div className=\"dashboard-header\">\n            <img src={this.props.user.image} alt=\"user profile\" />\n            <div>\n              <h2>Welcome {this.props.user && this.props.user.firstName}</h2>\n              <p>See New Posts Here!</p>\n            </div>\n          </div>\n\n          {/* <PostInput\n            handlePostsFollowedApi={this.props.handlePostsFollowedApi}\n            handleSubmit={this.props.handleSubmit}\n          /> */}\n\n          <form className=\"post-form\" onSubmit={this.handleSubmit}>\n            <div className=\"post-main\">\n              <div>\n                <img src={this.props.user.image} alt=\"user profile\" />\n              </div>\n              <div className=\"post-section\">\n                <div className=\"post-user-info\">\n                  <div className=\"post-user\">\n                    {\" \"}\n                    {this.props.user && this.props.user.firstName}{\" \"}\n                    {this.props.user && this.props.user.lastName}\n                    {\"   \"}\n                  </div>\n                </div>\n                {this.state.postPhoto === \"\" ? null : (\n                  <span>\n                    <img\n                      style={{ width: \"100px\" }}\n                      src={this.state.postPhoto && this.state.postPhoto}\n                      alt=\"\"\n                    ></img>\n                  </span>\n                )}\n                <textarea\n                  className=\"post\"\n                  name=\"post\"\n                  value={this.state.post}\n                  onChange={this.handleInput}\n                  placeholder=\"Share you code...\"\n                  required\n                />\n                <div className=\"post-actions\">\n                  <input\n                    name=\"postPhoto\"\n                    type=\"file\"\n                    // value={this.state.postPhoto}\n                    onChange={this.handleFileUpload}\n                  />\n                  <button className=\"button is-white s-size-7\" type=\"submit\">\n                    Post\n                  </button>{\" \"}\n                </div>\n              </div>\n            </div>\n\n            {this.state.postPhoto === \"\" ? null : (\n              <span>\n                <img\n                  style={{ width: \"100px\" }}\n                  src={this.state.postPhoto && this.state.postPhoto}\n                  alt=\"\"\n                ></img>\n              </span>\n            )}\n          </form>\n          <Fade>\n            {this.state.posts.map((post) => {\n              return <Post key={post._id} post={post} />;\n            })}\n          </Fade>\n        </Theme>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Private);\n","import axios from \"axios\";\n\nclass PostService {\n  constructor() {\n    // this.api  is a reusable base of the request containing the base url (baseURL)\n    // of the API and the options ( `withCredentials: true` )\n    this.api = axios.create({\n      baseURL: process.env.REACT_APP_API_URL,\n      withCredentials: true,\n    });\n  }\n\n  createConversation = (userId) => {\n    const pr = this.api.post(`/api/conversations/${userId}`);\n\n    return pr;\n  };\n\n  getConversations = () => {\n    const pr = this.api.get(`/api/conversations`);\n    return pr;\n  };\n\n  getConversationOne = (conversationId) => {\n    const pr = this.api.get(`/api/conversations/${conversationId}`);\n    return pr;\n  };\n\n  sendMessage = (conversationId, messageContent, userSentToId) => {\n    const pr = this.api.post(`/api/conversations/${conversationId}/message`, {\n      messageContent,\n      userSentToId,\n    });\n    return pr;\n  };\n\n  messageSeen = (conversationId) => {\n    const pr = this.api.get(\n      `/api/conversations/${conversationId}/message-seen`\n    );\n    return pr;\n  };\n\n  deleteMessage = (conversationId, messageId) => {\n    const pr = this.api.delete(\n      `/api/conversations/${conversationId}/message/${messageId}`\n    );\n\n    return pr;\n  };\n}\n\nconst postService = new PostService();\n\nexport default postService;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport UserService from \"./../../lib/user-service\";\nimport conversationService from \"./../../lib/conversation-service\";\n\nimport { Link } from \"react-router-dom\";\nimport authService from \"../../lib/auth-service\";\n\nclass SearchResult extends Component {\n  state = {\n    isFollowing: false,\n    hasConversation: false,\n    conversationId: \"\",\n    user: {},\n  };\n\n  componentDidMount() {\n    this.checkFollow();\n    this.checkConversation();\n  }\n\n  checkFollow = () => {\n    const currentUserFollowing = this.props.user.following;\n    const userSearchId = this.props.userSearch._id;\n    let isFollowing = false;\n    currentUserFollowing.forEach((user) => {\n      if (user === userSearchId) {\n        isFollowing = true;\n      }\n    });\n    this.setState({ isFollowing });\n  };\n\n  checkConversation = () => {\n    const currentUserConversations = this.props.user.conversations;\n    console.log(currentUserConversations);\n    const userSearchId = this.props.userSearch._id;\n\n    let hasConversation = false;\n\n    if (currentUserConversations.length === 0) {\n      this.setState({ hasConversation });\n      return;\n    }\n\n    currentUserConversations.forEach((conversation) => {\n      if (conversation.users.includes(userSearchId)) {\n        hasConversation = true;\n        this.setState({ conversationId: conversation._id });\n      }\n    });\n\n    this.setState({ hasConversation });\n  };\n  handleFollow = () => {\n    UserService.follow(this.props.userSearch._id).then((apiResponse) => {\n      console.log(apiResponse);\n      this.setState({ isFollowing: true });\n    });\n  };\n\n  handleUnfollow = () => {\n    UserService.unfollow(this.props.userSearch._id).then((apiResponse) => {\n      console.log(apiResponse);\n      this.setState({ isFollowing: false });\n    });\n  };\n\n  createConversation = () => {\n    const userSearchId = this.props.userSearch._id;\n\n    conversationService.createConversation(userSearchId).then((apiResponse) => {\n      console.log(apiResponse);\n      const conversationId = apiResponse.data;\n\n      this.setState({ hasConversation: true, conversationId });\n    });\n  };\n\n  render() {\n    const { userSearch } = this.props;\n    return (\n      <tr className=\"profile-link\">\n        <td>\n          <img src={userSearch.image} alt=\"user profile\" />\n        </td>\n\n        <td>\n          <Link to={`/profile/${userSearch._id}`}>\n            <p>{userSearch && userSearch.firstName} </p>\n            <p>{userSearch && userSearch.lastName}</p>\n          </Link>\n        </td>\n        <td>\n          {this.state.isFollowing ? (\n            <button\n              className=\"button is-white is-light is-size-7\"\n              onClick={this.handleUnfollow}\n            >\n              Unfollow\n            </button>\n          ) : (\n            <button\n              className=\"button is-success is-light is-size-7\"\n              onClick={this.handleFollow}\n            >\n              Follow\n            </button>\n          )}\n        </td>\n        <td>\n          {this.state.hasConversation ? (\n            <Link\n              className=\"button is-success is-light is-size-7\"\n              to={`/conversation-details/${this.state.conversationId}`}\n            >\n              Go to chat\n            </Link>\n          ) : (\n            <button\n              className=\"button is-white is-light is-size-7\"\n              onClick={this.createConversation}\n            >\n              Start Chat\n            </button>\n          )}\n        </td>\n      </tr>\n    );\n  }\n}\n\nexport default withAuth(SearchResult);\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../context/auth-context\";\nimport userService from \"./../lib/user-service\";\nimport { Link } from \"react-router-dom\";\nimport { Theme } from \"./../styles/themes\";\nimport SearchResult from \"./../components/SeachResult/SearchResult\";\nimport { Fade } from \"./../styles/fade\";\n\nclass Search extends Component {\n  state = {\n    users: [],\n    searchResults: [],\n    searchInput: \"\",\n  };\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    userService\n      .getAll()\n      .then((apiResponse) => {\n        console.log(apiResponse);\n        this.setState({\n          users: apiResponse.data,\n          searchResults: apiResponse.data,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  handleSearchResults = (value) => {\n    const { users } = this.state;\n\n    const filteredUsers = users.filter((user) => {\n      const lowercaseFirstName = user.firstName.toLowerCase();\n      const lowercaseLastName = user.lastName.toLowerCase();\n      const lowercaseSearch = value.toLowerCase();\n\n      if (\n        lowercaseFirstName.startsWith(lowercaseSearch) ||\n        lowercaseLastName.startsWith(lowercaseSearch)\n      ) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n\n    this.setState({ searchResults: filteredUsers });\n  };\n\n  handleInput = (event) => {\n    const { name, value } = event.target;\n    this.handleSearchResults(value);\n    this.setState({ [name]: value });\n  };\n\n  render() {\n    return (\n      <Theme dark={this.props.isDark}>\n        <div className=\"search\">\n          <h1>Search For A Fellow Developer</h1>\n          <input\n            className=\"input is-primary\"\n            name=\"searchInput\"\n            value={this.state.searchInput}\n            onChange={this.handleInput}\n            autoComplete=\"off\"\n          />\n          {this.state.searchInput === \"\" ? null : (\n            <div className=\"animated slideInLeft\">\n              <table>\n                <tbody>\n                  {this.state.searchResults.map((user) => {\n                    return <SearchResult key={user._id} userSearch={user} />;\n                  })}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </Theme>\n    );\n  }\n}\n\nexport default withAuth(Search);\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport { Link } from \"react-router-dom\";\nimport userService from \"./../../lib/user-service\";\n\nclass Notifications extends Component {\n  state = {\n    notifications: [],\n  };\n  //   this.props.user.notifications.reverse().slice(0, 5)\n  componentDidMount() {\n    //this.filterLikes();\n    this.setState({\n      notifications: [...this.props.notifications].reverse().slice(0, 10),\n    });\n  }\n\n  filterNotifications = (notificationId) => {\n    const filteredNotifications = this.state.notifications.filter(\n      (notification) => {\n        if (notificationId === notification._id) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n    );\n\n    this.setState({ notifications: filteredNotifications });\n  };\n\n  deleteNotification = (notificationId) => {\n    userService\n      .deleteNotification(notificationId)\n      .then((apiResponse) => {\n        this.filterNotifications(notificationId);\n        this.props.reduceNotifications();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  render() {\n    const notifications = this.state.notifications;\n    return (\n      <div className=\"notifications-menu animated zoomIn\">\n        {notifications.map((notification) => {\n          return notification.notificationInfo !== \"follow\" ? (\n            <div className=\"notification-item\" key={notification._id}>\n              <img src={`${notification.userActivity.image}`} />\n              <Link to={`/postdetails/${notification.post}`}>\n                <p>\n                  {notification.userActivity.firstName}{\" \"}\n                  {notification.userActivity.lastName}{\" \"}\n                  {notification.notificationInfo} your post\n                </p>\n              </Link>\n              <button\n                className=\"delete notification-delete\"\n                onClick={() => this.deleteNotification(notification._id)}\n              ></button>\n            </div>\n          ) : (\n            <div className=\"notification-item\" key={notification._id}>\n              <Link\n                onClick={this.props.toggleNotifications}\n                to={`/profile/${notification.userActivity._id}`}\n              >\n                <p>\n                  {notification.userActivity.firstName}{\" \"}\n                  {notification.userActivity.lastName} started following you\n                </p>\n              </Link>\n              <button\n                className=\"delete\"\n                onClick={() => this.deleteNotification(notification._id)}\n              >\n                Delete\n              </button>\n            </div>\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Notifications);\n","import React, { Component } from \"react\";\nimport userService from \"./../../lib/user-service\";\nimport axios from \"axios\";\n\nclass EditProfile extends Component {\n  state = {\n    image: \"\",\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    userService\n      .editPhoto(this.state.image)\n      .then((apiResponse) => {\n        console.log(apiResponse);\n        this.setState({ image: \"\" });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  handleFileUpload = (e) => {\n    console.log(\"The file to be uploaded is: \", e.target.files);\n    const file = e.target.files[0];\n\n    const uploadData = new FormData();\n    // image => this name has to be the same as in the model since we pass\n    // req.body to .create() method when creating a new project in '/api/projects' POST route\n    uploadData.append(\"image\", file);\n\n    axios\n      .post(\"http://localhost:5000/api/users/upload\", uploadData, {\n        withCredentials: true,\n      })\n      .then((response) => {\n        console.log(\"response is: \", response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state\n        this.setState({ image: response.data.secure_url });\n      })\n      .catch((err) => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  };\n\n  render() {\n    console.log(this.state);\n    return (\n      <div>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            name=\"image\"\n            type=\"file\"\n            // value={this.state.image}\n            onChange={this.handleFileUpload}\n          />\n\n          {this.state.postPhoto === \"\" ? null : (\n            <span>\n              <img\n                style={{ width: \"100px\" }}\n                src={this.state.postPhoto && this.state.postPhoto}\n                alt=\"\"\n              ></img>\n            </span>\n          )}\n          <button type=\"submit\">Save Changes</button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default EditProfile;\n","import React, { Component } from \"react\";\nimport EditProfile from \"./../EditProfile/EditProfile\";\nimport userService from \"./../../lib/user-service\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\n\nimport \"bulma/css/bulma.css\";\n\nclass Settings extends Component {\n  state = {\n    showEdit: false,\n    isFollowed: false,\n    showSettings: false,\n  };\n\n  componentDidMount() {\n    this.checkFollow();\n  }\n\n  toggleEdit = () => {\n    this.setState({ showEdit: !this.state.showEdit });\n  };\n\n  handleFollow = () => {\n    if (!this.state.isFollowed) {\n      userService.follow(this.props.user._id).then((apiResponse) => {\n        this.setState({ isFollowed: true });\n      });\n    } else if (this.state.isFollowed) {\n      userService\n        .unfollow(this.props.user._id)\n        .then((apiResponse) => {\n          console.log(apiResponse.data.following);\n          this.setState({ isFollowed: false });\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  checkFollow = () => {\n    this.props.user.followers.forEach((userFollowing) => {\n      if (this.props.user._id === userFollowing) {\n        this.setState({ isFollowed: true });\n      }\n    });\n  };\n  toggleSettings = () => {\n    this.setState({ showSettings: !this.state.showSettings });\n  };\n\n  render() {\n    return (\n      <div className=\"settings\">\n        <div onClick={this.toggleSettings}>\n          <SettingsIcon />\n        </div>\n        {this.state.showSettings ? (\n          <div className=\"settings-menu\">\n            <button\n              className=\"is-size-7\t button is-white\"\n              onClick={this.toggleEdit}\n            >\n              Edit Photo\n            </button>\n            {this.state.showEdit ? <EditProfile /> : null}\n\n            {/* <button\n              className=\"is-size-7\t button is-white\"\n              onClick={this.handleFollow}\n            >\n              {this.state.isFollowed\n                ? \"Hide Posts on My Dashboard\"\n                : \"Show Posts on My Dashboard\"}\n            </button> */}\n\n            <button\n              className=\"is-size-7\t button is-white\"\n              onClick={this.props.logout}\n            >\n              Logout\n            </button>\n\n            <button\n              className=\"is-size-7\t button is-white\"\n              onClick={this.props.toggleTheme}\n            >\n              Toggle dark mode{\" \"}\n            </button>\n          </div>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Settings);\n","import styled, { css } from \"styled-components\";\n\nexport const ProfileButton = styled.div`\n  ${(props) =>\n    props.highlight &&\n    css`\n      border: 0.1rem solid #3b945e;\n      border-radius: 5px;\n    `}\n`;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport postService from \"./../../lib/post-service\";\nimport { Link } from \"react-router-dom\";\nimport { Theme } from \"./../../styles/themes\";\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\nimport InsertCommentIcon from \"@material-ui/icons/InsertComment\";\n\n// import \"./../Posts/Post.css\";\nimport \"bulma/css/bulma.css\";\n\nclass Post extends Component {\n  state = {\n    isliked: false,\n    showDelete: false,\n    numberOfLikes: 0,\n    numberOfComments: 0,\n  };\n\n  countNumberOfLikes = () => {\n    let numberOfLikes = this.props.post.likes.length;\n    this.setState({ numberOfLikes });\n  };\n\n  countNumberOfComments = () => {\n    let numberOfComments = this.props.post.comments.length;\n    this.setState({ numberOfComments });\n  };\n\n  handleLike = () => {\n    if (!this.state.isLiked) {\n      postService\n        .likePost(this.props.post._id)\n        .then((postLiked) => {\n          let numberOfLikes = this.state.numberOfLikes;\n          numberOfLikes++;\n          console.log(numberOfLikes);\n          this.setState({ numberOfLikes: numberOfLikes });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n    if (this.state.isLiked) {\n      postService\n        .unlikePost(this.props.post._id)\n        .then((postUnliked) => {\n          let numberOfLikes = this.state.numberOfLikes;\n          numberOfLikes--;\n          console.log(numberOfLikes);\n          this.setState({ numberOfLikes: numberOfLikes });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n    this.setState({ isLiked: !this.state.isLiked });\n  };\n\n  componentDidMount() {\n    let isLiked = false;\n    if (this.props.post) {\n      this.props.post.likes.forEach((likeId) => {\n        if (likeId === this.props.user._id) {\n          isLiked = true;\n        }\n      });\n    }\n    this.setState({ isLiked: isLiked });\n    this.countNumberOfLikes();\n    this.countNumberOfComments();\n  }\n\n  toggleDelete = () => {\n    this.setState({ showDelete: !this.state.showDelete });\n  };\n\n  outputDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.toDateString().split(\" \").slice(0, 3).join(\" \");\n\n    const time = date.toLocaleString().split(\" \").reverse()[0].slice(0, 5);\n    return time + \" \" + day;\n  };\n\n  render() {\n    const { post } = this.props;\n    let classes = \"\";\n    if (this.state.isLiked) {\n      classes = \"liked\";\n    }\n    return (\n      <Theme dark={this.props.isDark}>\n        {/* <header className=\"card-header\">\n            <p className=\"card-header-title\">\n              {post.postedBy && post.postedBy.firstName}{\" \"}\n              {post.postedBy && post.postedBy.lastName}\n            </p>\n            <p\n              onClick={this.toggleDelete}\n              href=\"#\"\n              className=\"delete-icon delete\"\n            ></p>\n            <p href=\"#\" className=\"card-header-icon\" aria-label=\"more options\">\n              <span className=\"icon\">\n                <i className=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n              </span>\n            </p>\n          </header> */}\n\n        {/* {post.postPhoto ? (\n            <img\n              style={{ width: \"100px\" }}\n              src={post.postPhoto && post.postPhoto}\n              alt=\"\"\n            ></img>\n          ) : null}\n          {this.state.showDelete ? (\n            <div>\n              <button\n                className=\"button is-warning is-light is-size-7\"\n                onClick={() => this.props.deletePost(post._id)}\n              >\n                Confirm Delete\n              </button>\n              <button\n                className=\"button is-info is-light is-size-7\"\n                onClick={this.toggleDelete}\n              >\n                Cancel\n              </button>\n            </div>\n          ) : null} */}\n\n        {/* <Link to={`/postdetails/${post._id}`}>\n            <div className=\"card-content\">\n              <div className=\"date\">{this.outputDate(post.date)}</div>\n\n              <div className=\"content\">\n                {post.postContent} <br />\n              </div>\n            </div>\n          </Link> */}\n        {/* <footer className=\"card-footer\">\n            <div\n              onClick={this.handleLike}\n              className={`card-footer-item ${classes}`}\n            >\n              {this.state.isLiked ? (\n                <ThumbUpIcon color=\"primary\" />\n              ) : (\n                <ThumbUpIcon color=\"disabled\" />\n              )}{\" \"}\n              <div> {this.state.numberOfLikes}</div>\n            </div>\n\n            <div className=\"card-footer-item\">\n              <InsertCommentIcon />\n              <div>{this.state.numberOfComments}</div>\n            </div>\n          </footer> */}\n        <div>\n          <div className=\"post-main\">\n            <div>\n              <img src={post.postedBy.image} alt=\"user profile\" />\n            </div>\n            <div className=\"post-section\">\n              <div className=\"post-user-info\">\n                <div className=\"post-user\">\n                  {\" \"}\n                  {post.postedBy && post.postedBy.firstName}{\" \"}\n                  {post.postedBy && post.postedBy.lastName}\n                  {\"   \"}\n                </div>\n                <div className=\"date\">{this.outputDate(post.date)}</div>\n                <p\n                  onClick={this.toggleDelete}\n                  href=\"#\"\n                  className=\"delete-icon delete is-size-7\"\n                ></p>\n                {this.state.showDelete ? (\n                  <div>\n                    <button\n                      className=\"button is-warning is-light is-size-7\"\n                      onClick={() => this.props.deletePost(post._id)}\n                    >\n                      Confirm Delete\n                    </button>\n                    <button\n                      className=\"button is-info is-light is-size-7\"\n                      onClick={this.toggleDelete}\n                    >\n                      Cancel\n                    </button>\n                  </div>\n                ) : null}{\" \"}\n              </div>\n\n              {post.postPhoto ? (\n                <img\n                  className=\"post-image\"\n                  style={{ width: \"100px\" }}\n                  src={post.postPhoto && post.postPhoto}\n                  alt=\"\"\n                ></img>\n              ) : null}\n              <Link to={`/postdetails/${post._id}`}>\n                {\" \"}\n                <div className=\"post-content\">{post.postContent}</div>\n              </Link>\n\n              <div className=\"post-actions\">\n                {\" \"}\n                <div onClick={this.handleLike}>\n                  {this.state.isLiked ? (\n                    <ThumbUpIcon fontSize=\"small\" color=\"primary\" />\n                  ) : (\n                    <ThumbUpIcon fontSize=\"small\" color=\"disabled\" />\n                  )}{\" \"}\n                  <div>{this.state.numberOfLikes}</div>\n                </div>\n                <div className=\"comment-icon\">\n                  <InsertCommentIcon />\n                  <div>{this.state.numberOfComments}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </Theme>\n    );\n  }\n}\n\nexport default withAuth(Post);\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../context/auth-context\";\nimport userService from \"./../lib/user-service\";\nimport Post from \"./../components/Posts/Post\";\nimport Notifications from \"./../components/Notifications/Notifications\";\nimport EditProfile from \"./../components/EditProfile/EditProfile\";\nimport Settings from \"./../components/Settings/Settings\";\n\nimport Badge from \"@material-ui/core/Badge\";\nimport NotificationsIcon from \"@material-ui/icons/Notifications\";\nimport SettingsIcon from \"@material-ui/icons/Settings\";\nimport { useSpring, animated } from \"react-spring\";\n\nimport { Theme } from \"./../styles/themes\";\nimport { ProfileButton } from \"./../styles/profile-button\";\n\nimport UserPost from \"./../components/UserPost/UserPost\";\nimport axios from \"axios\";\nimport \"bulma/css/bulma.css\";\n\nimport { Link } from \"react-router-dom\";\nimport postService from \"../lib/post-service\";\nimport authService from \"../lib/auth-service\";\nimport io from \"socket.io-client\";\n\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass Profile extends Component {\n  state = {\n    user: {},\n    posts: [],\n    isAdmin: false,\n    isFollowed: false,\n    showDelete: false,\n    userId: \"\",\n    showPosts: true,\n    showLikes: false,\n    showFollowing: false,\n    postInput: \"\",\n    postPhoto: \"\",\n    showNotifications: false,\n    numberOfNotifications: 0,\n    newNotification: false,\n    showSettings: false,\n    following: [],\n  };\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    this.handlePostApi(true);\n\n    socket.on(\"notification\", (response) => {\n      const userId = response.userId.userId;\n      const userLiked = response.userId.userLiked;\n      console.log(userLiked);\n      if (userId === this.props.user._id && userLiked !== this.props.user._id) {\n        this.handlePostApi();\n      }\n    });\n  }\n\n  handlePostApi = (mount) => {\n    const profileId = this.props.match.params.id;\n    userService\n      .getOne(profileId)\n      .then((apiResponse) => {\n        this.setState({\n          user: apiResponse.data.user,\n          isAdmin: apiResponse.data.isAdmin,\n          userId: profileId,\n          newNotification: apiResponse.data.user.newNotification,\n        });\n        if (mount) {\n          this.displayPosts();\n        }\n\n        this.checkFollow();\n        this.orderPosts();\n        this.setFollowing();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  orderPosts = () => {\n    const postsArr = [];\n\n    this.state.user.posts.forEach((post) => {\n      postsArr.push(post);\n    });\n    postsArr.sort((a, b) => {\n      if (a.date > b.date) {\n        return -1;\n      } else if (a.date > b.date) {\n        return 1;\n      }\n      return 0;\n    });\n\n    this.setState({\n      posts: postsArr,\n      numberOfNotifications: this.state.user.notifications.length,\n    });\n  };\n\n  componentDidUpdate = () => {\n    if (this.state.userId !== this.props.match.params.id) {\n      this.handlePostApi();\n    }\n  };\n\n  checkFollow = () => {\n    this.state.user.followers.forEach((userFollowing) => {\n      if (this.props.user._id === userFollowing) {\n        this.setState({ isFollowed: true });\n      }\n    });\n  };\n\n  handleFollow = () => {\n    if (!this.state.isFollowed) {\n      userService.follow(this.state.user._id).then((apiResponse) => {\n        this.setState({ isFollowed: true });\n      });\n    } else if (this.state.isFollowed) {\n      userService\n        .unfollow(this.state.user._id)\n        .then((apiResponse) => {\n          console.log(apiResponse.data.following);\n          this.setState({ isFollowed: false });\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  deletePost = (postId) => {\n    postService\n      .delete(postId)\n      .then((apiResponse) => {\n        this.handlePostApi();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  displayPosts = () => {\n    this.handlePostApi(false);\n\n    this.setState({ showPosts: true, showLikes: false, showFollowing: false });\n  };\n  displayLikes = () => {\n    this.handlePostApi(false);\n\n    this.setState({ showPosts: false, showLikes: true, showFollowing: false });\n  };\n  displayFollowing = () => {\n    this.handlePostApi(false);\n\n    this.setState({ showPosts: false, showLikes: false, showFollowing: true });\n  };\n\n  handleInput = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    postService\n      .createPost(\n        this.props.user._id,\n        this.state.postInput,\n        this.state.postPhoto\n      )\n      .then((createdPost) => {\n        this.handlePostApi();\n        this.setState({ postPhoto: \"\", postInput: \"\" });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  toggleNotifications = () => {\n    if (this.state.newNotification) {\n      userService\n        .seenNotification()\n        .then((apiResponse) => {\n          this.setState({ newNotification: false });\n        })\n        .catch((err) => console.log(err));\n    }\n    this.setState({ showNotifications: !this.state.showNotifications });\n  };\n\n  reduceNotifications = () => {\n    let notifications = this.state.numberOfNotifications;\n\n    notifications--;\n    this.setState({ numberOfNotifications: notifications });\n  };\n\n  toggleSettings = () => {\n    this.setState({ showSettings: !this.state.showSettings });\n  };\n\n  setFollowing = () => {\n    const following = this.state.user.following;\n    const userProfile = this.state.user;\n    const filteredFollowing = following.filter((user) => {\n      if (user._id === userProfile._id) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n    this.setState({ following: filteredFollowing });\n  };\n\n  handleFileUpload = (e) => {\n    console.log(\"The file to be uploaded is: \", e.target.files);\n    const file = e.target.files[0];\n\n    const uploadData = new FormData();\n    // image => this name has to be the same as in the model since we pass\n    // req.body to .create() method when creating a new project in '/api/projects' POST route\n    uploadData.append(\"image\", file);\n\n    axios\n      .post(`${process.env.REACT_APP_API_URL}/api/posts/upload`, uploadData, {\n        withCredentials: true,\n      })\n      .then((response) => {\n        console.log(\"response is: \", response);\n        // after the console.log we can see that response carries 'secure_url' which we can use to update the state\n        this.setState({ postPhoto: response.data.secure_url });\n      })\n      .catch((err) => {\n        console.log(\"Error while uploading the file: \", err);\n      });\n  };\n  getNumberOfFollowers = () => {\n    const isAdmin = this.state.isAdmin;\n    if (isAdmin) {\n      if (this.state.isFollowed) {\n        return this.state.user.following.length - 1;\n      } else {\n        return this.state.user.following.length;\n      }\n    } else {\n      return this.state.user.following.length;\n    }\n  };\n  outputDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.toDateString().split(\" \").slice(1, 4).join(\" \");\n\n    return day;\n  };\n\n  render() {\n    // console.log(this.state.user);\n    // if (this.state.user.following) {\n    //   console.log(this.state.user.following.length);\n    // }\n    // const props = useSpring({\n    //   to: { opacity: 1 },\n    //   from: { opacity: 0 },\n    // });\n    const user = this.state.user;\n    return (\n      <div className=\"profile\">\n        <Theme dark={this.props.isDark}>\n          <div className=\"profile-header\">\n            <img src={this.state.user.image} alt=\"user profile\" />\n            <div>\n              <p>\n                {this.state.user.firstName} {this.state.user.lastName}\n              </p>\n              <p className=\"join-date\">\n                Joined on {this.outputDate(this.state.user.created_at)}\n              </p>\n            </div>\n\n            {this.state.isAdmin ? (\n              <Settings userProfile={this.state.user} />\n            ) : (\n              <button\n                className=\"button is-white is-size-7\"\n                onClick={this.handleFollow}\n              >\n                {this.state.isFollowed ? \"Unfollow\" : \"Follow\"}\n              </button>\n            )}\n            <div className=\"notifications\">\n              {this.state.isAdmin ? (\n                <div>\n                  {this.state.newNotification ? (\n                    <div\n                      onMouseEnter={this.toggleNotifications}\n                      id=\"new-notification\"\n                      className=\"notification is-primary animated bounce\"\n                    >\n                      You have a new notification\n                    </div>\n                  ) : null}\n\n                  <div onClick={this.toggleNotifications}>\n                    <Badge\n                      badgeContent={this.state.numberOfNotifications}\n                      color=\"primary\"\n                      max={10}\n                    >\n                      <NotificationsIcon />\n                    </Badge>\n                  </div>\n                </div>\n              ) : null}\n              {this.state.showNotifications ? (\n                <Notifications\n                  toggleNotifications={this.toggleNotifications}\n                  notifications={this.state.user.notifications}\n                  reduceNotifications={this.reduceNotifications}\n                />\n              ) : null}\n            </div>\n          </div>\n\n          <div className=\"button-group\">\n            <ProfileButton highlight={this.state.showPosts}>\n              <div className=\"button is-white\" onClick={this.displayPosts}>\n                {\" \"}\n                Posts {this.state.posts && this.state.posts.length}\n              </div>\n            </ProfileButton>\n\n            <ProfileButton highlight={this.state.showLikes}>\n              <div className=\"button is-white\" onClick={this.displayLikes}>\n                {\" \"}\n                Likes {this.state.user.likes && this.state.user.likes.length}\n              </div>\n            </ProfileButton>\n            <ProfileButton highlight={this.state.showFollowing}>\n              <div className=\"button is-white\" onClick={this.displayFollowing}>\n                Following{\" \"}\n                {this.state.user.following && this.state.following.length}\n              </div>\n            </ProfileButton>\n          </div>\n\n          {this.state.showPosts ? (\n            <div className=\"animated fadeInUp\">\n              {this.state.isAdmin ? (\n                <div>\n                  <form className=\"post-form\" onSubmit={this.handleSubmit}>\n                    <div className=\"post-main\">\n                      <div>\n                        <img src={this.props.user.image} alt=\"user profile\" />\n                      </div>\n                      <div className=\"post-section\">\n                        <div className=\"post-user-info\">\n                          <div className=\"post-user\">\n                            {\" \"}\n                            {this.props.user && this.props.user.firstName}{\" \"}\n                            {this.props.user && this.props.user.lastName}\n                            {\"   \"}\n                          </div>\n                        </div>\n                        {this.state.postPhoto === \"\" ? null : (\n                          <span>\n                            <img\n                              style={{ width: \"100px\" }}\n                              src={this.state.postPhoto && this.state.postPhoto}\n                              alt=\"\"\n                            ></img>\n                          </span>\n                        )}\n                        <textarea\n                          className=\"post\"\n                          name=\"postInput\"\n                          value={this.state.postInput}\n                          onChange={this.handleInput}\n                          placeholder=\"Share you code...\"\n                          required\n                        />\n                        <div className=\"post-actions\">\n                          <input\n                            name=\"postPhoto\"\n                            type=\"file\"\n                            // value={this.state.postPhoto}\n                            onChange={this.handleFileUpload}\n                          />\n                          <button\n                            className=\"button is-white s-size-7\"\n                            type=\"submit\"\n                          >\n                            Post\n                          </button>{\" \"}\n                        </div>\n                      </div>\n                    </div>\n\n                    {this.state.postPhoto === \"\" ? null : (\n                      <span>\n                        <img\n                          style={{ width: \"100px\" }}\n                          src={this.state.postPhoto && this.state.postPhoto}\n                          alt=\"\"\n                        ></img>\n                      </span>\n                    )}\n                  </form>\n\n                  {/* <form className=\"post-form\" onSubmit={this.handleSubmit}>\n                    <textarea\n                      className=\"post\"\n                      name=\"postInput\"\n                      value={this.state.postInput}\n                      onChange={this.handleInput}\n                      required\n                    />\n                    <br />\n                    <input\n                      name=\"postPhoto\"\n                      type=\"file\"\n                      // value={this.state.image}\n                      onChange={this.handleFileUpload}\n                    />\n                    {this.state.postPhoto === \"\" ? null : (\n                      <span>\n                        <img\n                          style={{ width: \"100px\" }}\n                          src={this.state.postPhoto && this.state.postPhoto}\n                          alt=\"\"\n                        ></img>\n                      </span>\n                    )}\n\n                    <button className=\"button is-white s-size-7\" type=\"submit\">\n                      Post\n                    </button>\n                  </form> */}\n                </div>\n              ) : null}\n              {this.state.posts &&\n                this.state.posts.map((post) => {\n                  return (\n                    <div key={post._id}>\n                      {this.state.isAdmin ? (\n                        <UserPost post={post} deletePost={this.deletePost} />\n                      ) : (\n                        <Post post={post} />\n                      )}\n                    </div>\n                  );\n                })}{\" \"}\n            </div>\n          ) : null}\n\n          {/* <animated.div style={props}>\n            {this.state.showLikes ? (\n              <div>\n                {this.state.user.likes &&\n                  this.state.user.likes.map((post) => {\n                    return <Post key={post._id} post={post} />;\n                  })}\n              </div>\n            ) : null}\n          </animated.div> */}\n\n          {this.state.showLikes ? (\n            <div className=\"animated fadeInUp\">\n              {this.state.user.likes &&\n                this.state.user.likes.map((post) => {\n                  return <Post key={post._id} post={post} />;\n                })}\n            </div>\n          ) : null}\n          {this.state.showFollowing ? (\n            <div className=\"animated fadeInUp\">\n              {this.state.following.length === 0 ? (\n                <h3>Not following anyone</h3>\n              ) : (\n                <table>\n                  <tbody>\n                    {this.state.following.map((user) => {\n                      return (\n                        <tr key={user._id} className=\"following-link\">\n                          <td>\n                            <img src={user.image} alt=\"user profile\" />\n                          </td>\n\n                          <td>\n                            <p>\n                              <Link to={`/profile/${user._id}`}>\n                                {user.firstName} {user.lastName}\n                              </Link>\n                            </p>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              )}\n            </div>\n          ) : null}\n        </Theme>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Profile);\n","import React, { Component } from \"react\";\nimport postService from \"./../../lib/post-service\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport { Link } from \"react-router-dom\";\nclass Comment extends Component {\n  state = {\n    isAdmin: false,\n  };\n\n  componentDidMount() {\n    this.handleIsAdmin();\n  }\n\n  handleIsAdmin = () => {\n    const createdById = this.props.comment.createdBy._id;\n    const currentUserId = this.props.user._id;\n    console.log(createdById, currentUserId);\n    if (createdById === currentUserId) {\n      console.log(true);\n      this.setState({ isAdmin: true });\n    } else {\n      this.setState({ isAdmin: false });\n    }\n  };\n\n  deleteComment = () => {\n    const postId = this.props.comment.post;\n    const commentId = this.props.comment._id;\n    postService\n      .deleteComment(postId, commentId)\n      .then((apiResponse) => {\n        console.log(\"clicked\");\n        console.log(apiResponse);\n        this.props.getPostDetails();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  render() {\n    const { comment } = this.props;\n\n    return (\n      <div>\n        <div className=\"post-main\">\n          <div>\n            <img src={`${comment.createdBy.image}`} alt=\"user profile\" />\n          </div>\n          <div className=\"post-section\">\n            <div className=\"post-user-info\">\n              <Link to={`/profile/${comment.createdBy._id}`}>\n                {\" \"}\n                <div className=\"post-user\">\n                  {\" \"}\n                  {comment.createdBy.firstName} {comment.createdBy.lastName}\n                  {\"   \"}\n                </div>{\" \"}\n              </Link>\n\n              <div className=\"date\">\n                {this.props.outputDate(comment.created_at)}\n              </div>\n              {/* {this.state.isAdmin ? (\n                <p\n                  onClick={this.deleteComment}\n                  href=\"#\"\n                  className=\"delete-icon delete\"\n                ></p>\n              ) : null} */}\n            </div>{\" \"}\n            <div className=\"post-content\"> {comment.commentContent}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(Comment);\n","import styled, { css } from \"styled-components\";\n\nexport const LikeItem = styled.div`\n  ${() =>\n    css`\nbackground-color: white;\ntop:0;\ndisplay:flex;\njusifty-content:space-between;\nalign-items:center; \nwidth:100%;\nmargin:0 auto;\n\nimg{\n  width:25px;\n  height:25px;\n  border-radius:50%;\n  margin:5px 10px;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n`}\n`;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../context/auth-context\";\nimport postService from \"./../lib/post-service\";\nimport { Link } from \"react-router-dom\";\nimport ThumbUpIcon from \"@material-ui/icons/ThumbUp\";\nimport InsertCommentIcon from \"@material-ui/icons/InsertComment\";\nimport Comment from \"./../components/Comment/Comment\";\nimport { LikeItem } from \"./../styles/likeitem\";\n\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass PostDetails extends Component {\n  state = {\n    post: {},\n    isLiked: false,\n    commentInput: \"\",\n    numberOfLikes: 0,\n    numberOfComments: 0,\n    showLikes: false,\n  };\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n\n    this.handlePostById();\n  }\n\n  componentWillUnmount() {\n    console.log(\"unmount\");\n  }\n  countNumberOfLikes = () => {\n    let numberOfLikes = this.state.post.likes.length;\n    this.setState({ numberOfLikes });\n  };\n\n  countNumberOfComments = () => {\n    let numberOfComments = this.state.post.comments.length;\n    this.setState({ numberOfComments });\n  };\n\n  setLike = () => {\n    let isLiked = false;\n\n    this.state.post.likes.forEach((user) => {\n      if (user._id === this.props.user._id) {\n        isLiked = true;\n      }\n    });\n\n    this.setState({ isLiked: isLiked });\n  };\n\n  toggleLikes = () => {\n    this.setState({ showLikes: !this.state.showLikes });\n  };\n\n  handlePostById = () => {\n    const { postId } = this.props.match.params;\n    postService\n      .getById(postId)\n      .then((apiResponse) => {\n        this.setState({ post: apiResponse.data });\n        this.setLike();\n        this.countNumberOfLikes();\n        this.countNumberOfComments();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  handleLike = () => {\n    if (!this.state.isLiked) {\n      postService\n        .likePost(this.state.post._id)\n        .then((postLiked) => {\n          let numberOfLikes = this.state.numberOfLikes;\n          numberOfLikes++;\n          this.setState({ numberOfLikes: numberOfLikes });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n    if (this.state.isLiked) {\n      postService\n        .unlikePost(this.state.post._id)\n        .then((postUnliked) => {\n          let numberOfLikes = this.state.numberOfLikes;\n          numberOfLikes--;\n          this.setState({ numberOfLikes: numberOfLikes });\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n    this.setState({ isLiked: !this.state.isLiked });\n  };\n\n  socketComment = () => {\n    console.log(\"sockey run\");\n    socket.emit(\n      \"notification\",\n      { userId: this.state.post.postedBy._id, userLiked: this.props.user._id },\n      () => {\n        console.log(\"socket called\");\n      }\n    );\n  };\n\n  handleInput = (event) => {\n    const { name, value } = event.target;\n\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    postService\n      .comment(this.state.post._id, this.state.commentInput)\n      .then((apiResponse) => {\n        console.log(apiResponse.data);\n        this.handlePostById();\n        this.setState({ commentInput: \"\" });\n        this.socketComment();\n      });\n  };\n\n  showCommentInput = () => {\n    return (\n      <form onSubmit={this.handleSubmit} className=\"post-comment\">\n        <input\n          name=\"commentInput\"\n          value={this.state.commentInput}\n          onChange={this.handleInput}\n          autoComplete=\"off\"\n        />\n        <button className=\"button is-white s-size-7\" type=\"submit\">\n          Comment\n        </button>\n      </form>\n    );\n  };\n\n  handlePostLinks = () => {\n    const postContent = this.state.post.postContent.split(\" \");\n    console.log(postContent);\n\n    const postContentWithLinkSplit = postContent.map((word) => {\n      if (word.startsWith(\"http\") || word.startsWith(\"https\")) {\n        return <a href={`${word}`}>{word}</a>;\n      } else {\n        return word;\n      }\n    });\n    console.log(postContentWithLinkSplit);\n\n    const postContentWithLink = postContentWithLinkSplit.join(\" \");\n\n    console.log(postContentWithLink);\n\n    return <p>{postContentWithLinkSplit}</p>;\n  };\n\n  outputDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.toDateString().split(\" \").slice(0, 3).join(\" \");\n\n    const time = date.toLocaleString().split(\" \").reverse()[0].slice(0, 5);\n    return time + \" \" + day;\n  };\n\n  render() {\n    let classes = \"\";\n    if (this.state.isLiked) {\n      classes = \"liked\";\n    }\n    const post = this.state.post;\n\n    return (\n      <div>\n        {/* <header className=\"card-header\">\n          {post.postedBy && (\n            <Link to={`/profile/${post.postedBy._id}`}>\n              <div className=\"card-header-title\">\n                <img src={post.postedBy.image} alt=\"profile\" />\n                <div>\n                  {post.postedBy && post.postedBy.firstName}{\" \"}\n                  {post.postedBy && post.postedBy.lastName}\n                </div>\n              </div>\n            </Link>\n          )}\n\n          <p href=\"#\" className=\"card-header-icon\" aria-label=\"more options\">\n            <span className=\"icon\">\n              <i className=\"fas fa-angle-down\" aria-hidden=\"true\"></i>\n            </span>\n          </p>\n        </header> */}\n        {/* {post.postPhoto ? (\n          <img\n            style={{ width: \"100px\" }}\n            src={post.postPhoto && post.postPhoto}\n            alt=\"\"\n          ></img>\n        ) : null} */}\n        {/* <div className=\"card-content\">\n          <div className=\"date\">{this.outputDate(post.date)}</div>\n\n          <div className=\"content\">\n            <p>{post.postContent}</p>\n            <br />\n            <time dateTime=\"2016-1-1\">\n              {post.data && post.date.toLocaleString()}\n            </time>\n            <p onClick={this.toggleLikes}>Likes</p>\n          </div>\n        </div> */}\n\n        {/* <footer className=\"card-footer\">\n          <div\n            onClick={this.handleLike}\n            className={`card-footer-item ${classes}`}\n          >\n            {this.state.isLiked ? (\n              <ThumbUpIcon color=\"primary\" />\n            ) : (\n              <ThumbUpIcon color=\"disabled\" />\n            )}{\" \"}\n            <div>{this.state.numberOfLikes}</div>\n          </div>\n\n          <div className=\"card-footer-item\">\n            <InsertCommentIcon />\n            <div>{this.state.numberOfComments}</div>\n          </div>\n        </footer> */}\n\n        <div id=\"post-details\">\n          <div className=\"post-main\">\n            <div>\n              <img\n                src={post.postedBy && post.postedBy.image}\n                alt=\"user profile\"\n              />\n            </div>\n            <div className=\"post-section\">\n              <div className=\"post-user-info\">\n                <div className=\"post-user\">\n                  {\" \"}\n                  {post.postedBy && post.postedBy.firstName}{\" \"}\n                  {post.postedBy && post.postedBy.lastName}\n                  {\"   \"}\n                </div>\n                <div className=\"date\">{this.outputDate(post.date)}</div>\n              </div>\n              <Link to={`/postdetails/${post._id}`}>\n                {\" \"}\n                <div className=\"post-content\"> {post.postContent}</div>\n              </Link>\n              <p className=\"like-btn\" onClick={this.toggleLikes}>\n                Likes\n              </p>\n              <div className=\"post-actions\">\n                {\" \"}\n                <div onClick={this.handleLike}>\n                  {this.state.isLiked ? (\n                    <ThumbUpIcon fontSize=\"small\" color=\"primary\" />\n                  ) : (\n                    <ThumbUpIcon fontSize=\"small\" color=\"disabled\" />\n                  )}{\" \"}\n                  <div>{this.state.numberOfLikes}</div>\n                </div>\n                <div className=\"comment-icon\">\n                  <InsertCommentIcon />\n                  <div>{this.state.numberOfComments}</div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <section className=\"comments\">\n            {post.comments &&\n              post.comments.map((comment) => {\n                return (\n                  <Comment\n                    outputDate={this.outputDate}\n                    key={comment._id}\n                    getPostDetails={this.handlePostById}\n                    comment={comment}\n                  />\n                );\n              })}\n\n            {this.showCommentInput()}\n          </section>\n          {this.state.showLikes ? (\n            <div className=\"likes animated zoomIn\">\n              {post.likes &&\n                post.likes.map((user) => {\n                  return (\n                    <Link to={`/profile/${user._id}`}>\n                      <LikeItem>\n                        <img src={`${user.image}`} alt=\"profile\" />\n                        <p className=\"like-item\" key={user._id}>\n                          {user.firstName} {user.lastName}\n                        </p>{\" \"}\n                      </LikeItem>\n                    </Link>\n                  );\n                })}\n            </div>\n          ) : null}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(PostDetails);\n","import styled, { css } from \"styled-components\";\n\nexport const MessagePreview = styled.div`\n  ${() =>\n    css`\n  background-color: #f2f2f2;\nimg{\n    width:30px;\n    height:30px;\n    border-radius:50%;\n    margin:5px 10px;\n}\n  h3{\n    \n    font-size:1.2rem;\n  }\n \n  p {\n    margin-bottom:5px;\n    font-size:0.8rem;\n`}\n`;\n","import React, { Component } from \"react\";\nimport { withAuth } from \"./../../context/auth-context\";\nimport CheckIcon from \"@material-ui/icons/Check\";\nimport \"bulma/css/bulma.css\";\n\nclass ConversationListItem extends Component {\n  state = {\n    unreadMessages: 0,\n    isOnline: false,\n  };\n  outputDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.toDateString().split(\" \").slice(0, 3).join(\" \");\n\n    const time = date.toLocaleString().split(\" \").reverse()[0].slice(0, 5);\n    return time + \" \" + day;\n  };\n\n  componentDidMount() {\n    this.checkNotifications();\n  }\n\n  checkOnline = () => {\n    const onlineArr = this.props.online;\n    let online = false;\n    const receiverUserId = this.props.receiverUser._id;\n    onlineArr.forEach((onlineUser) => {\n      if (onlineUser === receiverUserId) {\n        online = true;\n      }\n    });\n\n    return online;\n  };\n\n  checkNotifications = () => {\n    const currentUserId = this.props.user._id;\n    const conversation = this.props.conversation;\n\n    // conversation.notifications.forEach((userId)=>{\n    //     if(currentUserId === userId){\n    //         this.setState({unreadMessages: conversation.notifications.length})\n    //         break\n    //     }\n    // })\n    console.log(\n      \"notications\",\n      conversation.notifications.length,\n      conversation.notifications[0]\n    );\n    if (conversation.notifications[0] === currentUserId) {\n      console.log(\n        \"notications\",\n        conversation.notifications.length,\n        conversation._id\n      );\n      this.setState({ unreadMessages: conversation.notifications.length });\n    }\n  };\n  render() {\n    const { conversation, messageArrLength, receiverUser } = this.props;\n    // console.log(this.state.unreadMessages);\n    // console.log(\"isOnline\", this.checkOnline());\n    return (\n      <div className=\"message-preview\">\n        <img\n          src={`${receiverUser && receiverUser.image}`}\n          alt=\"profile image\"\n        />\n        <div className=\"message-name\">\n          <h3>\n            {receiverUser && receiverUser.firstName}{\" \"}\n            {receiverUser && receiverUser.lastName}{\" \"}\n            {this.checkOnline() ? (\n              <CheckIcon className=\"online animated bounce\" />\n            ) : (\n              <CheckIcon className=\"offline\" />\n            )}\n          </h3>\n\n          <div className=\"message-info\">\n            <div>\n              {this.state.unreadMessages === 0 ? null : (\n                <div className=\"unread\">\n                  <p>{this.state.unreadMessages}</p>\n                </div>\n              )}\n              {conversation.messages[messageArrLength] &&\n                conversation.messages[messageArrLength].userSent.firstName}\n              :{\" \"}\n              {conversation.messages[messageArrLength] &&\n                conversation.messages[messageArrLength].messageContent}\n            </div>\n            <p className=\"message-date\">\n              {this.outputDate(\n                conversation.messages[messageArrLength] &&\n                  conversation.messages[messageArrLength].updated_at\n              )}\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(ConversationListItem);\n","import React, { Component } from \"react\";\nimport conversationService from \"./../lib/conversation-service\";\nimport { withAuth } from \"./../context/auth-context\";\nimport { Link } from \"react-router-dom\";\nimport { MessagePreview } from \"./../styles/message-preview\";\nimport { Theme } from \"./../styles/themes\";\nimport ConversationListItem from \"../components/ConversationListItem/ConversationListItem\";\n\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass Conversation extends Component {\n  state = {\n    conversations: [],\n    online: [],\n  };\n\n  componentDidMount() {\n    window.scrollTo(0, 0);\n    this.getConversations();\n    socket.emit(\"join-main\", { user: this.props.user._id }, (error) => {\n      if (error) {\n        console.log(error);\n      }\n    });\n    socket.on(\"online\", (users) => {\n      // console.log(\"online\");\n      // console.log(users);\n      const userIdArr = Object.values(users.users);\n\n      this.setState({ online: userIdArr });\n    });\n  }\n\n  componentDidUpdate() {\n    socket.on(\"online\", (user) => {});\n  }\n\n  componentWillUnmount() {\n    console.log(\"unmount\");\n  }\n\n  getConversations = () => {\n    conversationService\n      .getConversations()\n      .then((apiResponse) => {\n        this.setState({ conversations: apiResponse.data });\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  filterCurrentUser = (userArr) => {\n    const filteredUserArr = userArr.filter((user) => {\n      if (user._id === this.props.user._id) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n    return filteredUserArr[0];\n  };\n\n  render() {\n    const conversations = this.state.conversations;\n\n    return (\n      <Theme dark={this.props.isDark}>\n        <div className=\"conversation-list\">\n          <h1 className=\"subtitle is-4\">Conversations</h1>\n          {conversations &&\n            conversations.map((conversation) => {\n              const user = this.filterCurrentUser(conversation.users);\n\n              const messageArrLength = conversation.messages.length - 1;\n\n              return (\n                <div key={conversation._id}>\n                  <Link to={`/conversation-details/${conversation._id}`}>\n                    <div className=\"conversations\">\n                      <MessagePreview>\n                        <ConversationListItem\n                          online={this.state.online}\n                          conversation={conversation}\n                          messageArrLength={messageArrLength}\n                          receiverUser={user}\n                        />\n                      </MessagePreview>\n                    </div>\n                  </Link>\n                </div>\n              );\n            })}\n        </div>\n      </Theme>\n    );\n  }\n}\nexport default withAuth(Conversation);\n","import styled, { css } from \"styled-components\";\n\nexport const MessageHeader = styled.div`\n  ${() =>\n    css`\nbackground-color: #f2f2f2;\nposition:sticky;\ntop:0;\ndisplay:flex;\n jusifty-content:space-evenly;\nalign-items:center; \nwidth:100%;\nz-index:6;\n\nimg{\n  width:50px;\n  height:50px;\n  border-radius:50%;\n  margin:5px 10px;\n}\nh3{\n  margin: 0 10px;\n  font-size:1.3rem;\n}\n\np {\n  margin-bottom:5px;\n  font-size:0.8rem;\n`}\n`;\n","import React, { Component } from \"react\";\nimport conversationService from \"./../lib/conversation-service\";\nimport ConversationList from \"./ConversationList\";\nimport { withAuth } from \"./../context/auth-context\";\nimport { Theme, ThemeConversation } from \"./../styles/themes\";\nimport { MessageHeader } from \"./../styles/message-header\";\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass ConversationDetails extends Component {\n  state = {\n    conversation: {},\n    messages: [],\n    sendMessage: \"\",\n    intervalId: \"\",\n    userContact: {},\n    newMessages: [],\n    showDelete: false,\n  };\n\n  componentDidMount() {\n    this.getConversationMount();\n    // this.setTimerFromApiCall();\n    this.seenMessage();\n    this.scrollToBottom();\n  }\n\n  startSocket = () => {\n    socket.emit(\n      \"join\",\n      { room: this.state.conversation._id, user: this.props.user._id },\n      (error) => {\n        if (error) {\n          console.log(error);\n        }\n      }\n    );\n\n    socket.on(\"message\", (message) => {\n      console.log(\"socket called\");\n      // console.log(message.text);\n      // const messages = [];\n      // messages.push(message.text);\n      // this.setState({ newMessages: messages });\n      this.getConversation();\n      this.seenMessage();\n    });\n\n    socket.on(\"online\", (user) => {\n      console.log(\"online\");\n    });\n\n    this.sendDelete();\n  };\n\n  componentDidUpdate() {\n    const messages = this.state.newMessages;\n\n    // socket.once(\"message\", (message) => {\n    //   console.log(\"socket called\");\n    //   // console.log(message.text);\n    //   // messages.push(message.text);\n    //   // this.setState({ newMessages: messages });\n    //   this.getConversation();\n    //   this.seenMessage();\n    // });\n\n    // socket.on(\"online\", (user) => {\n    //   console.log(\"online\");\n    // });\n  }\n\n  scrollToBottom() {\n    this.el.scrollIntoView({ behavior: \"smooth\" });\n  }\n\n  seenMessage = () => {\n    const { conversationId } = this.props.match.params;\n\n    conversationService\n      .messageSeen(conversationId)\n      .then((apiResponse) => {})\n      .catch((err) => console.log(err));\n  };\n\n  getConversation = () => {\n    const { conversationId } = this.props.match.params;\n    conversationService\n      .getConversationOne(conversationId)\n      .then((apiResponse) => {\n        this.setState({ conversation: apiResponse.data });\n        this.getMessages();\n        this.filterCurrentUser(); //maybe don't need\n\n        // this.seenMessage();\n      });\n  };\n\n  getConversationMount = () => {\n    const { conversationId } = this.props.match.params;\n    conversationService\n      .getConversationOne(conversationId)\n      .then((apiResponse) => {\n        this.setState({ conversation: apiResponse.data });\n        this.getMessages();\n        this.filterCurrentUser();\n        this.startSocket();\n      });\n  };\n\n  sendMessage = () => {\n    const message = this.state.sendMessage;\n    const conversationId = this.state.conversation._id;\n    console.log(message);\n    const sendObj = { conversationId, message };\n    if (message) {\n      socket.emit(\"sendMessage\", sendObj, () => {\n        console.log(\"MessageSent\");\n        this.setState({ sendMessage: \"\" });\n      });\n    }\n  };\n\n  sendDelete = () => {\n    const conversationId = this.state.conversation._id;\n\n    const sendObj = { conversationId, message: \"\" };\n\n    socket.emit(\"sendMessage\", sendObj, () => {\n      console.log(\"MessageSent\");\n      this.setState({ sendMessage: \"\" });\n    });\n  };\n\n  getMessages = () => {\n    const messages = this.state.conversation.messages;\n    if (messages.length !== this.state.messages.length) {\n      this.setState({ messages });\n      this.scrollToBottom();\n    }\n  };\n\n  handleInput = (event) => {\n    const { name, value } = event.target;\n\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const { conversationId } = this.props.match.params;\n    const sendMessage = this.state.sendMessage;\n    const userContactId = this.state.userContact._id;\n    console.log(userContactId);\n    conversationService\n      .sendMessage(conversationId, sendMessage, userContactId)\n      .then((apiResponse) => {\n        // this.setState({ sendMessage: \"\" });\n        this.getConversation();\n        this.sendMessage();\n\n        // this.getConversation();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  filterCurrentUser = () => {\n    const userArr = this.state.conversation.users;\n    const filteredUserArr = userArr.filter((user) => {\n      if (user._id === this.props.user._id) {\n        return false;\n      } else {\n        return true;\n      }\n    });\n    this.setState({ userContact: filteredUserArr[0] });\n    return filteredUserArr[0];\n  };\n\n  isAdmin = (userId) => {\n    if (userId === this.props.user._id) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  setTimerFromApiCall = () => {\n    const intervalId = setInterval(() => {\n      this.getConversation();\n    }, 5000);\n    this.setState({ intervalId: intervalId });\n  };\n\n  componentWillUnmount() {\n    clearInterval(this.state.intervalId);\n    this.seenMessage(); // LookLater\n  }\n\n  outputDate = (dateString) => {\n    const date = new Date(dateString);\n    const day = date.toDateString().split(\" \").slice(0, 3).join(\" \");\n\n    const time = date.toLocaleString().split(\" \").reverse()[0].slice(0, 5);\n    return time + \" \" + day;\n  };\n\n  checkSeen = () => {\n    const notificationsArr = this.state.conversation.notifications;\n    const messagesArr = this.state.conversation.messages;\n    const lastMessage = this.state.conversation.messages.length - 1;\n\n    if (\n      notificationsArr.length === 0 &&\n      messagesArr.length !== 0 &&\n      messagesArr[lastMessage].userSent._id === this.props.user._id\n    ) {\n      return \"Seen\";\n    } else {\n      return null;\n    }\n  };\n\n  deleteMessage = (messageId) => {\n    const { conversationId } = this.props.match.params;\n    conversationService\n      .deleteMessage(conversationId, messageId)\n      .then((apiResponse) => {\n        this.getConversation();\n        this.sendDelete();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  toggleDelete = () => {\n    this.setState({ showDelete: !this.state.showDelete });\n  };\n\n  render() {\n    // if (this.state.conversation.users) {\n    //   user = this.filterCurrentUser(this.state.conversation.users);\n    // }\n    let classes = \"\";\n    if (this.state.showDelete) {\n      classes = \"slide-message\";\n    }\n\n    return (\n      <div className=\"conversation-details\">\n        <ThemeConversation dark={this.props.isDark} className=\"isMessages\">\n          <MessageHeader>\n            <img src={this.state.userContact.image} />\n            <h3>\n              {this.state.userContact.firstName}{\" \"}\n              {this.state.userContact.lastName}\n            </h3>\n          </MessageHeader>\n\n          {this.state.messages.map((message) => {\n            return (\n              <div key={message._id}>\n                {this.isAdmin(message.userSent._id) ? (\n                  <div>\n                    <div\n                      onClick={this.toggleDelete}\n                      className={`admin-message ${classes}`}\n                    >\n                      <div>{this.outputDate(message.created_at)}</div>\n                      <p>\n                        <p>\n                          {message.userSent.firstName}: {message.messageContent}{\" \"}\n                        </p>\n                      </p>\n                    </div>\n                    {this.state.showDelete ? (\n                      <button\n                        className=\"delete delete-message\"\n                        onClick={() => this.deleteMessage(message._id)}\n                      ></button>\n                    ) : null}\n                  </div>\n                ) : (\n                  <div className=\"user-message\">\n                    <div>{this.outputDate(message.created_at)}</div>\n\n                    <p>\n                      {message.userSent.firstName}: {message.messageContent}\n                    </p>\n                  </div>\n                )}\n              </div>\n            );\n          })}\n          {/* <div>\n            {this.state.newMessages.map((message) => {\n              return <p>{message}</p>;\n            })}\n          </div> */}\n\n          <div className=\"seen\">\n            {this.state.conversation.notifications && this.checkSeen()}\n          </div>\n\n          <div\n            ref={(el) => {\n              this.el = el;\n            }}\n          ></div>\n          <form onSubmit={this.handleSubmit} className=\"send-message\">\n            <input\n              className=\"input is-info\"\n              value={this.state.sendMessage}\n              name=\"sendMessage\"\n              onChange={this.handleInput}\n              required\n            />\n            <button className=\"button\" type=\"submit\">\n              Send\n            </button>\n          </form>\n        </ThemeConversation>\n      </div>\n    );\n  }\n}\n\nexport default withAuth(ConversationDetails);\n","import React, { Component } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport { withAuth } from \"./../context/auth-context\";\nimport ChatIcon from \"@material-ui/icons/Chat\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport Badge from \"@material-ui/core/Badge\";\n\nimport \"bulma/css/bulma.css\";\n\nimport io from \"socket.io-client\";\n\n//const ENDPOINT = \"http://localhost:5000\";\nconst ENDPOINT = process.env.REACT_APP_API_URL;\nlet socket = io(ENDPOINT);\n\nclass Navbar extends Component {\n  state = {\n    newMessages: 0,\n    newNotification: 0,\n  };\n  componentDidMount() {\n    if (this.props.user) {\n      this.startSocket();\n    }\n  }\n\n  startSocket = () => {\n    const conversations = this.props.user.conversations;\n\n    conversations.forEach((conversation) => {\n      socket.emit(\n        \"join\",\n        { room: conversation._id, user: this.props.user._id },\n        (error) => {\n          if (error) {\n            console.log(error);\n          }\n        }\n      );\n\n      socket.on(\"message\", (message) => {\n        let newMessages = this.state.newMessages;\n        newMessages++;\n        this.setState({ newMessages });\n      });\n    });\n\n    socket.on(\"notification\", (response) => {\n      const userId = response.userId.userId;\n\n      if (userId === this.props.user._id) {\n        let newNotification = this.state.newNotification;\n        newNotification++;\n        this.setState({ newNotification });\n      }\n    });\n  };\n\n  getMessageNotification = () => {\n    const conversations = this.props.user.conversations;\n    const notification = this.state.newMessages / conversations.length;\n    console.log(notification);\n    return notification;\n  };\n  setMessagesZero = () => {\n    this.setState({ newMessages: 0 });\n  };\n  setNotificationsZero = () => {\n    this.setState({ newNotification: 0 });\n  };\n\n  render() {\n    // const { user, logout, isLoggedin } = this.props;\n    return (\n      <nav className=\"side-navbar\">\n        {this.props.isLoggedIn ? (\n          <>\n            <NavLink\n              className=\"btn \"\n              activeClassName=\"nav-link\"\n              to={\"/private\"}\n            >\n              <HomeIcon />\n            </NavLink>\n            <NavLink className=\"btn\" activeClassName=\"nav-link\" to=\"/search\">\n              <SearchIcon />\n            </NavLink>\n            <NavLink\n              className=\"btn\"\n              activeClassName=\"nav-link\"\n              to={`/profile/${this.props.user._id}`}\n              onClick={this.setNotificationsZero}\n            >\n              <Badge\n                badgeContent={this.state.newNotification}\n                color=\"primary\"\n                max={10}\n              >\n                <PersonIcon />\n              </Badge>\n              {/* {this.state.newNotification === 0\n                ? null\n                : this.state.newNotification} */}\n            </NavLink>\n            <NavLink\n              className=\"btn\"\n              activeClassName=\"nav-link\"\n              to={\"/conversations\"}\n              onClick={this.setMessagesZero}\n            >\n              <ChatIcon />\n              {this.getMessageNotification() === 0\n                ? null\n                : this.getMessageNotification()}\n            </NavLink>\n          </>\n        ) : (\n          <>\n            <NavLink to=\"/login\">\n              <button\n                className=\"button btn nav-home-btn\"\n                activeClassName=\"nav-link\"\n              >\n                Login\n              </button>{\" \"}\n            </NavLink>\n            <br />\n            <NavLink to=\"/signup\">\n              <button\n                className=\"button nav-home-btn\"\n                activeClassName=\"nav-link\"\n              >\n                Sign Up\n              </button>{\" \"}\n            </NavLink>\n          </>\n        )}\n      </nav>\n    );\n  }\n}\n\nexport default withAuth(Navbar);\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom';\nimport { withAuth } from './../context/auth-context';\n\n// Route that only allows access to a user who is not logged in\n\nfunction AnonRoute (routeProps) {\n  // Value coming from `AuthProvider` ( via `withAuth` )\n  const { isLoggedIn, isLoading } = routeProps;\n\n  // Values coming from the AnonRoute itself\n  const ComponentToShow = routeProps.component;\n  const { exact, path } = routeProps;\n\n  // If AuthProvider is still making request to check the user\n  if (isLoading) return 'Loading';\n\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={\n        function(props) {\n          if (isLoggedIn) return <Redirect to=\"/private\" />\n          else if (! isLoggedIn) return <ComponentToShow {...props} />\n        }\n      }\n     />\n    )\n}\n\n\nexport default withAuth(AnonRoute);\n","import React from 'react'\nimport { Route, Redirect } from 'react-router-dom';\nimport { withAuth } from './../context/auth-context';\n\n// Route that forbids access to a user who is not logged in\n\nfunction PrivateRoute (routeProps) {\n  // Value coming from `AuthProvider` ( via `withAuth` )\n  const { isLoggedIn, isLoading } = routeProps;\n\n  // Values coming from the PrivateRoute itself\n  const ComponentToShow = routeProps.component;\n  const { exact, path } = routeProps;\n\n  // If AuthProvider is still making request to check the user\n  if (isLoading) return 'Loading';\n\n  return (\n    <Route\n      exact={exact}\n      path={path}\n      render={\n        function(props) {\n          if (! isLoggedIn) return <Redirect to=\"/login\" />;\n          else if (isLoggedIn) return <ComponentToShow {...props} />;\n        }\n      }\n     />\n    )\n}\n\n\nexport default withAuth(PrivateRoute);\n\n\n/* \n// Concise way\nfunction PrivateRoute({ component: Component, isLoggedIn, ...rest }) {\n  return (\n   <Route\n    {...rest}\n    render={ (props)  => isLoggedIn ? <Component {...props} /> : <Redirect to=\"/login\" />}\n   /> \n)} \n*/\n","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport Navbar from \"./components/Navbar\";\nimport Home from \"./pages/Home\";\nimport Signup from \"./pages/Signup\";\nimport Login from \"./pages/Login\";\nimport Private from \"./pages/Private\";\nimport Search from \"./pages/Search\";\nimport Profile from \"./pages/Profile\";\nimport PostDetails from \"./pages/PostDetails\";\nimport ConversationList from \"./pages/ConversationList\";\nimport ConversationDetails from \"./pages/ConversationDetails\";\nimport SideNavbar from \"./components/SideNavbar\";\nimport AnonRoute from \"./components/AnonRoute\";\nimport PrivateRoute from \"./components/PrivateRoute\";\n\nclass App extends Component {\n  render() {\n    console.log(window.innerWidth < 1023);\n\n    return (\n      <div className=\"container\">\n        {/* {window.innerWidth < 1023 ? <Navbar /> : null} */}\n\n        <div className=\"container-side-nav\">\n          <Navbar />\n          {/* {window.innerWidth > 1023 ? <SideNavbar /> : null} */}\n          <div className=\"side-nav-pages\">\n            <Switch>\n              <Route exact path=\"/\" component={Home} />\n\n              <AnonRoute exact path=\"/signup\" component={Signup} />\n              <AnonRoute exact path=\"/login\" component={Login} />\n\n              <PrivateRoute exact path=\"/private\" component={Private} />\n              <PrivateRoute exact path=\"/search\" component={Search} />\n              <PrivateRoute exact path=\"/profile/:id\" component={Profile} />\n              <PrivateRoute\n                exact\n                path=\"/postdetails/:postId\"\n                component={PostDetails}\n              />\n              <PrivateRoute\n                exact\n                path=\"/conversations\"\n                component={ConversationList}\n              />\n              <PrivateRoute\n                exact\n                path=\"/conversation-details/:conversationId\"\n                component={ConversationDetails}\n              />\n            </Switch>\n          </div>\n        </div>\n        <div id=\"nav-space\"></div>\n\n        {/* {window.innerWidth < 1023 ? <Navbar /> : null} */}\n        {/* <Navbar /> */}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport App from './App';\n\nimport { AuthProvider } from './context/auth-context';\n\nReactDOM.render(\n  <Router>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </Router>\n, document.getElementById('root'));\n"],"sourceRoot":""}